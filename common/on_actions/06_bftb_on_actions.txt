on_actions = {
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM.FROM = {
						is_core_of = SMS
						NOT = { is_owned_by = SMS }
					}
				}
				FROM.FROM = { remove_core_of = SMS }
			}
		}
		effect = {
		    if = {
				limit = {
					ROOT = { NOT = { original_tag = PER } }
					FROM.FROM = { has_dynamic_modifier = { modifier = per_british_sphere } }
				}
				FROM.FROM = {
					remove_dynamic_modifier = { modifier = per_british_sphere }
					set_state_flag = per_british_sphere_no_control
				}
			}
			else_if = { #persia add
				limit = {
					ROOT = { original_tag = PER }
					FROM.FROM = { has_state_flag = per_british_sphere_no_control }
				}
				FROM.FROM = {
					add_dynamic_modifier = { modifier = per_british_sphere }
                    clr_state_flag = per_british_sphere_no_control
				}
			}
			#Greece
		    if = {
				limit = { FROM.FROM = { controller = { NOT = { original_tag = GRE } } } }
				#greece remove
				if = {
					limit = { FROM.FROM = { has_dynamic_modifier = { modifier = GRE_integration_efforts scope = GRE } } }
					FROM.FROM = { remove_dynamic_modifier = { modifier = GRE_integration_efforts scope = GRE } }
				}
				#greece remove 2
				if = {
					limit = { FROM.FROM = { has_dynamic_modifier = { modifier = GRE_reinforced_local_administration scope = GRE } } }
					FROM.FROM = {
						remove_dynamic_modifier = { modifier = GRE_reinforced_local_administration scope = GRE }
						set_state_flag = GRE_reinforced_local_administration_no_more
					}
				}
				#greece remove 3
				if = {
					limit = { FROM.FROM = { has_dynamic_modifier = { modifier = semi_autonomous_state scope = GRE } } }
					FROM.FROM = { remove_dynamic_modifier = { modifier = semi_autonomous_state scope = GRE } }
				}
			}
			if = {
				limit = { FROM.FROM = { controller = { original_tag = GRE } } }
				#greece add
				if = {
					limit = {
						FROM.FROM = {
							controller = { has_completed_focus = GRE_treaty_of_athens }
							OR = {
								state = 731
								state = 345
								state = 184
								state = 757
								state = 200
								state = 756
								state = 341
								state = 860
								state = 1018
								state = 347
								state = 339
								state = 861
								state = 825
								state = 824
								state = 342
								state = 803
								state = 1225
								state = 1225
							}
							NOT = {
								has_dynamic_modifier = { modifier = GRE_integration_efforts scope = GRE }
								is_core_of = GRE
							}
						}
					}
					FROM.FROM = { add_dynamic_modifier = { modifier = GRE_integration_efforts scope = GRE } }
				}
				#greece add 2
				if = {
					limit = {
						FROM.FROM = {
							NOT = { has_dynamic_modifier = { modifier = GRE_reinforced_local_administration scope = GRE } }
							has_state_flag = GRE_reinforced_local_administration_no_more
						}
					}
					FROM.FROM = {
						add_dynamic_modifier = { modifier = GRE_reinforced_local_administration scope = GRE }
						clr_state_flag = GRE_reinforced_local_administration_no_more
					}
				}
				#greece add 3
				if = {
					limit = {
						FROM.FROM = {
							controller = { has_completed_focus = GRE_grant_limited_autonomy_for_macedonia }
							OR = {
								state = 345
								state = 731
								state = 184
							}
							NOT = { has_dynamic_modifier = { modifier = semi_autonomous_state scope = GRE } }
						}
					}
					FROM.FROM = { add_dynamic_modifier = { modifier = semi_autonomous_state scope = GRE } }
				}
			}
		}
	}
	on_puppet = {
		effect = {
			if = {
				limit = {
					country_exists = HJZ
					HJZ = {
						NOT = {
							has_cosmetic_tag = HJZ_sharifate
							has_cosmetic_tag = HJZ_arabia
						}
					}
					is_subject_of = TUR
				}
				HJZ = { set_cosmetic_tag = HJZ_sharifate }
			}
		}
		effect = {
			if = {
				limit = {
					original_tag = GRE
					has_war_with = TUR
					NOT = {
						has_country_flag = BW1_winner
						has_country_flag = BW1_loser
						has_global_flag = great_war
						has_global_flag = kis_firstbalkanwar_victory
					}
					GRE = { controls_state = 345 }
				}
				GRE = { country_event = ww1_greece.245 }
			}
			if = {
				limit = {
					original_tag = GRE
					has_war_with = TUR
					NOT = {
						has_country_flag = BW1_winner
						has_country_flag = BW1_loser
						has_global_flag = great_war
						has_global_flag = kis_firstbalkanwar_victory
					}
					BUL = { controls_state = 345 }
				}
				GRE = { country_event = ww1_greece.246 }
			}
		}
	}
	on_subject_free = {
		effect = {
			if = {
				limit = {
					country_exists = HJZ
					HJZ = { has_cosmetic_tag = HJZ_sharifate }
					NOT = { is_subject_of = TUR }
				}
				HJZ = { drop_cosmetic_tag = yes }
			}
		}
	}
	on_daily_ARM = {
		effect = {
			if = {
				limit = { any_controlled_state = { has_dynamic_modifier = { modifier = TUR_vilayet_centralization } } }
				TUR_vilayet_centralization_garrison_effect = yes
			}
		}
		effect = {
			if = {
				limit = { has_dynamic_modifier = { modifier = ARM_sublime_realm } }
				TUR_minority_revolt_effect = yes
			}
		}
	}
	on_weekly_RUS = {
		effect = {
			SOV = {
				if = {
					limit = {
						OR = {
							has_global_flag = TUR_kars_agreement_success
							has_global_flag = TUR_kars_agreement_half_success
						}
						any_state = {
							has_state_flag = kars_state
							is_claimed_by = SOV
							OR = {
								is_controlled_by = TRR
								controller = {
									is_in_faction_with = TRR
									NOT = { tag = SOV }
								}
							}
						}
					}
					country_event = ww1_turkey.32
				}
			}
		}	
	}
}
