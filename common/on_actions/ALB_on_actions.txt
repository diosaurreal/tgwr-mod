on_actions = {
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					ROOT = {
						NOT = { original_tag = ALB }
						OR = {
							NOT = {
								has_country_leader = { character = ALB_vilhelm_i }
								has_country_leader = { character = GER_wilhelm_karl_von_urach }
								has_country_leader = { character = ITA_vittorio_emanuele_di_savoy_aosta }
							}
							is_subject_of = TUR
							is_in_faction_with = TUR
						}
					}
					FROM.FROM = { has_dynamic_modifier = { modifier = ALB_muslim_resistance } }
				}
				FROM.FROM = {
					remove_dynamic_modifier = { modifier = ALB_muslim_resistance }
					set_state_flag = ALB_muslim_resistance_no_control
				}
			}
			if = {
				limit = {
					FROM = {
						original_tag = ALB
						NOT = {
							has_global_flag = ALB_muslim_rebellion_end
							is_subject_of = TUR
							is_in_faction_with = TUR
						}
						OR = {
							has_country_leader = { character = ALB_vilhelm_i }
							has_country_leader = { character = GER_wilhelm_karl_von_urach }
							has_country_leader = { character = ITA_vittorio_emanuele_di_savoy_aosta }
						}
					}
					FROM.FROM = { has_state_flag = ALB_muslim_resistance_no_control }
				}
				FROM.FROM = {
					add_dynamic_modifier = { modifier = ALB_muslim_resistance }
					clr_state_flag = ALB_muslim_resistance_no_control
				}
			}
		}
		effect = {
			if = {
				limit = {
					ROOT = {
						NOT = { original_tag = ALB }
						OR = {
							NOT = { has_country_leader = { character = EGY_fuad_i_muhammad_ali } }
							is_subject_of = TUR
							is_in_faction_with = TUR
						}
					}
					FROM.FROM = { has_dynamic_modifier = { modifier = ALB_catholic_resistance } }
				}
				FROM.FROM = {
					remove_dynamic_modifier = { modifier = ALB_catholic_resistance }
					set_state_flag = ALB_catholic_resistance_no_control
				}
			}
			if = {
				limit = {
					FROM = {
						original_tag = ALB
						NOT = {
							has_global_flag = ALB_catholic_rebellion_end
							is_subject_of = TUR
							is_in_faction_with = TUR
						}
						has_country_leader = { character = EGY_fuad_i_muhammad_ali }
					}
					FROM.FROM = { has_state_flag = ALB_catholic_resistance_no_control }
				}
				FROM.FROM = {
					add_dynamic_modifier = { modifier = ALB_catholic_resistance }
					clr_state_flag = ALB_catholic_resistance_no_control
				}
			}
		}
		effect = {
			if = {
				limit = {
					ROOT = {
						OR = {
							AND = {
								tag = ITA
								has_global_flag = ALB_pro_italian_government
							}
							AND = {
								tag = AUS
								has_global_flag = ALB_pro_austrian_government
							}
						}
						has_war_with = ALB
					}
					FROM.FROM = { is_core_of = ALB }
				}
				ROOT = { country_event = { id = albania.78 days = 1 random_days = 6 } }
			}
		}
	}
	on_civil_war_end_before_annexation = { #albania character nationality changes
		effect = {
			if = {
				limit = {
					ROOT = { original_tag = ALB }
					FROM = { original_tag = ALB }
				}
				FROM = { every_character = { set_nationality = ROOT } }
			}
		}
	}
	on_civil_war_end = {
		effect = {
			if = {
				limit = {
					OR = {
						has_country_flag = ALB_contact_the_hoti_tribe
						has_country_flag = ALB_contact_the_kelmendi_tribe
						has_country_flag = ALB_contact_the_shkreli_tribe
						has_country_flag = ALB_contact_the_kastrati_tribe
						has_country_flag = ALB_contact_the_gruda_tribe
						has_country_flag = ALB_contact_the_shala_tribe
						has_country_flag = ALB_contact_the_mat_tribe
					}
				}
				delete_unit_template_and_units = {
						division_template = "Forcat Fisnore"
						disband = no
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_hoti_tribe }
						clr_country_flag = ALB_contact_the_hoti_tribe
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_kelmendi_tribe }
						clr_country_flag = ALB_contact_the_kelmendi_tribe
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_shkreli_tribe }
						clr_country_flag = ALB_contact_the_shkreli_tribe
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_kastrati_tribe }
						clr_country_flag = ALB_contact_the_kastrati_tribe
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_gruda_tribe }
						clr_country_flag = ALB_contact_the_gruda_tribe
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_shala_tribe }
						clr_country_flag = ALB_contact_the_shala_tribe
					}
					if = {
						limit = { has_country_flag = ALB_contact_the_mat_tribe }
						clr_country_flag = ALB_contact_the_mat_tribe
					}
			}
		}
	}
}
