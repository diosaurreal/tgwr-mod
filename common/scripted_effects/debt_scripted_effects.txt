
affect_debt_with_debt_tt_value = {
	#a warlord/china must share his debt with other states.
	#if it has no debt var, use the global chinese debt as base
	if = {
		limit = {
			is_china_or_warlord_no_tt = yes
			NOT = {
				has_variable = debt_dollar
			}
		}
		set_variable = {
			var = debt_dollar
			value = global.chinese_debt
		}
		set_variable = {
			var = debt_dollar_consumer_goods
			value = global.chinese_debt_dollar_consumer_goods
		}
	}
	add_to_variable = {
		debt_dollar = debt_tt_value
	}
	update_debt_in_consumer_goods = yes
	clamp_variable = {
		var = debt_dollar_consumer_goods
		min = 0
	}
	clamp_variable = {
		var = debt_dollar
		min = 0
	}
	if = {
		limit = {
			is_china_or_warlord_no_tt = yes
		}
		apply_this_debt_to_all_chinese_states = yes
	}
	if = {
		limit = {
			check_variable = {
				debt_tt_value > 0 #we are getting new debts
			}
		}
		custom_effect_tooltip = new_debt_tt
		else = {
			multiply_temp_variable = {
				debt_tt_value = -1
			}
			custom_effect_tooltip = repay_debt_tt
		}
	}
}

update_debt_in_consumer_goods = {
	set_temp_variable = {
		debt_tt_dollar_value = debt_dollar
	}
	set_temp_variable = {
		debt_tt_value_percent = debt_tt_value
	}
	divide_temp_variable = {
		debt_tt_value_percent = 60
	}
	divide_temp_variable = {
		debt_tt_dollar_value = 60
	}
	more_debt_interest_on_china = yes
	set_temp_variable = {
		debt_tt_dollar_value_percent = debt_tt_dollar_value
	}
	divide_temp_variable = {
		debt_tt_dollar_value_percent = 100
	}
	
	set_variable = {
		var = debt_dollar_consumer_goods
		value = debt_tt_dollar_value_percent
	}
}

small_debt_repayment = {
	set_temp_variable = {
		debt_tt_value = -83
	}
	affect_debt_with_debt_tt_value = yes
}
medium_debt_repayment = {
	set_temp_variable = {
		debt_tt_value = -416
	}
	affect_debt_with_debt_tt_value = yes
}
big_debt_repayment = {
	set_temp_variable = {
		debt_tt_value = -833
	}
	affect_debt_with_debt_tt_value = yes
}
debt_increase_small = {
	set_temp_variable = {
		debt_tt_value = 83
	}
	affect_debt_with_debt_tt_value = yes
}
debt_increase_4_percent = {
	set_temp_variable = {
		debt_tt_value = debt_dollar
	}
	multiply_temp_variable = {
		var = debt_tt_value
		value = 0.04
	}
	affect_debt_with_debt_tt_value = yes
}
debt_increase_medium = {
	set_temp_variable = {
		debt_tt_value = 416
	}
	affect_debt_with_debt_tt_value = yes
}
debt_increase_high = {
	set_temp_variable = {
		debt_tt_value = 833
	}
	affect_debt_with_debt_tt_value = yes
}

pay_5000M_debt_repayment = {
	set_temp_variable = {
		debt_tt_value = -5000
	}
	affect_debt_with_debt_tt_value = yes
}

##################################################""
#code for china specificaly 
apply_this_debt_to_all_chinese_states = {
	custom_effect_tooltip = debt_affect_all_china
	set_variable = {
		var = global.chinese_debt
		value = debt_dollar
	}
	set_variable = {
		var = global.chinese_debt_dollar_consumer_goods
		value = debt_dollar_consumer_goods
	}
	apply_debt_to_all_china = yes
}

apply_debt_to_all_china = {
	every_country = {
		limit = {
			OR = {
				is_china_or_warlord_no_tt = yes
			}
		}
		set_variable = {
			var = debt_dollar
			value = global.chinese_debt
		}
		set_variable = {
			var = debt_dollar_consumer_goods
			value = global.chinese_debt_dollar_consumer_goods
		}
		if = {
			limit = {
				NOT = {
					has_dynamic_modifier = {
						modifier = CHI_debt
					}
				}
			}
			add_dynamic_modifier = {
				modifier = CHI_debt
			}
		}
	}
}

more_debt_interest_on_china = {
	if = {
		limit = {
			is_china_or_warlord_tt = yes
		}
		multiply_temp_variable = {
			var = debt_tt_dollar_value
			value = 22
		}
		multiply_temp_variable = {
			var = debt_tt_value_percent
			value = 22
		}
	}
}

