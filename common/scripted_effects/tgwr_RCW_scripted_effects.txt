RCW_core_state_FROM = {
	add_state_core = FROM
	if = {
		limit = { 
			FROM = { is_claimed_by = PREV }
		}
		remove_state_claim = FROM
	}
	FROM = {
		if = {
			limit = { 
				OWNER = { is_russian_tag = yes }					
			}
			if = {
				limit = {
					is_capital = no
					OWNER = {
						any_owned_state = {
							NOT = { state = FROM }
						}
					}				
				}
				add_contested_owner = OWNER
				set_state_owner_to = PREV
			}
			else = {
				add_contested_owner = PREV
			}
		}
	}
	every_possible_country = {
		limit = {			
			original_tag = RUS
			NOT = { tag = PREV }
			FROM = { is_core_of = PREV }
		}
		remove_state_core = FROM
		if = {
			limit = { exists = yes }
			add_state_claim = FROM
		}		
	}
}
RCW_transfer_state_PREV = {
	every_other_country = {
		limit = {
			has_war_with = PREV.PREV.OWNER
			OR = {
				controls_state = PREV.PREV
				divisions_in_state = {
					state = PREV.PREV
					size > 0			
				}
			}			
		}
		PREV = { give_military_access = PREV }
	}
	PREV = { add_contested_owner = OWNER }
	transfer_state = PREV
}
RCW_core_state_PREV = {
	add_state_core = PREV
	every_other_country = {
		limit = {
			original_tag = RUS
			any_core_state = { state = PREV.PREV.PREV }
		}
		remove_state_core = PREV.PREV
		add_state_claim = PREV.PREV
	}
	PREV = {
		if = {
			limit = {
				NOT = { is_core_of = OWNER }
				has_resistance = no
			}
			start_resistance = yes
		}
	}
}
RCW_transfer_core_state_PREV = {
	RCW_transfer_state_PREV = yes
	RCW_core_state_PREV = yes
}
RCW_ROOT_release_PREV = {
	ROOT = {
		remove_state_claim = prev.prev
		remove_state_core = prev.prev
		remove_contested_owner = prev.prev
	}
	add_state_core = PREV
	if = {
		limit = {
			PREV = { OWNER = { tag = ROOT } }	
		}
		safe_transfer_state_to = yes
	}
	else = {
		add_contested_owner = PREV
	}
}
RCW_ROOT_fuze_with_FROM = {
	take_all_subjects_FROM = yes
	annex_country = {
		target = FROM
		transfer_troops = yes
	}
	hidden_effect = {
		FROM = {
			if = {
				limit = { 
					ROOT = {
						OR = {
							has_country_leader_ideology = vanguardism
							has_country_leader_ideology = revolutionary_socialism
						}
					}
				}
				every_unit_leader = {
					limit = {
						is_generic_character = no
						has_character_flag = soviet_character
					}
					set_nationality = ROOT
				}
			}
			else = {
				every_unit_leader = {
					limit = {
						is_generic_character = no
						NOT = {
							FROM = { tag = IZH }
							has_character_flag = soviet_character
						}			
					}
					set_nationality = ROOT
				}
			}
		}
		if = {
			limit = {
				is_ai = yes
				FROM = { is_ai = no }
			}
			change_tag_from = FROM
		}	
		every_state = {
			limit = {
				is_core_of = FROM
			}
			remove_core_of = FROM
			add_core_of = ROOT
		}
		every_state = {
			limit = {
				is_claimed_by = FROM
			}
			remove_claim_by = FROM
			add_claim_by = ROOT
		}
		every_state = {
			limit = {
				has_contested_owner = FROM
			}
			remove_contested_owner = FROM
			add_contested_owner = ROOT
		}
	}
}
RCW_FROM_fuze_with_ROOT = {
	FROM = {
		take_all_subjects_ROOT = yes
		annex_country = {
			target = ROOT
			transfer_troops = yes
		}
	}
	hidden_effect = {
		if = {
			limit = { 
				FROM = {
					OR = {
						has_country_leader_ideology = vanguardism
						has_country_leader_ideology = revolutionary_socialism
					}
				}
			}
			every_unit_leader = {
				limit = {
					is_generic_character = no
					has_character_flag = soviet_character
				}
				set_nationality = FROM
			}
		}
		else = {
			every_unit_leader = {
				limit = {
					is_generic_character = no
					NOT = {
						FROM = { tag = IZH }
						has_character_flag = soviet_character
					}			
				}
				set_nationality = FROM
			}
		}
		FROM = {
			if = {
				limit = {
					is_ai = yes
					ROOT = { is_ai = no }
				}
				change_tag_from = ROOT
			}
		}	
		every_core_state = {
			remove_core_of = ROOT
			add_core_of = FROM
		}
		every_state = {
			limit = {
				is_claimed_by = ROOT
			}
			remove_claim_by = ROOT
			add_claim_by = FROM
		}
		every_state = {
			limit = {
				has_contested_owner = ROOT
			}
			remove_contested_owner = ROOT
			add_contested_owner = FROM
		}
	}
}
RCW_THIS_fuze_with_PREV = {
	take_all_subjects_PREV = yes
	annex_country = {
		target = PREV
		transfer_troops = yes
	}
	hidden_effect = {
		PREV = {
			if = {
				limit = { 
					PREV = {
						OR = {
							has_country_leader_ideology = vanguardism
							has_country_leader_ideology = revolutionary_socialism
						}
					}
				}
				every_unit_leader = {
					limit = {
						is_generic_character = no
						has_character_flag = soviet_character
					}
					set_nationality = PREV.PREV
				}
			}
			else = {
				every_unit_leader = {
					limit = {
						is_generic_character = no
						NOT = {
							FROM = { tag = IZH }
							has_character_flag = soviet_character
						}			
					}
					set_nationality = PREV.PREV
				}
			}
		}
		if = {
			limit = {
				is_ai = yes
				FROM = { is_ai = no }
			}
			change_tag_from = PREV
		}	
		every_state = {
			limit = {
				is_core_of = PREV.PREV
			}
			remove_core_of = PREV.PREV
			add_core_of = PREV
		}
		every_state = {
			limit = {
				is_claimed_by = PREV.PREV
			}
			remove_claim_by = PREV.PREV
			add_claim_by = PREV
		}
		every_state = {
			limit = {
				has_contested_owner = PREV.PREV
			}
			remove_contested_owner = PREV.PREV
			add_contested_owner = PREV
		}
	}
}

improve_RCW_lack_of_officers = {
	if = {
		limit = { has_idea = RCW_lack_of_officers1 }
		swap_ideas = {
			remove_idea = RCW_lack_of_officers1
			add_idea = RCW_lack_of_officers2
		}
	}
	else_if = {
		limit = { has_idea = RCW_lack_of_officers2 }
		swap_ideas = {
			remove_idea = RCW_lack_of_officers2
			add_idea = RCW_lack_of_officers3
		}
	}
	else_if = {
		limit = { has_idea = RCW_lack_of_officers3 }
		remove_ideas = RCW_lack_of_officers3
		clr_country_flag = RCW_lack_of_officers3
	}
}

get_RCW_lack_of_officers = {
	if = {
		limit = { 
			has_country_flag = RCW_lack_of_officers3
		}
		add_ideas = RCW_lack_of_officers3  
	}
	else_if = {
		limit = { 
			has_country_flag = RCW_lack_of_officers2
		}
		add_ideas = RCW_lack_of_officers2 
	}
	else_if = {
		limit = {
			OR = {
				has_country_flag = RCW_lack_of_officers1
				has_focus_tree = white_guard_focus
			}		
		}
		add_ideas = RCW_lack_of_officers1
	}	
}

form_RUS_state = {
	set_cosmetic_tag = RUS_state
	set_country_flag = RUS_state
	set_party_name = {
		ideology = democratic
		long_name = RUS_democratic_party_UFA_long
		name = RUS_democratic_party_UFA
	}
	set_party_name = {
		ideology = neutrality
		long_name = RUS_democratic_party_UFA_long
		name = RUS_democratic_party_UFA
	}
	add_stability = 0.1
	add_war_support = 0.15
	add_political_power = 100
	every_other_country = {
		limit = {
			is_subject = no
			OR = {
				tag = KAZ
				tag = URA
				tag = UCH
				tag = ORE
				tag = AMU
				tag = TBK
				tag = USS
			}
			NOT = {
				has_war_with = ROOT
				has_government = communism
			}
		}
		country_event = {
			id = ww1_siberia.6
			random_hours = 24
		}
	}
	unlock_decision_category_tooltip = RCW_terrtorial_management
	set_country_flag = RCW_can_core_states
	mark_focus_tree_layout_dirty = yes
}
SIB_KOM_unification = {
	set_country_flag = SIB_KOM_unification
	RUS = {
		RUS_nikolai_avksentiev = {
			set_nationality = PREV.PREV
			promote_character = social_democracy
		}
		RUS_viktor_chernov = {
			set_nationality = PREV.PREV
			if = {
				limit = { has_ideology = agrarian_socialism }
				promote_character = agrarian_socialism
			}
			else = {
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {				
						ideology=agrarian_socialism
					}
				}
			}	
		}
	}
	hidden_effect = {
		KOM = {
			RUS_fyodor_makhin = {
				set_nationality = ORE
				promote_character = social_democracy
			}
		}	
	}
	RCW_ROOT_fuze_with_FROM = yes
	form_RUS_state = yes
	set_party_name = {
		ideology = communism
		long_name = SUCH_party_long
		name = SUCH_party
	}
	if = {
		limit = {
			has_idea = SIB_medium_eser_influence
		}
		swap_ideas = {
			remove_idea = SIB_medium_eser_influence
			add_idea = SIB_high_eser_influence
		}
	}
	else_if = {
		limit = {
			has_idea = SIB_low_eser_influence
		}
		swap_ideas = {
			remove_idea = SIB_low_eser_influence
			add_idea = SIB_medium_eser_influence
		}
	}
	set_capital = { state = 651 }
	if = {
		limit = { has_subject = IZH }
		IZH = { country_event = ww1_siberia.13 }
	}
	hidden_effect = {
		if = {
			limit = {
				FROM = {
					has_dynamic_modifier = { modifier = RCW_gold_reserve_dynamic_modifier }
				}
			}
			add_dynamic_modifier = {
				modifier = RCW_gold_reserve_dynamic_modifier
			}
			FROM = {
				remove_dynamic_modifier = {
					modifier = RCW_gold_reserve_dynamic_modifier
				}
			}
		}			
	}
}
form_SUCH = {
	set_cosmetic_tag = SUCH
	set_country_flag = SUCH
	RUS = {
		RUS_nikolai_avksentiev = {
			set_nationality = PREV.PREV
			promote_character = social_democracy
		}
		RUS_viktor_chernov = {
			set_nationality = PREV.PREV
			if = {
				limit = { has_ideology = agrarian_socialism }
				promote_character = agrarian_socialism
			}
			else = {
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {				
						ideology=agrarian_socialism
					}
				}
			}			
		}
	}
	hidden_effect = {
		KOM = {
			RUS_fyodor_makhin = {
				set_nationality = ORE
				promote_character = social_democracy
			}
		}
	}
	if = {
		limit = { has_subject = IZH }
		IZH = { country_event = ww1_siberia.13 }
	}
	set_party_name = {
		ideology = democratic
		long_name = SUCH_party_long
		name = SUCH_party
	}
	set_party_name = {
		ideology = communism
		long_name = SUCH_party_long
		name = SUCH_party
	}
	add_stability = 0.1
	add_war_support = 0.15
	add_political_power = 100
}
stay_as_SIB = {
	add_stability = 0.2
	add_war_support = -0.1
	add_political_power = 100
	set_country_flag = stay_as_siberia
	load_focus_tree = white_guard_focus
	hidden_effect = {
		unlock_national_focus = WHI_white_beacon
		unlock_national_focus = WHI_form_the_goverment
		unlock_national_focus = WHI_fill_the_officer_corp
		unlock_national_focus = WHI_mobilize_the_people
	}
}