GER_negotiations_with_FRA_displayer = {
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_alsace_lorraine_for_galicia_flag
			}
			
		}
		custom_effect_tooltip = GER_AUH_FRA_alsace_lorraine_for_galicia
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_briey_for_mulhouse_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_briey_for_mulhouse
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_dismantle_belgium_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_dismantle_belgium
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_puppet_poland_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_puppet_poland
		custom_effect_tooltip = GER_AUH_FRA_ukraine_for_russia
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_puppet_baltics_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_puppet_baltics
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_annex_baltics_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_annex_baltics
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_annex_madagascar_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_annex_madagascar
	}
	if = {
		limit = {
			GER = {
				has_country_flag = GER_AUH_FRA_annex_partial_balkan_losers_flag
			}
		}
		custom_effect_tooltip = GER_AUH_FRA_annex_partial_balkan_losers
	}
}

GER_modify_bundersrat_votes_in_favor = {
	custom_effect_tooltip = GER_modify_bundersrat_votes_in_favor_tt
	add_to_variable = { GER_bundesrat_votes_in_favor = ger_modify_bundersrat_votes_in_favor_var }
	clamp_variable = {
		var = GER_bundesrat_votes_in_favor
		min = 0
		max = GER_total_bundesrat_votes
	}
}

GER_sway_all_states = {
	GER_calculate_bundesrat_votes = yes
	if = {
		limit = { 
			GER_is_prussia_available_in_bundesrat = yes 
			NOT = { has_country_flag = GER_called_in_prussia }
		}
		set_country_flag = GER_called_in_prussia
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_prussia }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_bavaria_available_in_bundesrat = yes 
			NOT = { has_country_flag = GER_called_in_bavaria }
		}
		set_country_flag = GER_called_in_bavaria
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_bavaria }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_saxony_available_in_bundesrat = yes 
			NOT = { has_country_flag = GER_called_in_saxony }
		}
		set_country_flag = GER_called_in_saxony
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_saxony }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_wurttemberg_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_wurttemberg }
		}
		set_country_flag = GER_called_in_wurttemberg
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_wurttemberg }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_baden_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_baden }
		}
		set_country_flag = GER_called_in_baden
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_baden }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_hesse_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_hesse }
		}
		set_country_flag = GER_called_in_hesse
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_hesse }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_brunswick_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_brunswick }
		}
		set_country_flag = GER_called_in_brunswick
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_brunswick }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_alsace_lorraine_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_alsace_lorraine }
		}
		set_country_flag = GER_called_in_alsace_lorraine
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_alsace_lorraine }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_thuringia_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_thuringia}
		}
		set_country_flag = GER_called_in_thuringia
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_thuringia }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_any_minor_state_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_minor_states }
		}
		set_country_flag = GER_called_in_minor_states
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_minor_states }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_any_free_city_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_free_cities }
		}
		set_country_flag = GER_called_in_free_cities
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_free_cities }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_austria_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_austria }
		}
		set_country_flag = GER_called_in_austria
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_austria }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	if = {
		limit = { 
			GER_is_austria_available_in_bundesrat = yes
			NOT = { has_country_flag = GER_called_in_luxembourg }
		}
		set_country_flag = GER_called_in_luxembourg
		set_temp_variable = { ger_modify_bundersrat_votes_in_favor_var = GER_votes_of_luxembourg }
		GER_modify_bundersrat_votes_in_favor = yes
	}
	#GER_update_bundesrat_gui = yes
}

# GER_assign_cooldowns = {
#     clr_country_flag = GER_called_in_prussia
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_baden
# 		}
# 		clr_country_flag = GER_called_in_baden
# 		set_country_flag = GER_baden_cooldown
# 		custom_effect_tooltip = GER_baden_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_baden_cooldown
# 		}
# 		clr_country_flag = GER_baden_cooldown
# 		custom_effect_tooltip = GER_baden_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_hesse
# 		}
# 		clr_country_flag = GER_called_in_hesse
# 		set_country_flag = GER_hesse_cooldown
# 		custom_effect_tooltip = GER_hesse_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_hesse_cooldown
# 		}
# 		clr_country_flag = GER_hesse_cooldown
# 		custom_effect_tooltip = GER_hesse_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_bavaria
# 		}
# 		clr_country_flag = GER_called_in_bavaria
# 		set_country_flag = GER_bavaria_cooldown
# 		custom_effect_tooltip = GER_bavaria_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_bavaria_cooldown
# 		}
# 		clr_country_flag = GER_bavaria_cooldown
# 		custom_effect_tooltip = GER_bavaria_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_free_cities
# 		}
# 		clr_country_flag = GER_called_in_free_cities
# 		set_country_flag = GER_free_cities_cooldown
# 		custom_effect_tooltip = GER_free_cities_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_free_cities_cooldown
# 		}
# 		clr_country_flag = GER_free_cities_cooldown
# 		custom_effect_tooltip = GER_free_cities_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_mecklenburg
# 		}
# 		clr_country_flag = GER_called_in_mecklenburg
# 		set_country_flag = GER_mecklenburg_cooldown
# 		custom_effect_tooltip = GER_mecklenburg_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_mecklenburg_cooldown
# 		}
# 		clr_country_flag = GER_mecklenburg_cooldown
# 		custom_effect_tooltip = GER_mecklenburg_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_saxony
# 		}
# 		clr_country_flag = GER_called_in_saxony
# 		set_country_flag = GER_saxony_cooldown
# 		custom_effect_tooltip = GER_saxony_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_saxony_cooldown
# 		}
# 		clr_country_flag = GER_saxony_cooldown
# 		custom_effect_tooltip = GER_saxony_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_brunswick
# 		}
# 		clr_country_flag = GER_called_in_brunswick
# 		set_country_flag = GER_brunswick_cooldown
# 		custom_effect_tooltip = GER_brunswick_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_brunswick_cooldown
# 		}
# 		clr_country_flag = GER_brunswick_cooldown
# 		custom_effect_tooltip = GER_brunswick_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_wurttemberg
# 		}
# 		clr_country_flag = GER_called_in_wurttemberg
# 		set_country_flag = GER_wurttemberg_cooldown
# 		custom_effect_tooltip = GER_wurttemberg_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_wurttemberg_cooldown
# 		}
# 		clr_country_flag = GER_wurttemberg_cooldown
# 		custom_effect_tooltip = GER_wurttemberg_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_minor_states
# 		}
# 		clr_country_flag = GER_called_in_minor_states
# 		set_country_flag = GER_minor_states_cooldown
# 		custom_effect_tooltip = GER_minor_states_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_minor_states_cooldown
# 		}
# 		clr_country_flag = GER_minor_states_cooldown
# 		custom_effect_tooltip = GER_minor_states_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_thuringia
# 		}
# 		clr_country_flag = GER_called_in_thuringia
# 		set_country_flag = GER_thuringia_cooldown
# 		custom_effect_tooltip = GER_thuringia_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_thuringia_cooldown
# 		}
# 		clr_country_flag = GER_thuringia_cooldown
# 		custom_effect_tooltip = GER_thuringia_cooldown_ends_tt
# 	}
# 	if = {
# 		limit = {
# 			has_country_flag = GER_called_in_alsace_lorraine
# 		}
# 		clr_country_flag = GER_called_in_alsace_lorraine
# 		set_country_flag = GER_alsace_lorraine_cooldown
# 		custom_effect_tooltip = GER_alsace_lorraine_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_alsace_lorraine_cooldown
# 		}
# 		clr_country_flag = GER_alsace_lorraine_cooldown
# 		custom_effect_tooltip = GER_alsace_lorraine_cooldown_ends_tt
# 	}
#     if = {
# 		limit = {
# 			has_country_flag = GER_called_in_austria
# 		}
# 		clr_country_flag = GER_called_in_austria
# 		set_country_flag = GER_austria_cooldown
# 		custom_effect_tooltip = GER_austria_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_austria_cooldown
# 		}
# 		clr_country_flag = GER_austria_cooldown
# 		custom_effect_tooltip = GER_austria_cooldown_ends_tt
# 	}
#     if = {
# 		limit = {
# 			has_country_flag = GER_called_in_luxembourg
# 		}
# 		clr_country_flag = GER_called_in_luxembourg
# 		set_country_flag = GER_luxembourg_cooldown
# 		custom_effect_tooltip = GER_luxembourg_cooldown_tt
# 	}
# 	else_if = {
# 		limit = {
# 			has_country_flag = GER_luxembourg_cooldown
# 		}
# 		clr_country_flag = GER_luxembourg_cooldown
# 		custom_effect_tooltip = GER_luxembourg_cooldown_ends_tt
# 	}
# }
GER_vote_ends = {
	# custom_effect_tooltip = GER_vote_ends_tt
	clr_country_flag = GER_vote_in_bundesrat

	clr_country_flag = GER_called_in_prussia
	clr_country_flag = GER_called_in_bavaria
	clr_country_flag = GER_called_in_saxony
	clr_country_flag = GER_called_in_wurttemberg
	clr_country_flag = GER_called_in_baden
	clr_country_flag = GER_called_in_hesse
	clr_country_flag = GER_called_in_mecklenburg
	clr_country_flag = GER_called_in_brunswick
	clr_country_flag = GER_called_in_alsace_lorraine
	clr_country_flag = GER_called_in_thuringia
	clr_country_flag = GER_called_in_minor_states
	clr_country_flag = GER_called_in_free_cities
	clr_country_flag = GER_called_in_austria
	clr_country_flag = GER_called_in_luxembourg
	# GER_assign_cooldowns = yes
	GER_calculate_bundesrat_votes = yes	
}


GER_upgrade_idea_rising_unions = {
	if = {
		limit = { has_idea = GER_idea_rising_unions }
		swap_ideas = {
			remove_idea = GER_idea_rising_unions
			add_idea = GER_idea_rising_unions2
		}    
	}
	else_if = {
		limit = { has_idea = GER_idea_rising_unions2 }
		swap_ideas = {
			remove_idea = GER_idea_rising_unions2
			add_idea = GER_idea_rising_unions3
		} 
	}
	else = {
		remove_ideas = GER_idea_rising_unions3
	}
}

GER_rustungswende_effect = {
	random_owned_controlled_state = {
		limit = {
			is_core_of = ROOT
			dockyard > 0
		}
		prioritize = {
			763
		}
		remove_building = {
			type = dockyard
			level = 1
		}
		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
		add_building_construction = {
			type = arms_factory
			level = 1
			instant_build = yes
		}
	}
}

GER_alsace_lorraine_constitution_effect = {
	28 = {
		add_core_of = GER
	}
	1107 = {
		add_core_of = GER
	}
	every_owned_state = {
		limit = {
			has_dynamic_modifier = {
				modifier = GER_Reichsland_elsass_lothringen
			}
		}
		remove_dynamic_modifier = {
			modifier = GER_Reichsland_elsass_lothringen
		}
	}
	custom_effect_tooltip = GER_elsass_bundesrat_representation_tt
	add_to_variable = { GER_influence_in_alsace_lorraine = 3 }
	custom_effect_tooltip = {
		localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
		INFLUENCE = "3"
		FEDERAL_STATE = GER_bundesrat_alsace_lorraine_tt
	}
	#GER_update_bundesrat_gui = yes
}

GER_polish_landholders_effect = {
	every_owned_state = {
		limit = {
			is_core_of = POL
			has_dynamic_modifier = { modifier = GER_germanisation }
		}
		custom_effect_tooltip = GER_germanisation_tooltip
		hidden_effect = {
			remove_dynamic_modifier = {
				modifier = GER_germanisation
			}
			add_dynamic_modifier = {
				modifier = GER_extended_germanisation
			}
		}
	}
}

GER_prussian_electoral_reform_effect = {
	add_to_variable = {
		var = GER_ww1_political_power_factor
		value = -0.15
	}
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = 0.1
	}
	add_to_variable = {
		var = GER_ww1_mobilization_laws_cost_factor
		value = 0.1
	}
	add_to_variable = {
		var = GER_ww1_political_advisor_cost_factor
		value = -0.1
	}
	add_to_variable = {
		var = GER_ww1_democratic_drift
		value = 0.05
	}
	add_to_temp_variable = { MODIFIER_1 = -0.15 }
	add_to_temp_variable = { MODIFIER_2 = 0.1 }
	add_to_temp_variable = { MODIFIER_3 = 0.1 }
	add_to_temp_variable = { MODIFIER_4 = -0.1 }
	add_to_temp_variable = { MODIFIER_5 = 0.05 }
	custom_effect_tooltip = {
		localization_key = GER_prussian_electoral_reform_effect_tt
		MODIFIER_ICON_1 = MODIFIER_POLITICAL_POWER_FACTOR
		MODIFIER_ICON_2 = MODIFIER_STABILITY_FACTOR
		MODIFIER_ICON_3 = mobilization_laws_cost_factor
		MODIFIER_ICON_4 = political_advisor_cost_factor
		MODIFIER_ICON_5 = democratic_drift
	}
	set_country_flag = prussian_electoral_reform_passed
	GER_calculate_bundesrat_votes = yes
	if = {
		limit = {
			has_power_balance = {
				id = GER_civilian_government_vs_ohl
			}
		}
		add_power_balance_value = {
			id = GER_civilian_government_vs_ohl
			value = -0.15
			tooltip_side = GER_balance_civilian
		}
	}
}

GER_fith_naval_law_effect = {
	if = {
		limit = {
			has_completed_focus = GER_utilise_the_navy_league
			NOT = {
				has_country_flag = GER_no_navy_league_bonus
			}
		}
		add_ideas = GER_fith_fleet_act_extended
		else = {
			add_ideas = GER_fith_fleet_act
		}
	}
}
GER_progressive_taxation_effect = {
	add_timed_idea = {
		idea = GER_wealth_tax_law_idea
		days = 365
	}
}
GER_emergency_tariff_effect = {
	add_timed_idea = {
		idea = GER_temporary_tariffs
		days = 730
	}
}
GER_first_army_expansion_effect = {
	add_ideas = GER_military_expansion_law
}
GER_limited_army_bill_effect = {
	add_ideas = GER_military_expansion_law_limited
}
GER_second_army_expansion_effect = {
	swap_ideas = {
		remove_idea = GER_military_expansion_law
		add_idea = GER_military_expansion_laws
	}
}
GER_interwar_loser_new_constitution_effect = {
	set_global_flag = weimar_constitution
	set_country_flag = GER_march_reforms_completed
	if = {
		limit = {
			NOT = { has_cosmetic_tag = PRE }
		}
		set_cosmetic_tag = GER_republic
	}
	add_stability = 0.2 #for now
	hidden_effect = { country_event = ww1_german_reichstag.4 } #need proper country event
	news_event = ww1_german_revolution.8

	set_variable = { GER_votes_of_prussia = 25 } #Prussia
	set_variable = { GER_votes_of_bavaria = 7 } #Bavaria
	set_variable = { GER_votes_of_saxony = 5 } #Saxony
	set_variable = { GER_votes_of_wurttemberg = 3 } #Württemberg
	set_variable = { GER_votes_of_baden = 3 } #Baden
	set_variable = { GER_votes_of_hesse = 2 } #Hesse
	set_variable = { GER_votes_of_mecklenburg_schwerin = 1 } #Mecklenburg-Schwerin
	set_variable = { GER_votes_of_mecklenburg = 2 } #Mecklenburg Grand Duchies
	set_variable = { GER_votes_of_brunswick = 1 } #Brunswick
	set_variable = { GER_votes_of_alsace_lorraine = 3 } #Alsace-Lorraine
	set_variable = { GER_votes_of_thuringia = 7 } #Thuringian States
	set_variable = { GER_votes_of_free_cities = 3 } #Free and Hanseatic Cities
	set_variable = { GER_votes_of_minor_states = 5 } #Minor States

	set_variable = { GER_votes_of_luxembourg = 2 } #Luxembourg
	set_variable = { GER_votes_of_austria = 7 } #Austria

	GER_calculate_bundesrat_votes = yes
}
GER_interwar_winner_new_constitution_effect = {
	set_country_flag = GER_march_reforms_completed
	add_stability = 0.1 #for now
	country_event = ww1_german_victory.11
	hidden_effect = {
		country_event = {
			id = ww1_german_victory.24
			days = 24
		}
	}
}
# GER_rapid_urbanisation_reform_effect = {
# 	IF = {
# 		limit = {
# 		   has_idea = GER_rapid_urbanisation
# 		}
# 		swap_ideas = {
# 			remove_idea = GER_rapid_urbanisation
# 			add_idea = GER_rapid_urbanisation_2
# 		}      
# 	}
# 	else_if = {
# 		limit = {
# 			has_idea = GER_rapid_urbanisation_2
# 		}
# 		swap_ideas = {
# 			remove_idea = GER_rapid_urbanisation_2
# 			add_idea = GER_rapid_urbanisation_3
# 		}
# 	}
# 	else = {
# 		remove_ideas = GER_rapid_urbanisation_3
# 	}
# }
GER_five_year_army_law_effect = {
	army_experience = 25
	add_doctrine_cost_reduction = {
		name = GER_five_year_army_law
		cost_reduction = 0.5
		uses = 2
		category = land_doctrine
	}
	if = {
		limit = {
			has_dlc = "Arms Against Tyranny"
		}
		mio:GER_deutsche_waffen_organization = {
			add_mio_size = 2
			add_mio_funds = 750
		}
		mio:GER_mauser_organization = {
			add_mio_size = 2
			add_mio_funds = 750
		}
	}
}
GER_home_by_christmas_improvment = {
	if = {
		limit = {
			has_idea = GER_home_by_christmas
		}
		swap_ideas = {         
			remove_idea = GER_home_by_christmas
			add_idea = GER_home_by_christmas2
		}
	}
	else_if = {
		limit = {
			has_idea = GER_home_by_christmas2
		}
		swap_ideas = {        
			remove_idea = GER_home_by_christmas2
			add_idea = GER_home_by_christmas3
		}
	}
	else = {
		remove_ideas = GER_home_by_christmas3
	}
}

GER_send_ship_to_netherlands = {
	HOL = {
		add_opinion_modifier = {
			target = GER
			modifier = small_increase
		}
		custom_effect_tooltip = GER_HOL_create_4_v105_torpedoes_boats
		hidden_effect = {
			GER = {
				create_equipment_variant = {
					name = "V-105 Class"
					type = ship_hull_light_1
					name_group = GER_DESTROYERS_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_1
						fixed_ship_torpedo_slot = ship_torpedo_1
						mid_1_custom_slot = empty
						rear_1_custom_slot = empty
					}
				}
			}
			custom_effect_tooltip = escape_line
			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "V-105 Class"
				creator = GER
				name = "HNLMS Z 1"
			}
			custom_effect_tooltip = escape_line_half
			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "V-105 Class"
				creator = GER
				name = "HNLMS Z 2"
			}
			custom_effect_tooltip = escape_line_half
			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "V-105 Class"
				creator = GER
				name = "HNLMS Z 3"
			}
			custom_effect_tooltip = escape_line_half
			create_ship = {
				type = ship_hull_light_1
				equipment_variant = "V-105 Class"
				creator = GER
				name = "HNLMS Z 4"
			}
		}
	}
}

GER_steal_netherlands_ships = {
	custom_effect_tooltip = GER_HOL_create_4_v105_torpedoes_boats
	hidden_effect = {
		GER = {
			create_equipment_variant = {
				name = "V-105 Class"
				type = ship_hull_light_1
				name_group = GER_DESTROYERS_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = ship_light_battery_1
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = light_ship_engine_1
					fixed_ship_torpedo_slot = ship_torpedo_1
					mid_1_custom_slot = empty
					rear_1_custom_slot = empty
				}
			}
		}
		custom_effect_tooltip = escape_line
		create_ship = {
			type = ship_hull_light_1
			equipment_variant = "V-105 Class"
			creator = GER
			name = "Z1"
		}
		custom_effect_tooltip = escape_line_half
		create_ship = {
			type = ship_hull_light_1
			equipment_variant = "V-105 Class"
			creator = GER
			name = "Z2"
		}
		custom_effect_tooltip = escape_line_half
		create_ship = {
			type = ship_hull_light_1
			equipment_variant = "V-105 Class"
			creator = GER
			name = "Z3"
		}
		custom_effect_tooltip = escape_line_half
		create_ship = {
			type = ship_hull_light_1
			equipment_variant = "V-105 Class"
			creator = GER
			name = "Z4"
		}
	}
}

GER_enabling_act_effect = {
	custom_effect_tooltip = GER_unlock_war_economy_focuses_tt
	set_country_flag = GER_pass_enabling_act_tt
	country_event = {
		id = ww1_germanrework.102
	}
}

GER_auxiliary_services_act_effect = {
	add_ideas = GER_idea_hindenburg_programme
	unlock_decision_tooltip = GER_toggle_hiddenburg_program
	country_event = {
		id = ww1_germanrework.175
	}
}

GER_democratization_reforms_effect = {
	country_event = {
		id = ww1_germanrework.150
		days = 3
	}
	add_popularity = {
		ideology = democratic
		popularity = 0.1
	}
	if = {
		limit = {
			is_hollweg_chancellor = yes
		}
		hidden_effect = {
			if = {
				limit = {
					GER_theobald_von_bethmann_hollweg = {
						is_country_leader = yes
						has_ideology = authoritarian_democracy
					}
				}
				remove_country_leader_role = {
					character = GER_theobald_von_bethmann_hollweg
					ideology = authoritarian_democracy
				}
				if = {
					limit = { has_character = GER_wilhelm_ii }
					promote_character = GER_wilhelm_ii				
				}
				else = {
					promote_character = GER_wilhelm_von_preussen
				}
				set_party_name = {
					ideology = neutrality
					long_name = GER_neutrality_party
					name = GER_neutrality_party
				}			
			}
		}		
		GER_theobald_von_bethmann_hollweg = {
			if = {
				limit = {
					has_ideology = classical_liberalism
				}
				promote_character = classical_liberalism
			}
			else = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = classical_liberalism
						traits = { GER_hamlet }
					}
				}
			}
		}
		clr_country_flag = spd_m_party
		set_politics = {
			ruling_party = democratic
			long_name = GER_state_secretaries_party
			name = GER_state_secretaries_party
			elections_allowed = yes
		}
		if = {
			limit = {
				has_active_mission = GER_viability_of_the_coalition
			}
			add_days_mission_timeout = {
				mission = GER_viability_of_the_coalition
				days = 360
			}
		}
	}
	else_if = {
		limit = {
			GER_maximilian_von_baden = {
				is_hired_as_advisor = yes
			}			
		}
		GER_maximilian_von_baden = {
			if = {
				limit = {
					has_ideology = classical_liberalism
				}
				promote_character = classical_liberalism
			}
			else = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = classical_liberalism
						traits = { GER_liberal_prince }
					}
				}
			}
		}
		clr_country_flag = spd_m_party
		set_politics = {
			ruling_party = democratic
			long_name = GER_state_secretaries_party
			name = GER_state_secretaries_party
			elections_allowed = yes
		}
	}
	else = {
		set_politics = {
			ruling_party = democratic
			elections_allowed = yes
		}
	}
	if = {
		limit = { has_character = GER_wilhelm_ii }
		add_ideas = GER_wilhelm_ii_postwar
	}
	else = {
		add_ideas = GER_wilhelm_iii
	}
}

GER_parliament_reassign_seats = {
	set_variable = { GER_parliament_seat_array^0 = KPD }
	set_variable = { GER_parliament_seat_array^1 = USPD }
	set_variable = { GER_parliament_seat_array^2 = SPD }
	set_variable = { GER_parliament_seat_array^3 = FVP }
	set_variable = { GER_parliament_seat_array^4 = NLP }
	set_variable = { GER_parliament_seat_array^5 = RP }
	set_variable = { GER_parliament_seat_array^6 = NM }
	set_variable = { GER_parliament_seat_array^7 = NA }
	set_variable = { GER_parliament_seat_array^8 = Z }
	set_variable = { GER_parliament_seat_array^9 = FKP }
	set_variable = { GER_parliament_seat_array^10 = DKP }
	set_variable = { GER_parliament_seat_array^11 = WV }
	set_variable = { GER_parliament_seat_array^12 = DRP }
}

GER_silesia_deal_effect = {
	if = {
		limit = {
			tag = ITA
		}
		hidden_effect = {
			GER = {
				every_owned_state = {
					limit = {
						OR = {
							state = 762
							state = 67
							state = 995
						}
					}
					transfer_state_to = AUS
				}
			}
		}
		else = {
			GER = {
				every_owned_state = {
					limit = {
						OR = {
							state = 762
							state = 67
							state = 995
						}
					}
					transfer_state_to = AUS
				}
			}
		}
	}
	AUS = {
		every_owned_state = {
			limit = {
				OR = {
					state = 244
					state = 39
				}
			}
			transfer_state_to = ITA
		}
	}
	ITA = {
		remove_ideas = idea_italy_triple_alliance
		diplomatic_relation = {
			country = AUS
			relation = non_aggression_pact
			active = yes
		}
		set_country_flag = ITA_silesian_bargain_success
	}
}

GER_give_up_alsace_lorraine_demil = {
	FRA = {
			transfer_state = 1107
			transfer_state = 28
		}
	every_state = {
		limit = {
			OR = {
				state = 28
				state = 1107
			}
		}
		set_demilitarized_zone = yes
	}
}

GER_give_up_alsace_lorraine = {
	FRA = {
		transfer_state = 1107
		transfer_state = 28
	}
}

GER_share_alsace_lorraine = {
	FRA = {
		transfer_state = 1107
		remove_state_claim = 28
	}
}

GER_talks_advance_after_alsace_lorraine = {
	every_country = {
		limit = {
			OR = {
				has_war_with = GER
				is_in_faction_with = FRA
			}
		}
		country_event = {
			id = ww1_germanrework.135
			days = 2
		}
	}
	every_country = {
		limit = {
			is_in_faction_with = GER
		}
		country_event = {
			id = ww1_germanrework.136
			days = 2
		}
	}
}

GER_create_alsace_lorraine = {
	ALS = {
		transfer_state = 1107
		transfer_state = 28
		transfer_state = 863
		transfer_state = 864
	}
}

GER_british_neutrality_effect = {
	ENG = {
		add_ideas = neutrality_idea
		diplomatic_relation = {
			country = GER
			relation = non_aggression_pact
			active = yes
		}
		if = {
			limit = { 
				is_in_faction = yes
				is_faction_leader = no
			}
			leave_faction = yes
		}
		else = {
			dismantle_faction = yes
		}
	}
}
GER_spd_split = {
	if = {
		limit = { 
			NOT= {
				has_global_flag = spd_split
			}
		}
		set_global_flag = spd_split
		effect_tooltip = {
			set_party_name = {
				ideology = democratic
				long_name = GER_majority_social_democratic_party_long
				name = GER_majority_social_democratic_party
			}
			set_party_name = {
				ideology = communism
				long_name = GER_independent_social_democratic_party_long
				name = GER_independent_social_democratic_party
			}
		} 
		hidden_effect = {
			every_possible_country = {
				limit = {
					has_country_flag = spd_m_party
				}
				set_party_name = {
					ideology = democratic
					long_name = GER_majority_social_democratic_party_long
					name = GER_majority_social_democratic_party
				}
				clr_country_flag = spd_m_party
			}
			every_possible_country = {
				limit = {
					has_country_flag = spd_r_party
				}
				set_party_name = {
					ideology = communism
					long_name = GER_independent_social_democratic_party_long
					name = GER_independent_social_democratic_party
				}
				clr_country_flag = spd_r_party
			}
		} 
		GER_spd_split_seats = yes
	}
}
GER_spd_split_seats = {
	set_temp_variable = { var = SPD_temp value = SPD }
	divide_temp_variable = { var = SPD_temp value = 4.2 }
	round_temp_variable = SPD_temp
	add_to_variable = { var = USPD value = SPD_temp }
	subtract_from_variable = { var = SPD value = SPD_temp }
	GER_parliament_reassign_seats = yes
	GER_reload_parliament_gui = yes
}

GER_proclaim_republic = {
	set_global_flag = GER_republic_proclaimed
	hidden_effect = {
		load_focus_tree = german_focus_weimar
	}
	if = {
		limit = {
			has_power_balance = { id = GER_civilian_government_vs_ohl }
		}
		remove_power_balance = {
			id = GER_civilian_government_vs_ohl
		}
	}
	mark_focus_tree_layout_dirty = yes
	GER_wilhelm_ii = {
		set_nationality = HOL
		remove_country_leader_role = {
			ideology = semi_constitutional_monarchy
		}
	}
	promote_character = GER_friedrich_ebert
	set_politics = {
		ruling_party = democratic
		long_name = GER_majority_social_democratic_party_long
		name = GER_majority_social_democratic_party
		elections_allowed = no
	}
	country_event = {
		id = ww1_german_revolution.11
		hours = 2
	}
	hidden_effect = {
		news_event = {
			id = ww1_german_revolution.100
			days = 3
		}
		if = {
			limit = {
				NOT = {
					has_cosmetic_tag = PRE
				}
			}
			drop_cosmetic_tag = yes
		}
		# manpower restore and equipments
		# I dont wanna weimar to have duplicated template names with Reichswehr
		# and damn the locked template it is not even manualy disbandable
		# delete_unit_template_and_units = {
		#     division_template = "Infanterie-Division"
		#     disband = yes
		# }
		# delete_unit_template_and_units = {
		#     division_template = "Garde-Kavallerie-Division"
		#     disband = yes
		# }
		# delete_unit_template_and_units = {
		#     division_template = "Kavallerie-Division"
		#     disband = yes
		# }
		# delete_unit_template_and_units = {
		#     division_template = "Schutztruppe"
		#     disband = yes
		# }
		# delete_unit_template_and_units = {
		#     division_template = "Südwestafrikanische Schutztruppe"
		#     disband = yes
		# }
		# delete_unit_template_and_units = {
		#     division_template = "Tsingtao Garnison"
		#     disband = yes
		# }
		# every_state = {
		#     GER = {
		#         delete_unit = {
		#             state = PREV
		#         }
		#     }
		# }
		# add_ideas = interwar_recovery
		activate_mission = mission_interwar_demobilization
		country_event = {
			id = ww1_german_revolution.3
			days = 7
		}
		every_state = {
			limit = {
				is_claimed_by = ROOT
			}
			remove_claim_by = ROOT
		}
		remove_ideas = {
			GER_wilhelm_ii
			GER_wilhelm_ii_postwar
		} 
		set_party_name = {
			ideology = neutrality
			long_name = GER_national_peoples_party
			name = GER_national_peoples_party
		}
		GER_wolfgang_kapp = {
			if = {
				limit = {
					has_ideology = civilian_dictatorship
				}
				promote_character = civilian_dictatorship
				else = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = civilian_dictatorship
							traits = { staunch_monarchist }
						}
					}
				}	
			}
		}
		set_party_name = {
			ideology = fascism
			long_name = GER_fascism_party_DAP_long
			name = GER_fascism_party_DAP
		}
		GER_anton_drexler = {
			if = {
				limit = {
					has_ideology = gen_nazism
				}
				promote_character = gen_nazism
				else = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = gen_nazism
						}
					}
				}	
			}
		}
		GER_spd_split = yes
		if = {
			limit = {
				NOT = {
					has_global_flag = spartacist_uprising
					has_global_flag = support_spartacists
				}
			}
			promote_character = GER_hugo_haase
			set_party_name = {
				ideology = communism
				long_name = GER_independent_social_democratic_party_long
				name = GER_independent_social_democratic_party
			}
		}
		# Republic of Alsace-Lorraine
		if = {
			limit = {
				OR = {
					AND = {
						controls_state = 28
						owns_state = 28
						controls_state = 1107
						owns_state = 1107
						ALS = {
							exists = no
						}
					}
					has_subject = ALS
				}
			}
			every_owned_state = {
				limit = {
					is_core_of = ALS
				}
				ALS = {
					safe_transfer_state_to = yes
				}
			}
			end_puppet = ALS
			ALS = {
				leave_faction = yes
				add_ideas = standing_alone
				remove_ideas = GER_customs_union
				if = {
					limit = {
						GER = {
							has_war_with = FRA
						}
					}
					add_to_war = {
						targeted_alliance = GER
						enemy = FRA
					}
				}
				give_military_access = GER
				drop_cosmetic_tag = yes
				add_popularity = {
					ideology = communism
					popularity = 0.35
				}
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				ALS_johannes_rebholz = {
					if = {
						limit = {
							has_ideology = revolutionary_socialism
						}
						promote_character = revolutionary_socialism
					}
					else = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = revolutionary_socialism
							}
						}
					}
				}
			}
			FRA = {
				country_event = {
					id = ww1_germany.171
					days = 12
				}
			}
		}
		# Free States
		every_possible_country = {
			limit = {
				is_constituent_of_germany = yes
				OR = {
					exists = no
					is_subject_of = ROOT
				}
				NOT = {
					tag = ALS
					tag = GER
				}
			}
			if = {
				limit = { 
					NOT = {
						tag = BAY
					}
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
			}
			else = {
				set_politics = {
					ruling_party = communism #People's State of Bavaria
					elections_allowed = yes
				}
			}         
			add_popularity = {
				ideology = neutrality
				popularity = -0.35
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.15
			}
			set_country_flag = great_war_loser
			# add_ideas = mutiny_3
			# add_ideas = strikes_3
			if = {
				limit = { has_idea = GER_customs_union }
				remove_ideas = GER_customs_union
			}
		}
		mio:GER_kaiserliche_werft_organization = {
			set_mio_name_key = reichsmarinewerft_wilhelmshaven
			set_mio_flag = reichsmarinewerft_wilhelmshaven
			set_mio_icon = GFX_idea_GER_kriegsmarinewerft_wilhelmshaven
		}
	}
}

GER_politize_OHL_for_interwar = {
	custom_effect_tooltip = GER_politize_OHL_for_interwar
	effect_tooltip = {
		if = {
			limit = {
				has_dynamic_modifier = {
					modifier = GER_ohl_command
				}
			}
			remove_dynamic_modifier = {
				modifier = GER_ohl_command
			}
			clr_country_flag  = GER_OHL_silent_dictatoship
			clr_country_flag  = GER_OHL_dictatoship
			set_country_flag  = GER_OHL_political_influence
		}
	}
}

GER_remove_OHL = {
	if = {
		limit = {
			has_dynamic_modifier = {
				modifier = GER_ohl_command
			}
		}
		remove_dynamic_modifier = {
			modifier = GER_ohl_command
		}
	}
}

GER_intensification_of_submarine_warfare_effect = {
	if = {
		limit = {
			has_u_boat_campaign = no
		}
		add_ideas = GER_unrestricted_submarine_warfare_idea 
	}
	else_if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea
		}
		swap_ideas = {          
			remove_idea = GER_unrestricted_submarine_warfare_idea
			add_idea = GER_unrestricted_submarine_warfare_idea2
		}
	}
	else_if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea2
		}
		swap_ideas = {       
			remove_idea = GER_unrestricted_submarine_warfare_idea2
			add_idea = GER_unrestricted_submarine_warfare_idea3
		}
	}
	else_if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea3
		}
		swap_ideas = {
			remove_idea = GER_unrestricted_submarine_warfare_idea3
			add_idea = GER_unrestricted_submarine_warfare_idea4
		}
	}  
}

GER_reduction_of_submarine_warfare_effect = {
	if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea4
		}
		swap_ideas = {          
			remove_idea = GER_unrestricted_submarine_warfare_idea4
			add_idea = GER_unrestricted_submarine_warfare_idea3
		}
	}
	else_if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea3
		}
		swap_ideas = {         
			remove_idea = GER_unrestricted_submarine_warfare_idea3
			add_idea = GER_unrestricted_submarine_warfare_idea2
		}
	}
	else_if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea2
		}
		swap_ideas = {
			remove_idea = GER_unrestricted_submarine_warfare_idea2
			add_idea = GER_unrestricted_submarine_warfare_idea       
		}
	}
	else_if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea
		}
		remove_ideas = GER_unrestricted_submarine_warfare_idea
	}   
	if = {
		limit = { 
			has_character = GER_alfred_von_tirpitz
			has_idea = GER_alfred_von_tirpitz
			has_unrestricted_submarine_warfare = no
			NOT = {
				has_active_mission = GER_alfred_von_tirpitz_resignation_mission
			}
		}
		country_event = {
			id = ww1_germanrework.180 #Tirpitz threatens to resign over submatine warfare restrictions
			hours = 5
		} 
	}
}

GER_neutral_got_hit_by_a_torpedo = {
	random_country = {
		limit = {
			has_war = no
			OR = {
				tag = SWE
				tag = DEN
				tag = NOR
				tag = HOL
				tag = BEL
				tag = SPR
				tag = POR
				tag = ITA
				tag = IRE
				tag = BRA
			}
			has_equipment = {
				convoy > 5
			}
		}
		country_event = {
			id = ww1_germanrework.162
			days = 2
		}
	}
}

GER_setup_hit_random_list = {
	if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea
		}
		set_temp_variable = {
			neutral_hit_chance = 15
		}
		set_temp_variable = {
			usa_hit_chance = 1
		}
	}
	if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea2
		}
		set_temp_variable = {
			neutral_hit_chance = 20
		}
		set_temp_variable = {
			usa_hit_chance = 10
		}
	}
	if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea3
		}
		set_temp_variable = {
			neutral_hit_chance = 25
		}
		set_temp_variable = {
			usa_hit_chance = 15
		}
	}
	if = {
		limit = {
			has_idea = GER_unrestricted_submarine_warfare_idea4
		}
		set_temp_variable = {
			neutral_hit_chance = 30
		}
		set_temp_variable = {
			usa_hit_chance = 20
		}
	}
	if = {
		limit = {
			OR = {
				has_war_with = USA
				AND = {
					is_historical_focus_on = yes 
					NOT = {
						has_country_flag = magicaly_rooted_lusitania_attack
					}
				}
			}
		}
		set_temp_variable = {
			usa_hit_chance = 0 #remove all chance
		}
	}
	random_list = {
		80 = {
			#nothing ever happens!
		}
		neutral_hit_chance = {
			#hit a random neutral country
			GER_neutral_got_hit_by_a_torpedo = yes
		}
		usa_hit_chance = {
			#we hit USA!
			if = {
				limit = {
					has_global_flag = USA_warned_GER_about_USW
				}
				USA = {
					country_event = {
						id = ww1_germanrework.170 #generic
						days = 2
					}
				}
				else = {
					 country_event = {
						id = ww1_germanrework.164 #lusitania hits!
						days = 2
					}
				}
			}
		   
		}
	}
}

GER_change_wilhelm_ii_portrait = {
   GER_wilhelm_ii = {
		set_portraits = {
			civilian = {
				large="gfx/leaders/GER/GER_Wilhelm_II_1918.png"
			}
		}
	}
	if = {
		limit = {  has_idea = GER_wilhelm_ii }
		swap_ideas = {
			remove_idea = GER_wilhelm_ii
			add_idea = GER_wilhelm_ii_postwar
		}
	}
}

GER_improve_quantitative_war_planning = {
	if = {
		limit = {
			has_idea = quantitative_war_planning4
		}
		add_political_power = 120
	}
	if = {
		limit = {
			has_idea = quantitative_war_planning3
		}
		swap_ideas = {
			add_idea = quantitative_war_planning4
			remove_idea = quantitative_war_planning3
		}
	}
	if = {
		limit = {
			has_idea = quantitative_war_planning2
		}
		swap_ideas = {
			add_idea = quantitative_war_planning3
			remove_idea = quantitative_war_planning2
		}
	}
	if = {
		limit = {
			has_idea = quantitative_war_planning
		}
		swap_ideas = {
			add_idea = quantitative_war_planning2
			remove_idea = quantitative_war_planning
		}
	}
	if = {
		limit = {
			NOT = {
				has_idea = quantitative_war_planning
				has_idea = quantitative_war_planning2
				has_idea = quantitative_war_planning3
				has_idea = quantitative_war_planning4
			}
		}
		add_ideas = quantitative_war_planning
	}
}

GER_mitteleuropa_calculation = {
	set_variable = {
		GER_mitteleuropa_bonus = 0
	}
	every_country = {
		limit = {
			has_idea = GER_mitteleuropa_member
		}
		GER = {
			add_to_variable = {
				GER_mitteleuropa_bonus = 0.02
			}
		}
	}
}

GER_fire_current_chancellor = {
	custom_effect_tooltip = GER_fire_current_chancellor_tt
	hidden_effect = {
		every_character = {
			limit = {
				is_political_advisor = yes
				NOT = {
					advisor_can_be_fired = {
						slot = political_advisor
					}
					is_character = GER_erich_ludendorff
				}			
			}
			if = {
				limit = {
					NOT = {
						is_character = GER_theobald_von_bethmann_hollweg
						is_character = GER_georg_michaelis
						is_character = GER_georg_von_hertling
						is_character = GER_maximilian_von_baden
						is_character = GER_ernst_von_heydebrand
						is_character = GER_wilhelm_solf
						is_character = GER_matthias_erzberger
					}
				}
				set_can_be_fired_in_advisor_role = {
					value = yes
				}
			}
			set_nationality = XXA #couldn't find another way
			set_nationality = PREV
		}
		if = {
			limit = {
				GER_theobald_von_bethmann_hollweg = {
					is_country_leader = yes
					has_ideology = authoritarian_democracy
				}
			}
			remove_country_leader_role = {
				character = GER_theobald_von_bethmann_hollweg
				ideology = authoritarian_democracy
			}
			promote_character = GER_wilhelm_ii
			set_party_name = {
				ideology = neutrality
				long_name = GER_neutrality_party
				name = GER_neutrality_party
			}				
		}
	}
}

generic_setup_building_civ_objective = {
	set_variable = { civilian_total_after_goal = civilian_goal }
	add_to_variable = { civilian_total_after_goal = industrial_complex_level }
	set_state_flag = GER_building_mission_civilian_factory
	custom_effect_tooltip = tt_build_one_civ
}

generic_setup_building_infra_objective = {
	set_variable = { infrastructure_total_after_goal = infrastructure_goal }
	add_to_variable = { infrastructure_total_after_goal = infrastructure_level }
	set_state_flag = GER_building_mission_infrastructure
	custom_effect_tooltip = tt_build_one_infra
}

GER_start_investment_mission_for_federal_state = {
	if = {
		limit = { has_country_flag = GER_negotiating_with_prussia }
		activate_mission = GER_investment_in_prussia
		every_owned_state = {
			limit = {
				is_claimed_by = PRE
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_prussia_tt
			}
		}
		clr_country_flag = GER_negotiating_with_bavaria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_bavaria }
		activate_mission = GER_investment_in_bavaria
		every_owned_state = {
			limit = {
				is_core_of = BAY 
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_bavaria_tt
			}
		}
		clr_country_flag = GER_negotiating_with_bavaria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_saxony }
		activate_mission = GER_investment_in_saxony
		every_owned_state = {
			limit = {
				is_core_of = SAX
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_saxony_tt
			}
		}
		clr_country_flag = GER_negotiating_with_saxony
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_wurttemberg }
		activate_mission = GER_investment_in_wurttemberg
		every_owned_state = {
			limit = {
				is_core_of = WUR
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_wurttemberg_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_wurttemberg
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_baden }
		activate_mission = GER_investment_in_baden
		every_owned_state = {
			limit = {
				is_core_of = BAD
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_baden_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_baden
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_hesse }
		activate_mission = GER_investment_in_hesse
		every_owned_state = {
			limit = {
				is_core_of = HES
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_hesse_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_hesse
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_mecklenburg }
		activate_mission = GER_investment_in_mecklenburg
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = MEK
					is_core_of = MEC
				}
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_mecklenburg_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_mecklenburg
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_brunswick }
		activate_mission = GER_investment_in_brunswick
		every_owned_state = {
			limit = {
				is_core_of = BRU
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_brunswick_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_brunswick
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_alsace_lorraine }
		activate_mission = GER_investment_in_alsace_lorraine
		every_owned_state = {
			limit = {
				is_core_of = ALS
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_alsace_lorraine_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_alsace_lorraine
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_thuringia }
		activate_mission = GER_investment_in_thuringia
		every_owned_state = {
			limit = {
				is_core_of = THU
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_thuringia_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_thuringia
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_minor_states }
		activate_mission = GER_investment_in_minor_states
		every_owned_state = {
			limit = {
				OR = {
					AND = {
						NOT = { country_exists = OLD }
						is_core_of = OLD
					}                   
					#is_core_of = MEC
					is_core_of = ANH
					is_core_of = WLD
					is_core_of = LIP
					is_core_of = SCM
				}
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_minor_states_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_minor_states
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_free_cities }
		activate_mission = GER_investment_in_free_cities
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = BRE
					is_core_of = HAM
					is_core_of = LUB
				}
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_free_cities_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_free_cities
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_austria }
		activate_mission = GER_investment_in_austria
		every_owned_state = {
			limit = {
				region = 22
				is_core_of = AUS
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_austria_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_austria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_luxembourg }
		activate_mission = GER_investment_in_luxembourg
		every_owned_state = {
			limit = {
				is_core_of = LUX
				is_core_of = ROOT
			}
			set_variable = { civilian_goal = 1 }
			generic_setup_building_civ_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_luxembourg_tt
			} 
		}
		clr_country_flag = GER_negotiating_with_luxembourg
	}
	clr_country_flag = GER_negotiating_with_federal_state
	#GER_update_bundesrat_gui = yes
}

GER_start_investment_infra_mission_for_federal_state = {
	if = {
		limit = { has_country_flag = GER_negotiating_with_prussia  }
		activate_mission = GER_investment_in_prussia_infrastructure
		every_owned_state = {
			limit = {
				is_claimed_by = PRE
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_prussia_tt
			}
		}
		clr_country_flag = GER_negotiating_with_bavaria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_bavaria  }
		activate_mission = GER_investment_in_bavaria_infrastructure
		every_owned_state = {
			limit = {
				is_core_of = BAY
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_bavaria_tt
			}
		}
		clr_country_flag = GER_negotiating_with_bavaria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_saxony  }
		activate_mission = GER_investment_in_saxony_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = SAX
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_saxony_tt
			}
		}
		clr_country_flag = GER_negotiating_with_saxony
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_wurttemberg  }
		activate_mission = GER_investment_in_wurttemberg_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = WUR
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_wurttemberg_tt
			}
		}
		clr_country_flag = GER_negotiating_with_wurttemberg
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_baden }
		activate_mission = GER_investment_in_baden_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = BAD
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_baden_tt
			}
		}
		clr_country_flag = GER_negotiating_with_baden
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_hesse }
		activate_mission = GER_investment_in_hesse_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = HES
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_hesse_tt
			}
		}
		clr_country_flag = GER_negotiating_with_hesse
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_mecklenburg }
		activate_mission = GER_investment_in_mecklenburg_infrastructure
		every_owned_state = {
		   limit = {
				OR = {
					is_core_of = MEK
					is_core_of = MEC
				}
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_mecklenburg_tt
			}
		}
		clr_country_flag = GER_negotiating_with_mecklenburg
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_brunswick }
		activate_mission = GER_investment_in_brunswick_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = BRU
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_brunswick_tt
			}
		}
		clr_country_flag = GER_negotiating_with_brunswick
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_alsace_lorraine }
		activate_mission = GER_investment_in_alsace_lorraine_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = ALS
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_alsace_lorraine_tt
			}
		}
		clr_country_flag = GER_negotiating_with_alsace_lorraine
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_thuringia }
		activate_mission = GER_investment_in_thuringia_infrastructure
		every_owned_state = {
		   limit = {
				is_core_of = THU
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_thuringia_tt
			}
		}
		clr_country_flag = GER_negotiating_with_thuringia
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_minor_states }
		activate_mission = GER_investment_in_minor_states_infrastructure
		every_owned_state = {
		   limit = {
				OR = {
					AND = {
						NOT = { country_exists = OLD }
						is_core_of = OLD
					} 
					#is_core_of = MEC
					is_core_of = ANH
					is_core_of = WLD
					is_core_of = LIP
					is_core_of = SCM
				}
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_minor_states_tt
			}
		}
		clr_country_flag = GER_negotiating_with_minor_states
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_free_cities }
		activate_mission = GER_investment_in_free_cities_infrastructure
		every_owned_state = {
		   limit = {
			   OR = {
					is_core_of = BRE
					is_core_of = HAM
					is_core_of = LUB
				}
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_free_cities_tt
			}
		}
		clr_country_flag = GER_negotiating_with_free_cities
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_austria }
		activate_mission = GER_investment_in_austria_infrastructure
		every_owned_state = {
			limit = {
				region = 22
				is_core_of = AUS
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_austria_tt
			}
		}
		clr_country_flag = GER_negotiating_with_austria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_luxembourg }
		activate_mission = GER_investment_in_luxembourg_infrastructure
		every_owned_state = {
			limit = {
				is_core_of = LUX
				is_core_of = ROOT
			}
			set_variable = { infrastructure_goal = 1 }
			generic_setup_building_infra_objective = yes
			custom_effect_tooltip = effect_if_completed
			custom_effect_tooltip = {
				localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
				INFLUENCE = "1"
				FEDERAL_STATE = GER_bundesrat_luxembourg_tt
			}
		}
		clr_country_flag = GER_negotiating_with_luxembourg
	}
	clr_country_flag = GER_negotiating_with_federal_state
	#GER_update_bundesrat_gui = yes
}

GER_start_political_concession_with_federal_state = {
	if = {
		limit = { has_country_flag = GER_negotiating_with_prussia }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_claimed_by = PRE 
					is_core_of = ROOT
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_prussia_tt
		}
		clr_country_flag = GER_negotiating_with_prussia
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_bavaria }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = BAY 
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_bavaria_tt
		}
		clr_country_flag = GER_negotiating_with_bavaria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_saxony }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = SAX
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_saxony_tt
		}
		clr_country_flag = GER_negotiating_with_saxony
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_wurttemberg }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = WUR
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_wurttemberg_tt
		}
		clr_country_flag = GER_negotiating_with_wurttemberg
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_baden }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = BAD
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_baden_tt
		}
		clr_country_flag = GER_negotiating_with_baden
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_hesse }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = HES
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_hesse_tt
		}
		clr_country_flag = GER_negotiating_with_hesse
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_mecklenburg }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					OR = {
						is_core_of = MEK
						is_core_of = MEC
					}
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_mecklenburg_tt
		}
		clr_country_flag = GER_negotiating_with_mecklenburg
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_brunswick }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = BRU
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_brunswick_tt
		}
		clr_country_flag = GER_negotiating_with_brunswick
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_alsace_lorraine }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = ALS
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_alsace_lorraine_tt
		}
		clr_country_flag = GER_negotiating_with_alsace_lorraine
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_thuringia }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = THU
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_thuringia_tt
		}
		clr_country_flag = GER_negotiating_with_thuringia
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_minor_states }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					OR = {
						AND = {
							NOT = { country_exists = OLD }
							is_core_of = OLD
						} 
						#is_core_of = MEC
						is_core_of = ANH
						is_core_of = WLD
						is_core_of = LIP
						is_core_of = SCM
					}
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_minor_states_tt
		}
		clr_country_flag = GER_negotiating_with_minor_states
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_free_cities }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					OR = {
						is_core_of = BRE
						is_core_of = HAM
						is_core_of = LUB
					}
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_free_cities_tt
		}
		clr_country_flag = GER_negotiating_with_free_cities
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_austria }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					region = 22
					is_core_of = AUS
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_austria_tt
		}
		clr_country_flag = GER_negotiating_with_austria
	}
	else_if = {
		limit = { has_country_flag = GER_negotiating_with_luxembourg }
		hidden_effect = {
			every_owned_state = {
				limit = { 
					is_core_of = LUX
					is_core_of = ROOT 
				}
				set_state_flag = GER_political_concession_target               
			}
		}
		custom_effect_tooltip = effect_when_gone
		custom_effect_tooltip = {
			localization_key = GER_add_INFLUENCE_to_FEDERAL_STATE_tt
			INFLUENCE = "1"
			FEDERAL_STATE = GER_bundesrat_luxembourg_tt
		}
		clr_country_flag = GER_negotiating_with_luxembourg
	}
	clr_country_flag = GER_negotiating_with_federal_state
	#GER_update_bundesrat_gui = yes
}

GER_remove_all_negotiation_flags = {
	clr_country_flag = GER_negotiating_with_federal_state
	clr_country_flag = GER_negotiating_with_prussia
	clr_country_flag = GER_negotiating_with_bavaria
	clr_country_flag = GER_negotiating_with_saxony
	clr_country_flag = GER_negotiating_with_wurttemberg
	clr_country_flag = GER_negotiating_with_baden
	clr_country_flag = GER_negotiating_with_hesse
	clr_country_flag = GER_negotiating_with_mecklenburg
	clr_country_flag = GER_negotiating_with_brunswick
	clr_country_flag = GER_negotiating_with_alsace_lorraine
	clr_country_flag = GER_negotiating_with_thuringia
	clr_country_flag = GER_negotiating_with_minor_states
	clr_country_flag = GER_negotiating_with_free_cities
	clr_country_flag = GER_negotiating_with_austria
	clr_country_flag = GER_negotiating_with_luxembourg
	#GER_update_bundesrat_gui = yes
}

GER_update_bundesrat_gui = {
	set_variable_to_random = GER.bundesrat_update
}
GER_calculate_mecklenburg_votes = {
	set_variable = { GER_votes_of_mecklenburg = 0 }
	if = {
		limit = { GER_is_mecklenburg_schwerin_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_mecklenburg value = GER_votes_of_mecklenburg_schwerin }
	}
	if = {
		limit = { GER_is_mecklenburg_strelitz_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_mecklenburg value = 1 }
	}  
}

GER_calculate_minor_states_votes = {
	set_variable = { GER_votes_of_minor_states = 0 }
	if = {
		limit = { GER_is_oldenburg_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_minor_states value = 1 }
	}
	if = {
		limit = { GER_is_anhalt_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_minor_states value = 1 }
	}
	if = {
		limit = { GER_is_lippe_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_minor_states value = 1 }
	}
	if = {
		limit = { GER_is_schaumburg_lippe_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_minor_states value = 1 }
	}
	if = {
		limit = { GER_is_waldeck_and_pyrmont_available_in_bundesrat = yes }
		add_to_variable = { var = GER_votes_of_minor_states value = 1 }
	}
}

GER_calculate_bundesrat_votes = {
	set_variable = { GER_total_bundesrat_votes = 0 }
	set_variable = { GER_bundesrat_votes_in_favor = 0 }
	if = {
		limit = {  GER_is_prussia_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_prussia }
		if = {
			limit = { GER_is_prussia_loyal = yes }
			add_to_variable = { var = GER_bundesrat_votes_in_favor value = GER_votes_of_prussia }
			set_country_flag = GER_called_in_prussia
		}
	}
	if = {
		limit = { GER_is_bavaria_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_bavaria }
	}
	if = {
		limit = { GER_is_saxony_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_saxony }
	}
	if = {
		limit = { GER_is_wurttemberg_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_wurttemberg }
	}
	if = {
		limit = { GER_is_baden_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_baden }
	}
	if = {
		limit = {  GER_is_hesse_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_hesse }
	}
	if = {
		limit = { GER_is_mecklenburg_available_in_bundesrat = yes }
		GER_calculate_mecklenburg_votes = yes
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_mecklenburg }
	}
	if = {
		limit = { GER_is_brunswick_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_brunswick }
	}
	if = {
		limit = { GER_is_alsace_lorraine_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_alsace_lorraine }
	}
	if = {
		limit = { GER_is_thuringia_available_in_bundesrat = yes}
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_thuringia }
	}
	if = {
		limit = { GER_is_any_free_city_available_in_bundesrat = yes  }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_free_cities }
	}
	if = {
		limit = {  GER_is_any_minor_state_available_in_bundesrat = yes }
		GER_calculate_minor_states_votes = yes
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_minor_states }
	}
	if = {
		limit = {  GER_is_luxembourg_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_luxembourg }
	}
	if = {
		limit = { GER_is_austria_available_in_bundesrat = yes }
		add_to_variable = { var = GER_total_bundesrat_votes value = GER_votes_of_austria }
	}
	#GER_update_bundesrat_gui = yes
}

GER_improve_firepower_doctrine = {
	if = {
		limit = {
			has_idea = FRA_firepower
		}
		swap_ideas = {
			add_idea = FRA_firepower2bis
			remove_idea = FRA_firepower
		}
		else_if = {
			limit = {
				NOT = { has_idea = FRA_firepower2bis  }
			}        
			add_ideas = FRA_firepower
		}
	}
}

GER_release_MAF = {
	hidden_effect = {
		every_owned_state = {
			limit = {
				GER_is_MAF_state = yes
			}
			if = {
				limit = {
					GER_is_MAF_core = yes
				}
				add_core_of = MAF
			}
			transfer_state_to = MAF
			remove_claim_by = ROOT
		}
		MAF = { set_country_flag = colony }
		set_autonomy = {
			target = MAF
			autonomy_state = autonomy_colony
		}
		MAF = {
			add_named_threat = {
				name = GER_decision_mittelafrika
				threat = 5
			}
			inherit_technology = ROOT
			set_popularities = {
				fascism = 10
				communism = 2
				democratic = 24
				neutrality = 64
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			add_ideas = GER_idea_colonial_exploitation
			add_ideas = GER_dysfunctional_government
			add_ideas = MAF_colonial_budget_idea
			if = {
				limit = {
					ENG = {
						has_country_flag = great_war_loser
					}
				}
				add_ideas = MAF_British_Settlers
			}
			if = {
				limit = {
					BEL = {
						has_country_flag = great_war_loser
					}
				}
				add_ideas = MAF_belgian_investment
			}
			division_template = {
				name = "Mittelafrikanische Division"					# Infantry
				division_names_group = GER_MONINF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
			}
			division_template = {
				name = "Afrikanische Stammesmiliz"
				division_names_group = GER_MONINF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
				}
				priority = 0
			}
			division_template = {
				name = "Kavallerie Brigade"					# Cavalry
				division_names_group = GER_Cav_01
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
				}
				support = {
					recon = {
						x = 0
						y = 0
					}
				}
			}
			division_template = {
				name = "Kamelie Brigade"					# Camelry
				division_names_group = GER_Cav_01
				regiments = {
					camelry = { x = 0 y = 0 }
					camelry = { x = 0 y = 1 }
					camelry = { x = 1 y = 0 }
					camelry = { x = 1 y = 1 }
				}
				support = {
					recon = {
						x = 0
						y = 0
					}
				}
			}
			random_owned_state = {
				limit = {
					is_on_continent = africa
				}
				create_unit = {
					division = "name = \"5. Mittelafrikanische Division\" division_template = \"Mittelafrikanische Division\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"5. Mittelafrikanische Division\" division_template = \"Mittelafrikanische Division\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"4. Mittelafrikanische Division\" division_template = \"Mittelafrikanische Division\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"3. Mittelafrikanische Division\" division_template = \"Mittelafrikanische Division\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"2. Mittelafrikanische Division\" division_template = \"Mittelafrikanische Division\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"1. Mittelafrikanische Division\" division_template = \"Mittelafrikanische Division\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"Katanga Miliz\" division_template = \"Afrikanische Stammesmiliz\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"Ugandische Stämme\" division_template = \"Afrikanische Stammesmiliz\" start_experience_factor = 0.3"
					owner = MAF
				}
				create_unit = {
					division = "name = \"Askari Schützen Division\" division_template = \"Afrikanische Stammesmiliz\" start_experience_factor = 0.3"
					owner = MAF
				}
			}
		}
		if = {
			limit = {
				owns_state = 268 # Djibouti
				has_military_access_to = SOM
			}
			SOM = {
				give_military_access = MAF
			}
		}
	}
}

GER_release_OST = {
	hidden_effect = {

		add_named_threat = {
			name = GER_german_east_asia
			threat = 1
		}

		# Only transfer OST "cores" at first
		every_owned_state = {
			limit = {
				GER_is_OST_core = yes
			}
			remove_claim_by = ROOT
			transfer_state_to = OST
			add_core_of = OST
		}
		# Set capital to Singapore, if possible
		OST = {
			if = {
				limit = {
					owns_state = 932
					932 = {
						is_capital = no
					}
				}
				set_capital = {
					state = 932
				}
			}
		}
		if = {
			limit = {
				has_subject = IND
			}
			IND = {
				if = {
					limit = {
						has_character = OST_wilhelm_filchner
					}
					OST_wilhelm_filchner = { set_nationality = OST }
				}
				OST = {
					annex_country = {
						target = IND
						transfer_troops = yes
					}
					OST_wilhelm_filchner = {
						promote_character = colonial_government
						promote_character = conservatism
					}
					if = {
						limit = {
							has_character = OST_maximilian_von_spee
						}
						OST_maximilian_von_spee = {
							promote_character = colonial_government
							promote_character = stratocracy
						}
					}
				}
			}
		}
		OST = { set_country_flag = colony }
		set_autonomy = {
			target = OST
			autonomy_state = autonomy_colony
		}
		OST = {
			inherit_technology = ROOT
			add_named_threat = {
				name = GER_german_east_asia
				threat = 5
			}
			set_popularities = {
				democratic = 15
				fascism = 0
				communism = 0
				neutrality = 85
			}
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			add_ideas = GER_idea_colonial_exploitation
			add_ideas = GER_dysfunctional_government
			add_ideas = OST_colonial_question
			add_ideas = OST_Protecting_GER_interest

			division_template = {
				name = "Kavallerie Division"
				division_names_group = GER_Cav_01
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
					cavalry = { x = 0 y = 3 }
					cavalry = { x = 1 y = 0 }
					cavalry = { x = 1 y = 1 }
					cavalry = { x = 1 y = 2 }
					cavalry = { x = 1 y = 3 }
					cavalry = { x = 2 y = 0 }
					cavalry = { x = 2 y = 1 }
				}
				support = {
					military_police = { x = 0 y = 0 }
				}
			}
			division_template = {
				name = "Ostasiatische Division"
				division_names_group = GER_MONINF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
				support = {
					field_gun = { x = 0 y = 0 }
				}
			}
			division_template = {
				name = "Auslands-Festungskommando"
				division_names_group = GER_GAR_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
				}
				priority = 0
			}
			division_template = {
				name = "Marine-Division"
				division_names_group = GER_MONINF_01
				regiments = {
					marine = { x = 0 y = 0 }
					marine = { x = 0 y = 1 }
					marine = { x = 0 y = 2 }
					marine = { x = 1 y = 0 }
					marine = { x = 1 y = 1 }
					marine = { x = 1 y = 2 }
				}
				support = {
					engineer = { x = 0 y = 0 }
				}
				priority = 2
			}
			division_template = {
				name = "Bergschutztruppe"
				division_names_group = GER_MONINF_01
				regiments = {
					mountaineers = { x = 0 y = 0 }
					mountaineers = { x = 0 y = 1 }
					mountaineers = { x = 0 y = 2 }
					mountaineers = { x = 1 y = 0 }
					mountaineers = { x = 1 y = 1 }
					mountaineers = { x = 1 y = 2 }
				}
				priority = 2
			}

			capital_scope = {
				create_unit = {
					division = "division_template = \"Marine-Division\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
					owner = PREV
					count = 1
				}
				create_unit = {
					division = "division_template = \"Ostasiatische Division\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
					owner = PREV
					count = 3
				}
				create_unit = {
					division = "division_template = \"Auslands-Festungskommando\" start_experience_factor = 0.2 start_equipment_factor = 0.5"
					owner = PREV
					count = 5
				}
			}
		}
	}
}

GER_abandon_structured_doctrines = {
	if = {
		limit = {
			has_idea = GER_structured_doctrines
		}
		swap_ideas = {
			remove_idea = GER_structured_doctrines
			add_idea = GER_structured_doctrines_abandonned
		}
	}
	else_if = {
		limit = {
			has_idea = GER_structured_doctrines2
		}
		swap_ideas = {
			remove_idea = GER_structured_doctrines2
			add_idea = GER_structured_doctrines_abandonned
		}
	}
	else_if = {
		limit = {
			has_idea = GER_structured_doctrines3
		}
		swap_ideas = {
			remove_idea = GER_structured_doctrines3
			add_idea = GER_structured_doctrines_abandonned
		}
	}
	else_if = {
		limit = {
			has_idea = GER_structured_doctrines4
		}
		swap_ideas = {
			remove_idea = GER_structured_doctrines4
			add_idea = GER_structured_doctrines_abandonned
		}
	}
	else = {
		add_ideas = GER_structured_doctrines_abandonned
	}
}

GER_health_insurance_act_effect = {
	GER_upgrade_idea_rising_unions = yes
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_political_power_factor
		value = -0.15
		tooltip = political_power_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = 0.05
		tooltip = stability_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_monthly_population
		value = 0.1
		tooltip = monthly_population_tt
	}
	add_to_variable = {
		var = GER_ww1_conscription_factor
		value = 0.01
		tooltip = conscription_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_consumer_goods_factor
		value = 0.025
		tooltip = consumer_goods_factor_tt
	}
}

GER_employment_agency_act_effect = {
	GER_upgrade_idea_rising_unions = yes
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_political_power_factor
		value = -0.1
		tooltip = political_power_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = 0.05
		tooltip = stability_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_production_speed_buildings_factor
		value = 0.15
		tooltip = production_speed_buildings_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_industrial_capacity_factory
		value = -0.05
		tooltip = industrial_capacity_factory_tt
	}
	add_to_variable = {
		var = GER_ww1_consumer_goods_factor
		value = -0.075
		tooltip = consumer_goods_factor_tt
	}
}

GER_homework_act_effect = {
	GER_upgrade_idea_rising_unions = yes
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = 0.025
		tooltip = stability_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_production_factory_max_efficiency_factor
		value = 0.05
		tooltip = production_factory_max_efficiency_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_production_speed_industrial_complex_factor
		value = 0.1
		tooltip = production_speed_industrial_complex_factor_tt
	}
}

GER_national_pension_effect = {
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = 0.1
		tooltip = stability_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_consumer_goods_factor
		value = 0.05
		tooltip = consumer_goods_factor_tt
	}
}

GER_german_pension_effect = {
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_political_power_factor
		value = 0.05
		tooltip = political_power_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_consumer_goods_factor
		value = -0.05
		tooltip = consumer_goods_factor_tt
	}
}

GER_nationality_inclusive_law = {
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_political_power_factor
		value = -0.05
		tooltip = political_power_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_monthly_population
		value = 0.1
		tooltip = monthly_population_tt
	}
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = 0.075
		tooltip = stability_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_war_support_factor
		value = 0.05
		tooltip = war_support_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_compliance_growth
		value = 0.1
		tooltip = compliance_growth_tt
	}
	add_to_variable = {
		var = GER_ww1_resistance_activity
		value = -0.1
		tooltip = resistance_activity_tt
	}
	add_to_variable = {
		var = GER_ww1_democratic_drift
		value = 0.05
		tooltip = democratic_drift_tt
	}
}

GER_nationality_discriminatory_law = {
	custom_effect_tooltip = GER_modify_bismarksche_reichsverassung
	add_to_variable = {
		var = GER_ww1_political_power_factor
		value = 0.05
		tooltip = political_power_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_stability_factor
		value = -0.1
		tooltip = stability_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_war_support_factor
		value = 0.05
		tooltip = war_support_factor_tt
	}
	add_to_variable = {
		var = GER_ww1_compliance_growth
		value = -0.15
		tooltip = compliance_growth_tt
	}
	add_to_variable = {
		var = GER_ww1_resistance_activity
		value = 0.15
		tooltip = resistance_activity_tt
	}
	add_to_variable = {
		var = GER_ww1_neutrality_drift
		value = 0.04
		tooltip = neutrality_drift_tt
	}
	add_to_variable = {
		var = GER_ww1_fascism_drift
		value = 0.01
		tooltip = fascism_drift_tt
	}
}

GER_schlieffen_moltke_plan_effect = {
	hidden_effect = {
		set_global_flag = GER_schlieffen_plan_enacted
		ENG = {
			if = {
				limit = { has_idea = ENG_idea_not_ready_yet }
				remove_ideas = ENG_idea_not_ready_yet
			}
		}
	}

	# Ultimatum to Belgium
	BEL = {
		country_event = {
			id = ww1_germanrework.200
			days = 1
		}
	}

	if = {
		limit = {
			LUX = {
				exists = yes
				NOT = {
					is_subject_of = ROOT
					has_war_with = ROOT
					is_in_faction_with = ROOT
					has_war_with = FRA
				}	
			}
		}
		declare_war_on = {
			target = LUX
			type = annex_everything
		}
	}
	hidden_effect = {
		add_state_claim = 8 # Luxembourg
	}
	
	# Give the right spirit
	if = {
		limit = {
			has_country_flag = ostaufmarsch_abandoned
		}
		add_timed_idea = {
			idea = GER_idea_schlieffen_moltke_plan_historical
			days = 60
		}
	}
	else_if = {
		limit = {
			has_completed_focus = GER_more_aggressive_schlieffen_plan
		}
		add_timed_idea = {
			idea = GER_idea_schlieffen_moltke_plan2
			days = 60
		}
		else = {
			add_timed_idea = {
				idea = GER_idea_schlieffen_moltke_plan
				days = 60
			}
		}
	}
	hidden_effect = {	
		add_named_threat = {
			threat = 10
			name = GER_idea_schlieffen_moltke_plan
		}
		every_state = {
			limit = {
				OR = {
					is_owned_by = BEL
					is_owned_by = FRA
					is_owned_by = LUX
				}
				OR = {
					state = 907
					state = 8
					state = 906
					state = 34
					state = 6
					state = 863
					state = 29
				}
			}
			add_dynamic_modifier = {
				modifier = GER_movement_war
				days = 120
			}
		}
	}
}

GER_schlieffen_plan_effect = {
	hidden_effect = {
		set_global_flag = GER_schlieffen_plan_enacted
		ENG = {
			if = {
				limit = { has_idea = ENG_idea_not_ready_yet }
				remove_ideas = ENG_idea_not_ready_yet
			}
		}
	}

	# Ultimatum to Belgium
	BEL = {
		country_event = {
			id = ww1_germanrework.200
			days = 1
		}
	}
	
	HOL = {
		country_event = {
			id = ww1_germanrework.201
			days = 1
		}
	}
	
	if = {
		limit = {
			LUX = {
				exists = yes
				NOT = {
					is_subject_of = ROOT
					has_war_with = ROOT
					is_in_faction_with = ROOT
					has_war_with = FRA
				}
			}
		}
		declare_war_on = {
			target = LUX
			type = annex_everything
		}
	}
	hidden_effect = {
		add_state_claim = 8 # Luxembourg
	}

	if = {
		limit = {
			has_completed_focus = GER_more_aggressive_schlieffen_plan
		}
		add_timed_idea = {
			idea = GER_idea_schlieffen_plan2
			days = 60
		}
	}
	else = {
		add_timed_idea = {
			idea = GER_idea_schlieffen_plan
			days = 60
		}
	}
	hidden_effect = {
		add_named_threat = {
			threat = 10
			name = GER_idea_schlieffen_plan
		}
	}
}

GER_belgium_passage = {
	set_global_flag = BEL_granted_german_passage

	BEL = {
		set_country_flag = BEL_granted_german_passage
		give_military_access = FRA
		give_military_access = GER
		give_military_access = ENG
		news_event = ww1_belgium.91

		# Transfer of Belgian territories
		every_owned_state = {
			limit = {
				OR = {
					state = 34 # Wallonia
					state = 907 # Ardennes
					state = 906 # Arelerland
				}
			}
			transfer_state_to = GER
		}

		# Belgian neutrality
		if = {
			limit = {
				is_in_faction = yes
				NOT = {
					is_in_faction_with = GER
				}
			}
			leave_faction = yes
		}
		add_ideas = neutrality_idea
	}

	GER = {
		give_guarantee = BEL
	}

	custom_effect_tooltip = BEL_territories_will_be_back_after_great_war
}

GER_netherlands_passage = {
	set_global_flag = HOL_granted_german_passage

	HOL = {
		give_military_access = GER

		if = {
			limit = {
				is_in_faction = yes
				NOT = {
					is_in_faction_with = GER
				}
			}
			leave_faction = yes
		}
		add_ideas = neutrality_idea
	}

	GER = {
		give_guarantee = HOL
	}
}		
GER_joint_military_exercises_effect = {
	if = {
		limit = {
			has_dlc = "Gotterdammerung"
			NOT = {
				is_special_project_completed = sp:sp_land_super_heavy_howitzer
			}
		}
		sp:sp_land_super_heavy_howitzer = {
			add_project_progress_ratio = 0.5
		}		
	}
	add_breakthrough_points = {
		specialization = specialization_land
		value = 1
	}
	add_tech_bonus = {
		name = GER_propose_joint_military_exercises
		bonus = 1
		category = cat_howitzer
		uses = 1
	}
	add_doctrine_cost_reduction = {
		name = GER_propose_joint_military_exercises
		category = land_doctrine
		cost_reduction = 0.25
	}
}

GER_create_koenig_class = {
	create_equipment_variant = {
		name = "König Class"
		type = ship_hull_heavy_2
		name_group = GER_DREADNOUGHTS_HISTORICAL
		parent_version = 0
		modules = {
			fixed_ship_battery_slot = ship_heavy_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_1
			fixed_ship_engine_slot = heavy_ship_engine_2
			fixed_ship_secondaries_slot = ship_secondaries_2
			fixed_ship_armor_slot = ship_armor_bb_2
			front_1_custom_slot = empty
			mid_1_custom_slot = ship_secondaries_1
			mid_2_custom_slot = ship_torpedo_2
			rear_1_custom_slot = ship_heavy_battery_2
		}
		obsolete = yes
	}
}
GER_create_derfflinger_class = {
	create_equipment_variant = {
		name = "Derfflinger Class"
		type = ship_hull_heavy_3
		name_group = GER_BATTLECRUISERS_HISTORICAL
		parent_version = 0
		modules = {
			fixed_ship_battery_slot = ship_heavy_battery_2
			fixed_ship_anti_air_slot = ship_anti_air_1
			fixed_ship_fire_control_system_slot = ship_fire_control_system_0
			fixed_ship_engine_slot = heavy_ship_engine_2
			fixed_ship_secondaries_slot = ship_secondaries_2
			fixed_ship_armor_slot = ship_armor_bc_2
			front_1_custom_slot = empty
			mid_1_custom_slot = empty
			mid_2_custom_slot = ship_secondaries_1
			mid_3_custom_slot = ship_torpedo_2
			rear_1_custom_slot = ship_heavy_battery_2
		}
	}
}

GER_create_v1_class = {
	create_equipment_variant = {
		name = "V1 Class"
		type = ship_hull_light_2
		name_group = GER_DESTROYERS_HISTORICAL
		parent_version = 0
		modules = {
			fixed_ship_battery_slot = ship_light_battery_1
			fixed_ship_torpedo_slot = ship_torpedo_2
			fixed_ship_engine_slot = light_ship_engine_2
			mid_1_custom_slot = ship_mine_layer_1
		}
	}	
}

setup_BLR_WHR = {
	set_cosmetic_tag = BLR_WHR
	set_politics = {
		ruling_party = neutrality
		long_name = BLR_hohenzollern_party 
		name = BLR_hohenzollern_party
		elections_allowed = no
	}
	hidden_effect = {
		set_popularities = {
			democratic = 23
			fascism = 10
			communism = 5
			neutrality = 62
		}
	}				
	if = {
		limit = {
			date < 1929.4.20
		}	
		GER = {
			GER_albert_wilhelm_heinrich = {
				set_character_name = BLR_genrikh
				set_nationality = prev.prev
				if = {
					limit = { has_ideology = semi_constitutional_monarchy }
					promote_character = semi_constitutional_monarchy
				}
				else = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = semi_constitutional_monarchy
							traits = { german_agent }
						}
					}
				}
			}
		}
	}
	else = {
		BLR = {
			BLR_uladzimir = {
				set_nationality = prev.prev
				if = {
					limit = { has_ideology = semi_constitutional_monarchy }
					promote_character = semi_constitutional_monarchy
				}
				else = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = semi_constitutional_monarchy	
							traits = { german_agent }
						}
					}
				}
			}
		}					
		GER = {
			GER_albert_wilhelm_heinrich = {
				retire = yes
			}
		}
	}	
}

GER_dissolve_parliament = {
	if = {
		limit = {
			has_active_mission = GER_election_cycle_empire
		}
		remove_mission = GER_election_cycle_empire
	}
	if = {
		limit = {
			has_active_mission = GER_election_cycle_republic
		}
		remove_mission = GER_election_cycle_republic
	}

	if = {
		limit = {
			has_active_mission = GER_election_initial
		}
		remove_mission = GER_election_initial
	}

	activate_mission = GER_snap_election
}

GER_hold_election = {
	country_event = { id = ww1_german_reichstag.1 }
    hidden_effect = {
        GER_reload_parliament_gui = yes
        GER_modify_parliament_seat = yes
    }
}

GER_start_next_election_cycle = {

    if = {
        limit = { has_active_mission = GER_election_cycle_empire }
        remove_mission = GER_election_cycle_empire
    }
    if = {
        limit = { has_active_mission = GER_election_cycle_republic }
        remove_mission = GER_election_cycle_republic
    }

    if = {
        limit = { 
            has_global_flag = GER_republic_proclaimed 
        }
        activate_mission = GER_election_cycle_republic 
    }
    else = {
        activate_mission = GER_election_cycle_empire 
    }
}