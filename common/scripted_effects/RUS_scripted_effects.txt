constituent_assembly_effect = {
	if = {
		limit = {
			check_variable = {
				var = vote_to_puppet_former_territories
				value = vote_to_let_former_territories
				compare = greater_than
			}
			check_variable = {
				var = vote_to_puppet_former_territories
				value = has_support_to_annex_former_territories
				compare = greater_than
			}
		}
		every_country = {
			limit = {
				OR = {
					original_tag = UKR
					original_tag = LIT
					original_tag = GEO
					original_tag = ARM
					original_tag = AZR
					original_tag = TRK
					original_tag = LAT
					original_tag = EST
					original_tag = MOU
					original_tag = CRI
					original_tag = TRK
					original_tag = KAZ
					original_tag = RUS
				}
				is_subject = no
				NOT = {				
					has_war_with = ROOT
					has_country_leader_ideology = vanguardism
					has_country_leader_ideology = revolutionary_socialism
				}
			}
			country_event = {
				id = ww1_rcw_unification.8
				days = 2
				random_days = 7
			}
		}
		if = {
			limit = {
				TRK = {
					exists = no
				}
				any_owned_state = {
					is_core_of = TRK 
				}
			}
			every_owned_state = {
				limit = {
					is_core_of = TRK 
				}
				transfer_state_to = TRK 
			}
			set_autonomy = {
				target = TRK 
				autonomy_state = autonomy_dominion
			}
			hidden_effect = {
				TRK = {
					set_politics = {
						ruling_party = democratic
						last_election = "1909.11.26" 
					}	
					set_popularities = {
						fascism = 10
						communism = 21
						democratic = 30
						neutrality = 39
					}					
				}
			}
		}
		if = {
			limit = {
				KAZ = {
					exists = no
				}
				any_owned_state = {
					is_core_of = KAZ 
				}
			}
			every_owned_state = {
				limit = {
					is_core_of = KAZ 
				}
				transfer_state_to = KAZ 
			}
			set_autonomy = {
				target = KAZ
				autonomy_state = autonomy_dominion
			}
			hidden_effect = {			
				KAZ = {
					set_cosmetic_tag = KAZ_alash
					set_politics = {
						ruling_party = democratic
						last_election = "1909.12.13" 
					}	
					set_popularities = {
						fascism = 2
						communism = 29
						democratic = 33
						neutrality = 36
					}				
				}
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				var = votes_for_republic
				value = 0
				compare = greater_than_or_equals
			}
			check_variable = {
				var = votes_for_republic
				value = votes_for_dictatorship
				compare = greater_than_or_equals
			}
			check_variable = {
				var = votes_for_republic
				value = votes_for_tsardom
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = {
					has_government = democratic
					tag = SIB
					tag = NWA
					tag = TRC
					tag = RSO
				}
			}
			every_possible_country = {
				limit = {
					has_character = RUS_pavel_milyukov
				}
				RUS_pavel_milyukov = {
					set_nationality = PREV.PREV
					promote_character = yes
				}
			}
			set_party_name = {
				ideology = democratic
				long_name = RUS_democratic_party_CDP_long
				name = RUS_democratic_party_CDP
			}
		}
		if = {
			limit = {
				tag = SIB
				NOT = {
					has_government = democratic
					has_government = communism
				}
			}
			SIB_pyotr_vologodsky = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = conservatism				
						traits = { connected_citizen }
					}
				}
			}
			set_cosmetic_tag = RUS_state_neutrality
		}	
		if = {
			limit = {
				OR = {
					has_country_leader = {
						character = RUS_nikolai_avksentiev
					}
					has_country_leader = {
						character = RUS_pavel_shatilov
					}
					has_country_leader = {
						character = RUS_viktor_chernov
					}
					has_country_leader = {
						character = RUS_vladimir_volsky
					}
					has_country_leader = {
						character = RUS_florian_fyodorovich
					}
					has_country_leader = {
						character = RUS_fyodor_makhin
					}										
				}			
			}
			set_cosmetic_tag = RUS_federation
			else_if = {
				limit = {		
					NOT = {
						tag = SIB
					}
				}
				set_cosmetic_tag = RUS_republic_democratic
			}
		}
		if =  {
			limit = {
				NOT = {
					has_government = democratic
					has_government = communism
				}
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.40
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
		}
	}
	if = {
		limit = {
			check_variable = {
				var = votes_for_tsardom
				value = votes_for_republic
				compare = greater_than
			}
			check_variable = {
				var = votes_for_tsardom
				value = votes_for_dictatorship
				compare = greater_than
			}
			check_variable = {
				var = votes_for_tsardom
				value = 0
				compare = greater_than
			}
		}
		set_cosmetic_tag = RUS
		if = {
			limit = {
				NOT = {
					has_global_flag = nicholas_ii_is_dead
				}
			}
			every_possible_country = {
				limit = {
					has_character = RUS_nikolai_ii
				}
				RUS_nikolai_ii = {
					set_nationality = PREV.PREV
					set_portraits = {
						civilian = {
							large = "gfx/leaders/RUS/RUS_nicholas_romanov_dictator.png"
						}
					}
					hidden_effect = {
						remove_country_leader_role = {
							ideology = semi_constitutional_monarchy
						}
					}
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							desc = RUS_nicholas_II_desc
							ideology = semi_constitutional_monarchy				
							traits = { autocratic_imperialist }
						}
					}
				}	
			}
			else = {
				every_possible_country = {
					limit = {
						has_character = RUS_nikolai_nikolaevich_romanov
					}
					RUS_nikolai_nikolaevich_romanov = {
						set_nationality = PREV.PREV
						set_character_name = RUS_nikolai_iii
						add_country_leader_role ={
							promote_leader = yes
							country_leader = {
								desc = RUS_nicholas_II_desc
								ideology=semi_constitutional_monarchy
								traits = { autocratic_imperialist }
							}
						}
					}
				}
			}		
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.40
		}
		set_politics = {
			ruling_party = neutrality
			long_name = RUS_neutrality_party
			name = RUS_neutrality_party
			elections_allowed = yes
		}
	}
	if = {
		limit = {
			check_variable = {
				var = votes_for_dictatorship
				value = votes_for_republic
				compare = greater_than
			}
			check_variable = {
				var = votes_for_dictatorship
				value = votes_for_tsardom
				compare = greater_than
			}
			check_variable = {
				var = votes_for_dictatorship
				value = 0
				compare = greater_than
			}
		}
		set_cosmetic_tag = RUS_state
	}
	set_country_flag = russian_civil_war_winner
	set_global_flag = russian_civil_war_ends
	news_event = rusrevolt.19
}
create_SOV = {
	create_dynamic_country = {
		original_tag = RUS
		set_country_flag = RUS_exile_tag
		set_cosmetic_tag = RUS_exile_tag
		reserve_dynamic_country = yes
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}
		every_state = {
			limit = {
				is_claimed_by = PREV
			}
			remove_claim_by = PREV
		}
		every_state = {
			limit = {
				is_core_of = PREV
			}
			remove_core_of = PREV
		}
	}
	RUS = {
		every_unit_leader = {
			limit = {
				has_trait = trait_royal
			}		
			remove_unit_leader_role = yes
		}
		RUS_pyotr_wrangel = {
			set_portraits = {
				army = {
					large="gfx/leaders/RUS/RUS_pyotr_wrangel_civil_war.png"
				}
			}
		}
		RUS_grigory_semyonov = {
			set_portraits = {
				army = {
					large="gfx/leaders/RUS/RUS_grigory_semenov_civil_war.png"
				}
			}
		}
		SOV_semyon_budyonny = {
			set_portraits = {
				army = {
					large="gfx/leaders/SOV/SOV_semyon_budyonny.png"
					small="gfx/interface/ideas/SOV/idea_budyonny.png"
				}
			}
		}
		every_character = {
			limit = {
				NOT = {
					is_character = RUS_viktor_chernov
					is_character = RUS_boris_savinkov
					is_character = RUS_alexei_brusilov
					is_character = RUS_evgeniy_radkevich
					is_character = RUS_mikhail_bonchbruevich
					is_character = RUS_yuri_danilov
					is_character = RUS_aleksandr_verkhovsky
					is_character = SOV_semyon_budyonny
					
					#is_scientist = yes
					is_character = RUS_igor_sikorsky
					is_character = RUS_dmitry_grigorovich
					is_character = RUS_yakov_gakkel
				}
			}
			set_nationality = RXL
		}
	}
	SOV = {
		clr_country_flag = RUS_soviet_tag
		drop_cosmetic_tag = yes
		every_character = {
			set_nationality = RUS
		}
		reserve_dynamic_country = no	
	}	
	RUS = {
		set_country_flag = RUS_soviet_tag
		set_cosmetic_tag = SOV
		load_focus_tree = soviet_focus
		set_politics = {
			ruling_party = communism
			long_name = SOV_communism_party_long
			name = SOV_communism_party
			elections_allowed = no
		}
		set_party_name = {
			ideology = neutrality
			long_name =SOV_neutrality_party_long
			name = SOV_neutrality_party
		}
		set_party_name = {
			ideology = democratic
			long_name = SOV_democratic_party_long
			name = SOV_democratic_party
		}
		set_party_name = {
			ideology = fascism
			long_name = SOV_fascism_party_long
			name = SOV_fascism_party
		}
		RUS_viktor_chernov = {
			remove_any_country_role_from_character = yes
			remove_country_leader_role = {
				ideology = agrarian_socialism
			}
			add_country_leader_role ={
				promote_leader = yes
				country_leader = {				
					ideology=social_democracy
				}
			}
		}
		RUS_boris_savinkov = {
			remove_any_country_role_from_character = yes
			remove_country_leader_role = {
				ideology = agrarian_socialism
			}
			add_country_leader_role ={
				promote_leader = yes
				country_leader = {				
					ideology=gen_nazism
					traits={ rider_named_death }
				}
			}
		}
		promote_character = SOV_leon_trotsky
		promote_character = SOV_yakov_sverdlov
		promote_character = SOV_vladimir_lenin
		leave_faction = yes
		set_political_power = 0
		set_stability = 0.3
		activate_mission = RUS_kerensky_krasnov_uprising
		add_ideas = {
			disarmed_nation
			limited_exports
			SOV_idea_great_revolution
			SOV_idea_orthodox_church
			SOV_idea_unrecognized_government
			SOV_idea_very_low_peasant_support
			SOV_idea_revolutionary_commanders
			SOV_idea_red_guard
			RUS_demobilizing_army
			SOV_industry_in_chaos_1 
		}
		country_lock_all_division_template = yes
		if = {
			limit = {
				has_idea = RUS_idea_agrarian_empire	
			}
			remove_ideas = RUS_idea_agrarian_empire
			add_ideas =	SOV_idea_agrarian_state	
		}
		remove_ideas =  {
			RUS_threat_of_revolution
			RUS_threat_of_revolution2
			RUS_threat_of_revolution3
			RUS_idea_orthodox_church
			RUS_idea_strike_movement
			RUS_idea_dual_power
			RUS_idea_volunteer_army
			RUS_idea_tsushima_humiliation		
		}
		if = {
			limit = {
				GER = {
					has_completed_focus = GER_strike_from_the_shadows
				}
				has_global_flag = strike_from_the_shadows
			}
			RUS = {
				add_timed_idea = {
					idea = GER_idea_abwehr_support
					days = 365
				}
				add_country_leader_trait = german_agent
				set_global_flag = lenin_german_agent
			}
			GER = {
				add_timed_idea = {
					idea = GER_idea_abwehr_supports_revolution
					days = 365
				}
			}
		}
		every_other_country = {
			limit = {
				is_major = yes
				is_subject = no
				any_other_country = {
					is_major = yes
					is_subject = no
					has_war_with = RUS
					has_war_with = PREV
				}
				NOT = {
					has_government = communism
					has_war_with = RUS
				}
			}
			send_embargo = RUS
		}
		RUS_mikhail_bonchbruevich = {
			remove_unit_leader_trait = hidden_sympathies
		}	
		set_country_flag = petrograd_uprising
	}	
}
create_FIN = {
	if = {
		limit = {
			OR = {
				has_subject = FIN
				NOT = {
					country_exists = FIN
				}
			}
		}
		FIN = {
			clr_country_flag = monarchist_puppet
			set_cosmetic_tag = FIN_senate
			retire_character = FIN_franz_albert_seyn
			retire_character = RUS_mikhail_stakhovich
			retire_character = RUS_nikolai_nekrasov					
			load_focus_tree  = generic_focus
			FIN_emil_nestor_setala = {
				promote_character = {
					ideology = authoritarian_democracy
				}
				promote_character = {
					ideology = conservatism
				}
			}
			country_event = {
				id = ww1_finland.11
				days = 20
			}
			every_possible_country = {
				limit = {
					has_character = FIN_carl_gustaf_mannerheim
				}
				FIN_carl_gustaf_mannerheim = {
					set_nationality = FIN
					promote_leader = yes
					remove_unit_leader_trait = trait_royalist
					set_character_name = FIN_carl_gustaf_emil_mannerheim
				}
			}
			set_party_name = {
				ideology = democratic
				name = FIN_democratic_party
				long_name = FIN_democratic_party_long
			}
			set_popularities = {
				fascism = 1
				communism = 25
				democratic = 39
				neutrality = 35
			}
			every_state = {
				limit = {
					is_core_of = FIN
				}
				remove_russian_cores = yes
				remove_russian_claims = yes
			}					
		}
		if = {
			limit = {
				NOT = {
					country_exists = FIN
				}				
			}
			every_owned_state = {
				limit = {
					is_core_of = FIN
				}
				every_country = {
					limit = {
						has_war_with = ROOT
						controls_state = PREV
					}
					FIN = { give_military_access = PREV }
				}
				transfer_state_to = FIN
				# Sweden
				every_country = {
					limit = {
						has_war_with = ROOT
						PREV = { is_claimed_by = PREV }
					}
					declare_war_on = {
						target = FIN
						type = take_claimed_state
					}
				}
			}		
		}
		FIN = {
			load_oob = "FIN_1918"
			FIN_set_finnish_state_names = yes
		}
	}
	if = {
		limit = {
			FIN = { has_war_together_with = RUS }
		}
		every_country = {
			limit = {
				has_war_with = RUS
				has_war_with = FIN
			}
			white_peace = FIN
		}
	}
}
create_DON = {
	if = {
		limit = {
			OR = {
				has_subject = DON
				NOT = {
					country_exists = DON
				}
			}			
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 218
					state = 245
					state = 238
					state = 265
				}
			}
			add_core_of = DON
			remove_core_of = SOV
			every_country = {
				limit = {
					has_war_with = ROOT
					controls_state = PREV
				}
				DON = { give_military_access = PREV }
			}
			transfer_state_to = DON
		}
		DON = {
			add_ideas = {
				standing_alone
				disarmed_nation
			}	
			load_focus_tree = white_guard_focus
			country_lock_all_division_template = yes
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
			load_oob = "DON_1918"
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2500
				producer = RUS
			}
		}
		every_possible_country = {
			limit = {
				has_character = RUS_pyotr_krasnov
			}
			RUS_pyotr_krasnov = {
				set_nationality = DON	
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=stratocracy
						traits = {
							cossack_ataman
						}
					}
				}
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=personalistic_dictatorship
						traits = {
							cossack_ataman
						}
					}
				}
			}
		}
		every_possible_country = {
			limit = {
				has_character = RUS_alexei_kaledin
			}
			RUS_alexei_kaledin = {
				set_nationality = DON
				promote_leader = yes
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=stratocracy
						traits = {
							cossack_ataman
						}	
					}
				}
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=authoritarian_democracy
						traits = {
							cossack_ataman
						}	
					}
				}
			}
		}
	}	
}
create_UKR = {
	if = {
		limit = {
			UKR = {
				exists = no
			}
			any_owned_state = {
				is_core_of = UKR
			}
		}
		every_owned_state = {
			limit = {
				is_core_of = UKR
				NOT = {
					state = 766				
				}
			}
			if = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
				}
				transfer_state_to = UKR
				else = {
					set_state_owner_to = UKR
				}
			}
		}
		set_global_flag = ukraine_released
		every_state = {
			limit = {
				OR = {
					state = 808
					state = 766
				}
			}
			add_claim_by = UKR
		}
		# disagreed with universal
		# every_state = {
		# 	limit = {
		# 		OR = {
		# 			region = 192
		# 			state = 221
		# 		}
		# 		is_core_of = UKR
		# 	}
		# 	set_demilitarized_zone = yes
		# }
		RUS = {
			transfer_ship = {
				prefer_name = "Georgii Pobedonosets"
				type = battleship
				target = UKR
			}
			transfer_ship = {
				prefer_name = "Pamiat Merkuria"
				type = light_cruiser
				target = UKR
			}
			transfer_ship = {
				prefer_name = "Zorkiy"
				type = destroyer
				target = UKR
			}		
			transfer_ship = {
				prefer_name = "Zvonkiy"
				type = destroyer
				target = UKR
			}
			transfer_ship = {
				prefer_name = "Kapitan-leitenant Baranov"
				type = destroyer
				target = UKR
			}
			transfer_ship = {
				prefer_name = "Leytenant Shestakov"
				type = destroyer
				target = UKR
			}
			#transfer_ship = {
			#	prefer_name = "Imperatritsa Ekaterina Velikaya"
			#	type = battleship
			#	target = UKR
			#}
			transfer_units_fraction= {
				target = UKR
				size = 0
				stockpile_ratio = 0.15
				army_ratio = 0.15
				navy_ratio = 0
				air_ratio = 0.15
				keep_unit_leaders_trigger = {
					always = yes
				}
			}
		}
		every_state = {
			limit = {
				is_core_of = UKR
			}
			remove_russian_cores = yes
			remove_russian_claims = yes
		}
		UKR = {
			add_ideas = {
				standing_alone
				disarmed_nation
			}			
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
			load_oob = "UKR_army"
			send_embargo = RUS
			give_military_access = RUS
		}
		give_military_access = UKR
		every_other_country = {
			limit = {
				has_war_with = RUS
				is_russian_tag = no
				# without this, it makes germany join war with persia lol
				NOT = {
					has_idea = standing_alone
				}
			}
			UKR = {
				add_to_war = {
					targeted_alliance = RUS
					enemy = PREV
				}
			}
		}
		every_possible_country = {
			limit = {
				has_character = UKR_pavlo_skoropadskyi
			}
			UKR_pavlo_skoropadskyi = {			
				set_nationality = UKR	
				if = {
					limit = {
						is_field_marshal = no									
					}
					promote_leader = yes
				}
				set_character_name = UKR_pavlo_skoropadskyi
			}		
		}
	}	
}
create_RUC = {
	if = {
		limit = {
			RUC = {
				exists = no
			}
			192 = {
				OR = {
					is_owned_and_controlled_by = ROOT
					is_owned_and_controlled_by = UKR
				}
			}
		}
		192 = {
			add_core_of = RUC
			transfer_state_to = RUC
		}
		if = {
			limit = {
				78 = {
					OR = {
						is_owned_and_controlled_by = ROOT
						is_owned_and_controlled_by = UKR
					}
				}
			}
			78 = {
				add_core_of = RUC
				transfer_state_to = RUC
			}
		}
		else_if = {
			limit = {
				78 = {
					OR = {
						AND = {
							is_owned_by = ROOT
							NOT = {
								is_controlled_by = ROOT
							}
						}
						AND = {
							is_owned_by = UKR
							NOT = {
								is_controlled_by = UKR
							}
						}
					}
				}
			}
			add_core_of = RUC
			set_state_owner_to = RUC
		}
		every_possible_country = {
			limit = {
				has_character = RUS_mikhail_drozdovsky
			}
			RUS_mikhail_drozdovsky = {
				set_nationality = RUC	
			}		
		}
		every_possible_country = {
			limit = {
				has_character = RUS_vladimir_vitkovsky
			}
			RUS_vladimir_vitkovsky = {
				set_nationality = RUC
			}		
		}
		every_possible_country = {
			limit = {
				has_character = RUS_vladimir_kharzhevsky
			}
			RUS_vladimir_kharzhevsky = {
				set_nationality = RUC
			}		
		}
		every_possible_country = {
			limit = {
				has_character = RUS_dmitry_shcherbachev
			}
			RUS_dmitry_shcherbachev = {
				set_nationality = RUC
				promote_leader = yes
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=stratocracy	
					}
				}
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=personalistic_dictatorship
					}	
				}
			}
		}
		transfer_units_fraction= {
			target = RUC
			size = 0
			stockpile_ratio = 0.1
			army_ratio = 0.1
			navy_ratio = 0.3
			air_ratio = 0.1
			keep_unit_leaders_trigger = {
				always = yes
			}
		}
		RUC = {
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
		}
		every_other_country = {
			limit = {
				has_war_with = RUS
				is_russian_tag = no
				# without this, it makes germany join war with persia lol
				NOT = {
					has_idea = standing_alone
				}
			}
			RUC = {
				add_to_war = {
					targeted_alliance = RUS
					enemy = PREV
				}
			}
		}
	}
}
create_KUB = {
	if = {
		limit = {
			KUB = {
				exists = no
			}
			any_owned_state = {
				OR = {
					state = 234
					state = 579
					state = 941
				}
			}
		}
		every_state = {
			limit = {
				OR = {
					state = 234
					state = 579
					state = 941
					state = 940
					state = 233
				}			
			}	
			add_core_of = KUB	
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 234
					state = 579
					state = 941
				}
			}
			remove_core_of = SOV
			every_country = {
				limit = {
					has_war_with = ROOT
					controls_state = PREV
				}
				KUB = { give_military_access = PREV }
			}
			transfer_state_to = KUB
		}
		KUB = {			
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			load_focus_tree = white_guard_focus
			country_lock_all_division_template = yes
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
			load_oob = "KUB_1918"
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 2500
				producer = RUS
			}
		}
	}	
}
create_CRI = {
	if = {
		limit = {
			CRI = {
				exists = no
			}
			owns_state = 137
		}
		137 = {
			every_country = {
				limit = {
					has_war_with = ROOT
					controls_state = PREV
				}
				CRI = { give_military_access = PREV }
			}
			transfer_state_to = CRI
		}
		RUS_matvei_sulkevich = {
			set_character_name = CRI_maciej_sulkiewicz
			set_nationality = CRI
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = authoritarian_democracy
				}
			}
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = stratocracy
				}
			}
		}
		CRI = {			
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			set_politics = {
				ruling_party = democratic
			}
			set_popularities = {
				democratic = 31
				neutrality = 39
				fascism = 0
				communism = 30
			}
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
			#load_oob = "CRI_1918"
		}
	}	
}
create_ORE = {
	if = {
		limit = {
			ORE = {
				exists = no
			}
			owns_state = 652
		}
		652 = {
			add_core_of = ORE
			transfer_state_to = ORE
		}
		572 = {
			add_core_of = ORE
		}
		SOV = {		
			send_equipment_fraction = {
				value = 0.15
				target = ORE
			}
		}
		every_possible_country = {
			limit = {
				has_character = RUS_aleksandr_dutov
			}
			RUS_aleksandr_dutov = {
				set_nationality = ORE
				promote_leader = yes
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=stratocracy
						traits = { cossack_ataman }
					}
				}
				add_country_leader_role ={
					promote_leader = yes
					country_leader = {
						ideology=authoritarian_democracy
						traits = { cossack_ataman }
					}
				}
			}			
		}
		ORE = {			
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			load_focus_tree = white_guard_focus
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes		
			load_oob = "RUS_civil_war"
		}
		652 = {
			create_unit = {
				division = "division_template = \"Belogvardeyskaya Kavaleriya\"	start_experience_factor = 0.6	start_equipment_factor = 1"
				owner = ORE
				allow_spawning_on_enemy_provs = yes
				count = 4
			}
		}
	}

}
create_UCH = {
	if = {
		limit = {
			UCH = {
				exists = no
			}
			owns_state = 943
		}
		943 = {
			add_core_of = UCH
			transfer_state_to = UCH
		}
		UCH = {			
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			load_focus_tree = white_guard_focus		
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
			load_oob = "RUS_civil_war"
		}
		943 = {
			create_unit = {
				division = "division_template = \"Belogvardeyskaya Kavaleriya\"	start_experience_factor = 0.6	start_equipment_factor = 1"
				owner = UCH
				allow_spawning_on_enemy_provs = yes
				count = 5
				country_score = {
					base = 100
				}
			}
		}
		SOV = {
			send_equipment_fraction = {
				value = 0.15
				target = UCH
			}
		}
	}
}
create_TER = {
	if = {
		limit = {
			TER = {
				exists = no
			}
			owns_state = 232
		}
		232 = {
			every_country = {
				limit = {
					has_war_with = ROOT
					controls_state = PREV
				}
				TER = { give_military_access = PREV }
			}
			add_core_of = TER
			transfer_state_to = TER
		}
		TER = {
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			load_focus_tree = white_guard_focus
			inherit_technology = RUS
			give_military_access = ROOT
		}
	}
}
create_MOU = {
	if = {
		limit = {
			MOU = {
				exists = no
			}
			owns_state = 565
		}
		# Mountainous Republic
		565 = {
			every_country = {
				limit = {
					has_war_with = ROOT
					controls_state = PREV
				}
				MOU = { give_military_access = PREV }
			}
			transfer_state_to = MOU
		}
		MOU = {
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			set_politics = {
				ruling_party = democratic
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.30
			}
			give_military_access = ROOT
		}
	}
}
create_USS = {
	if = {
		limit = {
			USS = {
				exists = no
			}
			owns_state = 569
		}
		569 = {
			add_core_of = USS
			transfer_state_to = USS
		}
		every_state = {
			limit = {
				OR = {
					state = 963
					state = 964
					state = 409
					state = 967
				}
			}
			add_core_of = USS
		}
		USS = {			
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			load_focus_tree = white_guard_focus
			inherit_technology = RUS
			delete_obsolete_russian_templates = yes
			load_oob = "RUS_civil_war"
		}
		569 = {
			create_unit = {
				division = "name = \"Ussuriyskiy Osobyy otryad\" division_template = \"Belogvardeyskaya Kavaleriya\"	start_experience_factor = 0.6	start_equipment_factor = 1"
				owner = USS
				allow_spawning_on_enemy_provs = yes
				count = 3
				country_score = {
					base = 100
				}
			}
		}
		SOV = {
			send_equipment_fraction = {
				value = 0.05
				target = USS
			}
		}
	}
}
create_TSCN = {
	if = {
		limit = {
			GEO = {
				OR = {
					is_subject_of = RUS
					exists = no
				}
			}
			OR = {
				any_owned_state = {
					OR = {
						is_core_of = GEO
						is_core_of = AZR
						is_core_of = ARM
					}
					NOT = {
						state = 235
					}
				}
				has_subject = AZR
				has_subject = ARM
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = GEO
					is_core_of = AZR
					is_core_of = ARM
					is_core_of = PER
					region = 134
					region = 129
				}
				NOT = {
					state = 233
					is_core_of = MOU
				}
			}
			if = {
				limit = {
					NOT = { is_core_of = PER }
				}
				add_core_of = GEO
			}
			if = {
				limit = {
					is_controlled_by_ROOT_or_ally = yes
				}
				transfer_state_to = GEO
				else = {
					set_state_owner_to = GEO
				}
			}
		}
		every_other_country = {
			limit = {
				OR = {
					original_tag = ARM
					original_tag = AZR
					original_tag = MOU
				}
				is_subject_of = ROOT
			}
			drop_cosmetic_tag = yes
			GEO = {
				annex_country = {
					target = PREV
					transfer_troops = yes
				}
				change_tag_from = PREV
			}
		}
		every_state = {
			limit = {
				NOT = { is_owned_by = ROOT }
				is_fully_controlled_by = ROOT
				owner = {
					has_war_with = ROOT
				}
				is_on_continent = middle_east
			}
			set_state_controller_to = GEO
		}
		random_state = {
			limit = {
				is_owned_by = GEO
				OR = {
					state = 231
					state = 229
					state = 230
				}
			}
			prioritize = {
				231
			}
			GEO = { set_capital = { state = PREV } }
		}
		GEO = {
			load_oob = "GEO_1918"
			add_ideas = {
				standing_alone
				disarmed_nation
			}
			set_cosmetic_tag = GEO_TSCN_committee
			set_stability = 0.24
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
				long_name = GEO_TSCN_committee_party_long
				name = GEO_TSCN_committee_party 
			}
			set_popularities = {
				democratic = 46
				neutrality = 20
				fascism = 0
				communism = 34
			}
			inherit_technology = ROOT
			send_embargo = ROOT
			give_military_access = ROOT
			#Transcaucasian Commissariat
			country_event = {
				id  = ww1_russia.32
				days = 21
			}
		}
		DON = {
			DON_vasiliy_kharlamov = {
				set_nationality = GEO
				promote_character = authoritarian_democracy
			}
		}
		give_military_access = GEO
		every_other_country = {
			limit = {
				has_war_with = ROOT
				is_russian_tag = no
				is_russian_breakaway_tag = no
			}
			GEO = {
				add_to_war = {
					targeted_alliance = ROOT
					enemy = PREV
				}
			}
		}
		transfer_ship = {
			prefer_name = "Kars"
			type = destroyer
			target = GEO
		}
		transfer_ship = {
			prefer_name = "Ardagan"
			type = destroyer
			target = GEO
		}
	}
}

SE_rus_civil_war_winner = {
	hidden_effect = {
		if = {
			limit = {
				SOV = { has_country_flag = russian_civil_war_winner }
			}
			play_song = "SE_rus_civil_war_winner_red"
			set_country_flag = SE_rus_civil_war_winner_red
			else_if = {
				limit = {
					SIB = {
						has_country_flag = russian_civil_war_winner
						OR = {
							has_government = neutrality 
							has_government = fascism
						}
					}
				}
				play_song = "SE_rus_civil_war_winner_white_siberia"
				set_country_flag = SE_rus_civil_war_winner_white_siberia	
				else_if = {
					limit = {
						SRA = {
							has_country_flag = russian_civil_war_winner
						}
					}
					play_song = "SE_rus_civil_war_winner_white_volunteer_army"
					set_country_flag = SE_rus_civil_war_winner_white_volunteer_army	
					else_if = {
						limit = {					
							OR = {
								SIB = {
									has_country_flag = russian_civil_war_winner
									OR = {
										has_country_leader = {
											character = RUS_nikolai_avksentiev
										}
										has_country_leader = {
											character = RUS_pavel_shatilov
										}
									}								
								}
								TRC = {
									has_country_flag = russian_civil_war_winner
									OR = {
										has_government = democratic
										has_government = neutrality
									}			
								}
								KOM = {
									has_country_flag = russian_civil_war_winner
									OR = {
										has_government = democratic
										has_government = communism
									}			
								}	
								any_country = {
									has_country_flag = russian_civil_war_winner
									OR = {
										has_country_leader = {
											character = RUS_nikolai_avksentiev
										}
										has_country_leader = {
											character = RUS_pavel_shatilov
										}
										has_country_leader = {
											character = RUS_viktor_chernov
										}
										has_country_leader = {
											character = RUS_vladimir_volsky
										}
										has_country_leader = {
											character = RUS_florian_fyodorovich
										}
										has_country_leader = {
											character = RUS_fyodor_makhin
										}										
									}									
								}				
							}
						}
						play_song = "SE_rus_civil_war_winner_eser"
						set_country_flag = SE_rus_civil_war_winner_eser	
						else = {
							play_song = "SE_rus_civil_war_winner_white"
							set_country_flag = SE_rus_civil_war_winner_white
						}
					}
				}
			}
		}
	}
}
FIN_set_finnish_state_names = {
	if = {
		limit = { controls_state = 111 }
		111 = { set_state_name = HELSINKI_STATE }
		set_province_name = { id = 11105 name = HELSINKI_STATE }
		set_province_name = { id = 6108 name = TAMMISAARI_PROV }
		set_province_name = { id = 6009 name = PORVOO_PROV }
		set_province_name = { id = 11211 name = HANKO_PROV }
	}
	if = {
		limit = { controls_state = 722 }
		722 = { set_state_name = PETSAMO_STATE }
	}
	if = {
		limit = { controls_state = 149 }
		149 = { set_state_name = VAASA_STATE }
		set_province_name = { id = 3122 name = VAASA_STATE }
		set_province_name = { id = 66 name = KOKKOLA_PROV }
		set_province_name = { id = 11065 name = UUSIKAARLEPYY_PROV }
	}
	if = {
		limit = { controls_state = 960 }
		960 = { set_state_name = TURKU_STATE }
		set_province_name = { id = 3083 name = TURKU_STATE }
		set_province_name = { id = 3117 name = PORI_PROV }
		set_province_name = { id = 169 name = RAUMA_PROV }
	}
	if = {
		limit = { controls_state = 961 }
		961 = { set_state_name = HAME_STATE }
		set_province_name = { id = 3137 name = TAMPERE_PROV }
		set_province_name = { id = 67 name = LAHTI_PROV }
		set_province_name = { id = 9167 name = HAME_PROV }
	}
	if = {
		limit = { controls_state = 150 }
		150 = { set_state_name = MIKKELI_STATE }
		set_province_name = { id = 165 name = MIKKELI_STATE }
		set_province_name = { id = 37 name = SAVONLINNA_PROV }
	}
	if = {
		limit = { controls_state = 148 }
		148 = { set_state_name = OULU_STATE }
		set_province_name = { id = 158 name = OULU_STATE }
		set_province_name = { id = 11121 name = RAAHE_PROV }
		set_province_name = { id = 195 name = KOKKOLA_PROV }
		set_province_name = { id = 3125 name = KAJAANI_PROV }
		set_province_name = { id = 11125 name = TORNIO_PROV }
	}
	if = {
		limit = { controls_state = 146 }
		146 = { set_state_name = VIIPURI_STATE }
		set_province_name = { id = 9206 name = VIIPURI_STATE }
		set_province_name = { id = 9105 name = KAKISALMI_PROV }
		set_province_name = { id = 204 name = LOVIISA_PROV }
		set_province_name = { id = 3061 name = HAMINA_PROV }
		set_province_name = { id = 6150 name = SORTAVALA_PROV }
		set_province_name = { id = 6082 name = LAPPEENRANTA_PROV }
	}
}
SOV_destroy_black_fleet = {
	damage_units = {
		region = 30
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 212
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 211
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 77
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 212
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 805
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 846
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 78
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 192
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 197
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 196
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 137
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 955
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 227
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 218
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 941
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 234
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 940
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 233
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 231
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 855
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 816
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 1034
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 354
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 355
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 1031
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 356
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 1035
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 1019
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 1069
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
	damage_units = {
		state = 1068
		limit = { tag = SOV }
		damage = 1
		org_damage = 1
		str_damage = 1
		ratio = yes
		navy = yes
	}
}