revise_ansei_treaties = {
	if = {
		limit = {
			has_idea = JAP_idea_ansei_treaties
		}
		swap_ideas = {
			remove_idea = JAP_idea_ansei_treaties
			add_idea = JAP_idea_ansei_treaties_1
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_idea_ansei_treaties_1
		}
		swap_ideas = {
			remove_idea = JAP_idea_ansei_treaties_1
			add_idea = JAP_idea_ansei_treaties_2
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_idea_ansei_treaties_2
		}
		swap_ideas = {
			remove_idea = JAP_idea_ansei_treaties_2
			add_idea = JAP_idea_ansei_treaties_3
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_idea_ansei_treaties_3
		}
		remove_ideas = JAP_idea_ansei_treaties_3
		country_event = ww1_japan.29
	}
}

JAP_improve_naval_industry = {
	if = {
		limit = {
			has_idea = JAP_naval_industry05
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry05
			add_idea = JAP_naval_industry04
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry04
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry04
			add_idea = JAP_naval_industry03
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry03
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry03
			add_idea = JAP_naval_industry02
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry02
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry02
			add_idea = JAP_naval_industry01
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry01
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry01
			add_idea = JAP_naval_industry
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry
			add_idea = JAP_naval_industry2
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry2
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry2
			add_idea = JAP_naval_industry3
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry3
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry3
			add_idea = JAP_naval_industry4
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry4
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry4
			add_idea = JAP_naval_industry5
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry5
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry5
			add_idea = JAP_naval_industry6
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry6
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry6
			add_idea = JAP_naval_industry7
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry7
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry7
			add_idea = JAP_naval_industry8
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry8
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry8
			add_idea = JAP_naval_industry9
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry9
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry9
			add_idea = JAP_naval_industry10
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry10
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry10
			add_idea = JAP_naval_industry11
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry11
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry11
			add_idea = JAP_naval_industry12
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry12
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry12
			add_idea = JAP_naval_industry13
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry13
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry13
			add_idea = JAP_naval_industry14
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry14
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry14
			add_idea = JAP_naval_industry15
		}
	}
}

JAP_worse_naval_industry = {
	if = {
		limit = {
			has_idea = JAP_naval_industry15
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry15
			add_idea = JAP_naval_industry14
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry14
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry14
			add_idea = JAP_naval_industry13
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry13
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry13
			add_idea = JAP_naval_industry12
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry12
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry12
			add_idea = JAP_naval_industry11
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry11
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry11
			add_idea = JAP_naval_industry10
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry10
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry10
			add_idea = JAP_naval_industry9
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry9
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry9
			add_idea = JAP_naval_industry8
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry8
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry8
			add_idea = JAP_naval_industry7
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry7
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry7
			add_idea = JAP_naval_industry6
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry6
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry6
			add_idea = JAP_naval_industry5
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry5
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry5
			add_idea = JAP_naval_industry4
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry4
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry4
			add_idea = JAP_naval_industry3
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry3
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry3
			add_idea = JAP_naval_industry2
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry2
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry2
			add_idea = JAP_naval_industry
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry
			add_idea = JAP_naval_industry01
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry01
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry01
			add_idea = JAP_naval_industry02
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry02
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry02
			add_idea = JAP_naval_industry03
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry03
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry03
			add_idea = JAP_naval_industry04
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_industry04
		}
		swap_ideas = {
			remove_idea = JAP_naval_industry04
			add_idea = JAP_naval_industry05
		}
	}
}

JAP_improve_naval_research = {
	if = {
		limit = {
			has_idea = JAP_naval_research
		}
		swap_ideas = {
			remove_idea = JAP_naval_research
			add_idea = JAP_naval_research2
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_research2
		}
		swap_ideas = {
			remove_idea = JAP_naval_research2
			add_idea = JAP_naval_research3
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_research3
		}
		swap_ideas = {
			remove_idea = JAP_naval_research3
			add_idea = JAP_naval_research4
		}
	}
	else_if = {
		limit = {
			has_idea = JAP_naval_research4
		}
		swap_ideas = {
			remove_idea = JAP_naval_research4
			add_idea = JAP_naval_research5
		}
	}
}

JAP_start_ship_building_mission = {
	set_variable = {
		built_battleship = num_ships_with_type@battleship
	}
	set_variable = {
		built_battlecruiser = num_ships_with_type@battle_cruiser
	}
	set_variable = {
		built_protected_cruiser =  num_ships_with_type@protected_cruiser
	}
	set_variable = {
		built_armored_cruiser =  num_ships_with_type@armored_cruiser
	}
	set_variable = {
		built_unprotected_cruiser =  num_ships_with_type@unprotected_cruiser
	}
	set_variable = {
		built_light_cruiser =  num_ships_with_type@light_cruiser
	}
	activate_mission = JAP_build_ships_mission
}

# dont use in history because of mio
JAP_create_kongo_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Kongo Class"
			type = ship_hull_heavy_2
			name_group = JAP_BB_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_heavy_battery_2
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_fire_control_system_slot = ship_fire_control_system_0
				front_1_custom_slot = ship_heavy_battery_2
				mid_2_custom_slot = ship_secondaries_2
				mid_1_custom_slot = ship_torpedo_2
				fixed_ship_engine_slot = heavy_ship_engine_2
				fixed_ship_secondaries_slot = ship_secondaries_1
				fixed_ship_armor_slot = ship_armor_bc_1
			}
		}
	}
}

JAP_create_fuso_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Fus≈ç Class"
			type = ship_hull_heavy_2
			name_group = JAP_BB_HISTORICAL
			design_team = mio:JAP_kure_naval_arsenal_organization
			modules = {
				fixed_ship_battery_slot = ship_heavy_battery_2
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_fire_control_system_slot = ship_fire_control_system_0
				front_1_custom_slot = ship_heavy_battery_2
				mid_1_custom_slot = ship_secondaries_2
				mid_2_custom_slot = ship_torpedo_2
				fixed_ship_engine_slot = heavy_ship_engine_2
				fixed_ship_secondaries_slot = ship_secondaries_1
				rear_1_custom_slot = ship_heavy_battery_2
				fixed_ship_armor_slot = ship_armor_bb_1
			}
		}
	}
}

JAP_create_ise_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Ise Class"
			type = ship_hull_heavy_3
			name_group = JAP_BB_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_heavy_battery_3
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_fire_control_system_slot = ship_fire_control_system_1
				front_1_custom_slot = ship_heavy_battery_3
				mid_1_custom_slot = ship_secondaries_2
				mid_2_custom_slot = ship_torpedo_3
				rear_1_custom_slot = ship_heavy_battery_3
				fixed_ship_engine_slot = heavy_ship_engine_3
				fixed_ship_secondaries_slot = ship_secondaries_1
				mid_3_custom_slot = ship_secondaries_2
				fixed_ship_armor_slot = ship_armor_bb_2
			}
		}
	}
}

JAP_create_nagato_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Nagato Class"
			type = ship_hull_heavy_3
			name_group = JAP_BB_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_heavy_battery_4
				fixed_ship_anti_air_slot = ship_anti_air_2
				fixed_ship_fire_control_system_slot = ship_fire_control_system_2
				front_1_custom_slot = ship_heavy_battery_4
				mid_1_custom_slot = ship_secondaries_2
				mid_2_custom_slot = ship_torpedo_3
				rear_1_custom_slot = ship_heavy_battery_4
				fixed_ship_engine_slot = heavy_ship_engine_4
				fixed_ship_secondaries_slot = ship_secondaries_1
				mid_3_custom_slot = ship_secondaries_2
				fixed_ship_armor_slot = ship_armor_bb_2
			}
		}
	}
}

JAP_create_chikuma_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Chikuma Class"
			type = ship_hull_cruiser_3
			name_group = JAP_CL_HISTORICAL
			design_team = mio:JAP_sasebo_naval_arsenal_organization
			modules = {
				fixed_ship_battery_slot = ship_light_medium_battery_2
				fixed_ship_secondaries_slot = ship_secondaries_1
				fixed_ship_engine_slot = cruiser_ship_engine_2
				front_1_custom_slot = ship_light_medium_battery_2
				mid_1_custom_slot = ship_torpedo_2
				fixed_ship_armor_slot = ship_armor_protected_cruiser_2
			}
		}
	}
}

JAP_create_sakura_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Sakura Class"
			type = ship_hull_light_2
			name_group = JAP_DD_HISTORICAL
			design_team = mio:JAP_maizuru_naval_arsenal_organization
			modules = {
				fixed_ship_battery_slot = ship_light_battery_2
				rear_1_custom_slot = ship_light_battery_1
				fixed_ship_engine_slot = light_ship_engine_2
				fixed_ship_torpedo_slot = ship_torpedo_2
			}
		}
	}
}

JAP_create_urakaze_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Urakaze Class"
			type = ship_hull_light_2
			name_group = JAP_DD_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_battery_2
				rear_1_custom_slot = ship_light_battery_1
				fixed_ship_engine_slot = light_ship_engine_2_oil
				fixed_ship_torpedo_slot = ship_torpedo_3
			}
		}
	}
}

JAP_create_kaba_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Kaba Class"
			type = ship_hull_light_2
			name_group = JAP_DD_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_battery_2
				rear_1_custom_slot = ship_light_battery_1
				fixed_ship_engine_slot = light_ship_engine_3
				fixed_ship_torpedo_slot = ship_torpedo_3
			}
		}
	}
}

JAP_create_isokaze_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Isokaze Class"
			type = ship_hull_light_3
			name_group = JAP_DD_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_battery_2
				rear_1_custom_slot = ship_light_battery_2
				fixed_ship_engine_slot = light_ship_engine_3
				fixed_ship_torpedo_slot = ship_torpedo_3
			}
		}
	}
}

JAP_create_momo_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Momo Class"
			type = ship_hull_light_3
			name_group = JAP_DD_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_battery_3
				rear_1_custom_slot = ship_light_battery_3
				fixed_ship_engine_slot = light_ship_engine_3
				fixed_ship_torpedo_slot = ship_torpedo_3
			}
		}
	}
}

JAP_create_tenryu_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Tenryu Class"
			type = ship_hull_cruiser_4
			name_group = JAP_CL_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_medium_battery_3
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_secondaries_slot = ship_secondaries_1
				fixed_ship_engine_slot = cruiser_ship_engine_3
				mid_1_custom_slot = ship_torpedo_3
				fixed_ship_armor_slot = ship_armor_light_cruiser_2
			}
		}
	}
}

JAP_create_kuma_class_effect = {
	hidden_effect = {
		create_equipment_variant = {
			name = "Kuma Class"
			type = ship_hull_cruiser_4
			name_group = JAP_CL_HISTORICAL
			modules = {
				fixed_ship_battery_slot = ship_light_medium_battery_3
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_secondaries_slot = ship_secondaries_1
				fixed_ship_engine_slot = cruiser_ship_engine_3
				mid_1_custom_slot = ship_torpedo_3
				rear_1_custom_slot = ship_light_medium_battery_3
				mid_2_custom_slot = ship_secondaries_1
				fixed_ship_armor_slot = ship_armor_light_cruiser_3
			}
		}
	}
}





########################
  ### ARMY FACTION ###
########################

JAP_small_army_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_army_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = {
			limit = {
				JAP_army_faction_is_tier_1 = yes
			}
			if = { #Army WON'T level up
				limit = {
					check_variable = { JAP_army_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_army_faction_gain_tt
			}
			else = { #Army WILL level up
				custom_effect_tooltip = JAP_small_army_faction_gain_tt
				JAP_army_faction_goes_up_from_tier_1_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_2 = yes
			}
			if = { #Army WON'T level up
				limit = {
					check_variable = { JAP_army_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
				}
				custom_effect_tooltip = JAP_small_army_faction_gain_tt
			}
			else = { #Army WILL level up

				custom_effect_tooltip = JAP_small_army_faction_gain_tt
				JAP_army_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_3 = yes
			}
			if = { #Army WON'T level up
				limit = {
					check_variable = { JAP_army_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
				}
				custom_effect_tooltip = JAP_small_army_faction_gain_tt
			}
			else = { #Army WILL level up
				custom_effect_tooltip = JAP_small_army_faction_gain_tt
				JAP_army_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
	}
}

JAP_big_army_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_army_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = { #Army WILL level up
			limit = {
				JAP_army_faction_is_tier_1 = yes
			}
			custom_effect_tooltip = JAP_big_army_faction_gain_tt
			JAP_army_faction_goes_up_from_tier_1_to_tier_2 = yes
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_2 = yes
			}
			if = { #Army WON'T level up
				limit = {
					check_variable = { JAP_army_faction_influence_level < JAP_tier_2_to_tier_3_big_gate }
				}
				custom_effect_tooltip = JAP_big_army_faction_gain_tt
			}
			else = { #Army WILL level up

				custom_effect_tooltip = JAP_big_army_faction_gain_tt
				JAP_army_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_3 = yes
			}
			if = { #Army WON'T level up
				limit = {
					check_variable = { JAP_army_faction_influence_level < JAP_tier_3_to_tier_4_big_gate }
				}
				custom_effect_tooltip = JAP_big_army_faction_gain_tt
			}
			else = { #Army WILL level up
				custom_effect_tooltip = JAP_big_army_faction_gain_tt
				JAP_army_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_army_faction_influence_level = JAP_big_influence_point }
	}
}

JAP_small_army_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_army_faction_influence_level > JAP_minimum_faction_level }
		}
		if = {
			limit = {
				JAP_army_faction_is_tier_4 = yes
			}
			if = { #Army WON'T level down
				limit = {
					check_variable = { JAP_army_faction_influence_level > JAP_tier_4_top_limit_check }
				}
				custom_effect_tooltip = JAP_small_army_faction_loss_tt
			}
			else = { #Army WILL level down

				custom_effect_tooltip = JAP_small_army_faction_loss_tt
				JAP_army_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_3 = yes
			}
			if = { #Army WON'T level down
				limit = {
					check_variable = { JAP_army_faction_influence_level > JAP_tier_3_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_army_faction_loss_tt
			}
			else = { #Army WILL level down
				custom_effect_tooltip = JAP_small_army_faction_loss_tt

				JAP_army_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_2 = yes
			}
			if = { #Army WON'T level down
				limit = {
					check_variable = { JAP_army_faction_influence_level > JAP_tier_2_to_tier_1_small_gate }
				}
				custom_effect_tooltip = JAP_small_army_faction_loss_tt
			}
			else = { #Army WILL level down
				custom_effect_tooltip = JAP_small_army_faction_loss_tt
				JAP_army_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Army Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_small_army_faction_loss_tt
		}
		subtract_from_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
	}
}

JAP_big_army_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_army_faction_influence_level > JAP_tier_1_gate }
		}
		if = {
			limit = {
				JAP_army_faction_is_tier_4 = yes
			}
			if = { #Army WON'T level down
				limit = {
					check_variable = { JAP_army_faction_influence_level > JAP_maximum_faction_level_check }
				}
				custom_effect_tooltip = JAP_big_army_faction_loss_tt
			}
			else = { #Army WILL level down
				custom_effect_tooltip = JAP_big_army_faction_loss_tt
				JAP_army_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_3 = yes
			}
			if = { #Army WON'T level down
				limit = {
					check_variable = { JAP_army_faction_influence_level > JAP_tier_3_to_tier_2_big_gate }
				}
				custom_effect_tooltip = JAP_big_army_faction_loss_tt
			}
			else = { #Army WILL level down
				custom_effect_tooltip = JAP_big_army_faction_loss_tt
				JAP_army_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				JAP_army_faction_is_tier_2 = yes
			}
			if = { #Army WON'T level down
				limit = {
					check_variable = { JAP_army_faction_influence_level > JAP_tier_2_to_tier_1_big_gate }
				}
				custom_effect_tooltip = JAP_big_army_faction_loss_tt
			}
			else = { #Army WILL level down
				custom_effect_tooltip = JAP_big_army_faction_loss_tt
				JAP_army_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Army Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_big_army_faction_loss_tt
		}
		subtract_from_variable = { JAP_army_faction_influence_level = JAP_big_influence_point }
	}
	else_if = { #Army Faction is already at rock bottom and can't go lower than this
		limit = {
			check_variable = { JAP_army_faction_influence_level > JAP_tier_1_minimum_limit }
		}
		custom_effect_tooltip = JAP_small_army_faction_loss_tt
		subtract_from_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
	}
}

#########################
  ### NAVAL FACTION ###
#########################

JAP_small_naval_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_naval_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = {
			limit = {
				JAP_naval_faction_is_tier_1 = yes
			}
			if = { #Navy WON'T level up
				limit = {
					check_variable = { JAP_naval_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt
			}
			else = { #Navy WILL level up
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt
				JAP_naval_faction_goes_up_from_tier_1_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_2 = yes
			}
			if = { #Navy WON'T level up
				limit = {
					check_variable = { JAP_naval_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
				}
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt
			}
			else = { #Navy WILL level up
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt

				JAP_naval_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_3 = yes
			}
			if = { #Navy WON'T level up
				limit = {
					check_variable = { JAP_naval_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
				}
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt
			}
			else = { #Navy WILL level up
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt
				
				JAP_naval_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
	}
}

JAP_big_naval_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_naval_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = { #Navy WILL level up
			limit = {
				JAP_naval_faction_is_tier_1 = yes
			}
			custom_effect_tooltip = JAP_big_naval_faction_gain_tt
			JAP_naval_faction_goes_up_from_tier_1_to_tier_2 = yes
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_2 = yes
			}
			if = { #Navy WON'T level up
				limit = {
					check_variable = { JAP_naval_faction_influence_level < JAP_tier_2_to_tier_3_big_gate }
				}
				custom_effect_tooltip = JAP_big_naval_faction_gain_tt
			}
			else = { #Navy WILL level up
				custom_effect_tooltip = JAP_big_naval_faction_gain_tt

				JAP_naval_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_3 = yes
			}
			if = { #Navy WON'T level up
				limit = {
					check_variable = { JAP_naval_faction_influence_level < JAP_tier_3_to_tier_4_big_gate }
				}
				custom_effect_tooltip = JAP_big_naval_faction_gain_tt
			}
			else = { #Navy WILL level up
				custom_effect_tooltip = JAP_big_naval_faction_gain_tt
				JAP_naval_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_naval_faction_influence_level = JAP_big_influence_point }
	}
}

JAP_small_naval_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_naval_faction_influence_level > JAP_minimum_faction_level }
		}
		if = {
			limit = {
				JAP_naval_faction_is_tier_4 = yes
			}
			if = { #Navy WON'T level down
				limit = {
					check_variable = { JAP_naval_faction_influence_level > JAP_tier_4_top_limit_check }
				}
				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
			}
			else = { #Navy WILL level down

				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
				
				JAP_naval_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_3 = yes
			}
			if = { #Navy WON'T level down
				limit = {
					check_variable = { JAP_naval_faction_influence_level > JAP_tier_3_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
			}
			else = { #Navy WILL level down
				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
				
				JAP_naval_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_2 = yes
			}
			if = { #Navy WON'T level down
				limit = {
					check_variable = { JAP_naval_faction_influence_level > JAP_tier_2_to_tier_1_small_gate }
				}
				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
			}
			else = { #Navy WILL level down
				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
				
				JAP_naval_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Navy Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_small_naval_faction_loss_tt
		}
		subtract_from_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
	}
}

JAP_big_naval_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_naval_faction_influence_level > JAP_tier_1_gate }
		}
		if = {
			limit = {
				JAP_naval_faction_is_tier_4 = yes
			}
			if = { #Navy WON'T level down
				limit = {
					check_variable = { JAP_naval_faction_influence_level > JAP_maximum_faction_level_check }
				}
				custom_effect_tooltip = JAP_big_naval_faction_loss_tt
			}
			else = { #Navy WILL level down
				custom_effect_tooltip = JAP_big_naval_faction_loss_tt

				JAP_naval_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_3 = yes
			}
			if = { #Navy WON'T level down
				limit = {
					check_variable = { JAP_naval_faction_influence_level > JAP_tier_3_to_tier_2_big_gate }
				}
				custom_effect_tooltip = JAP_big_naval_faction_loss_tt
			}
			else = { #Navy WILL level down
				custom_effect_tooltip = JAP_big_naval_faction_loss_tt
				
				JAP_naval_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				JAP_naval_faction_is_tier_2 = yes
			}
			if = { #Navy WON'T level down
				limit = {
					check_variable = { JAP_naval_faction_influence_level > JAP_tier_2_to_tier_1_big_gate }
				}
				custom_effect_tooltip = JAP_big_naval_faction_loss_tt
			}
			else = { #Navy WILL level down
				custom_effect_tooltip = JAP_big_naval_faction_loss_tt
				
				JAP_naval_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Navy Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_big_naval_faction_loss_tt
		}
		subtract_from_variable = { JAP_naval_faction_influence_level = JAP_big_influence_point }
	}
	else_if = { #Navy Faction is already at rock bottom and can't go lower than this
		limit = {
			check_variable = { JAP_naval_faction_influence_level > JAP_tier_1_minimum_limit }
		}
		custom_effect_tooltip = JAP_small_naval_faction_loss_tt
		subtract_from_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
	}
}

############################
  ### ZAIBATSU FACTION ###
############################

JAP_small_zaibatsu_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_1
			}
			if = { #Zaibatsu WON'T level up
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_zaibatsu_faction_gain_tt
			}
			else = { #Zaibatsu WILL level up
				custom_effect_tooltip = JAP_small_zaibatsu_faction_gain_tt
				
				JAP_zaibatsu_faction_goes_up_from_tier_1_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_2
			}
			if = { #Zaibatsu WON'T level up
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
				}
				custom_effect_tooltip = JAP_small_zaibatsu_faction_gain_tt
			}
			else = { #Zaibatsu WILL level up
				custom_effect_tooltip = JAP_small_zaibatsu_faction_gain_tt

				JAP_zaibatsu_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_3
			}
			if = { #Zaibatsu WON'T level up
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
				}
				custom_effect_tooltip = JAP_small_zaibatsu_faction_gain_tt
			}
			else = { #Zaibatsu WILL level up
				custom_effect_tooltip = JAP_small_zaibatsu_faction_gain_tt
				
				JAP_zaibatsu_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_zaibatsu_faction_influence_level = JAP_small_influence_point }
	}
}

JAP_big_zaibatsu_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_1
			}
			if = { #Zaibatsu WON'T level up
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_1_to_tier_2_big_gate }
				}
				custom_effect_tooltip = JAP_big_zaibatsu_faction_gain_tt
			}
			else = { #Zaibatsu WILL level up
				custom_effect_tooltip = JAP_big_zaibatsu_faction_gain_tt

				JAP_zaibatsu_faction_goes_up_from_tier_1_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_2
			}
			if = { #Zaibatsu WON'T level up
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_2_to_tier_3_big_gate }
				}
				custom_effect_tooltip = JAP_big_zaibatsu_faction_gain_tt
			}
			else = { #Zaibatsu WILL level up
				custom_effect_tooltip = JAP_big_zaibatsu_faction_gain_tt

				JAP_zaibatsu_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_3
			}
			if = { #Zaibatsu WON'T level up
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level < JAP_tier_3_to_tier_4_big_gate }
				}
				custom_effect_tooltip = JAP_big_zaibatsu_faction_gain_tt
			}
			else = { #Zaibatsu WILL level up
				custom_effect_tooltip = JAP_big_zaibatsu_faction_gain_tt
				
				JAP_zaibatsu_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_zaibatsu_faction_influence_level = JAP_big_influence_point }
	}
}

JAP_small_zaibatsu_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_zaibatsu_faction_influence_level > JAP_minimum_faction_level  }
		}
		if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_4
			}
			if = { #Zaibatsu WON'T level down
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level > JAP_maximum_faction_level_check  }
				}
				custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
			}
			else = { #Zaibatsu WILL level down
				custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt

				JAP_zaibatsu_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_3
			}
			if = { #Zaibatsu WON'T level down
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level > JAP_tier_3_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
			}
			else = { #Zaibatsu WILL level down
				custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
				
				JAP_zaibatsu_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_2
			}
			if = { #Zaibatsu WON'T level down
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level > JAP_tier_2_to_tier_1_small_gate }
				}
				custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
			}
			else = { #Zaibatsu WILL level down
				custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
				
				JAP_zaibatsu_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Zaibatsu Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
		}
	}
	subtract_from_variable = { JAP_zaibatsu_faction_influence_level = JAP_small_influence_point }
}

JAP_big_zaibatsu_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_zaibatsu_faction_influence_level > JAP_minimum_faction_level  }
		}
		if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_4
			}
			if = { #Zaibatsu WON'T level down
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level > JAP_maximum_faction_level_check  }
				}
				custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt
			}
			else = { #Zaibatsu WILL level down
				custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt

				JAP_zaibatsu_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_3
			}
			if = { #Zaibatsu WON'T level down
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level > JAP_tier_3_to_tier_2_big_gate }
				}
				custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt
			}
			else = { #Zaibatsu WILL level down
				custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt
				
				JAP_zaibatsu_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_2
			}
			if = { #Zaibatsu WON'T level down
				limit = {
					check_variable = { JAP_zaibatsu_faction_influence_level > JAP_tier_2_to_tier_1_big_gate }
				}
				custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt
			}
			else = { #Zaibatsu WILL level down
				custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt
				
				JAP_zaibatsu_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Zaibatsu Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_big_zaibatsu_faction_loss_tt
		}
		subtract_from_variable = { JAP_zaibatsu_faction_influence_level = JAP_big_influence_point }
	}
	else_if = { #Zaibatsu Faction is already at rock bottom and can't go lower than this
		limit = {
			check_variable = { JAP_zaibatsu_faction_influence_level > JAP_tier_1_minimum_limit }
		}
		custom_effect_tooltip = JAP_small_zaibatsu_faction_loss_tt
		subtract_from_variable = { JAP_zaibatsu_faction_influence_level = JAP_small_influence_point }
	}
}

##############################
  ### GOVERNMENT FACTION ###
##############################

JAP_small_government_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_government_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = {
			limit = {
				has_idea = JAP_government_faction_tier_1
			}
			if = { #Government WON'T level up
				limit = {
					check_variable = { JAP_government_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_government_faction_gain_tt
			}
			else = { #Government WILL level up
				custom_effect_tooltip = JAP_small_government_faction_gain_tt
				
				JAP_government_faction_goes_up_from_tier_1_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_2
			}
			if = { #Government WON'T level up
				limit = {
					check_variable = { JAP_government_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
				}
				custom_effect_tooltip = JAP_small_government_faction_gain_tt
			}
			else = { #Government WILL level up
				custom_effect_tooltip = JAP_small_government_faction_gain_tt

				JAP_government_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_3
			}
			if = { #Government WON'T level up
				limit = {
					check_variable = { JAP_government_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
				}
				custom_effect_tooltip = JAP_small_government_faction_gain_tt
			}
			else = { #Government WILL level up
				custom_effect_tooltip = JAP_small_government_faction_gain_tt
				
				JAP_government_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_government_faction_influence_level = JAP_small_influence_point }
	}
}

JAP_big_government_faction_gain = {
	if = {
		limit = {
			check_variable = { JAP_government_faction_influence_level < JAP_tier_4_minimum_limit }
		}
		if = {
			limit = {
				has_idea = JAP_government_faction_tier_1
			}
			if = { #Government WON'T level up
				limit = {
					check_variable = { JAP_government_faction_influence_level < JAP_tier_1_to_tier_2_big_gate }
				}
				custom_effect_tooltip = JAP_big_government_faction_gain_tt
			}
			else = { #Government WILL level up
				custom_effect_tooltip = JAP_big_government_faction_gain_tt
				JAP_government_faction_goes_up_from_tier_1_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_2
			}
			if = { #Government WON'T level up
				limit = {
					check_variable = { JAP_government_faction_influence_level < JAP_tier_2_to_tier_3_big_gate }
				}
				custom_effect_tooltip = JAP_big_government_faction_gain_tt
			}
			else = { #Government WILL level up
				custom_effect_tooltip = JAP_big_government_faction_gain_tt

				JAP_government_faction_goes_up_from_tier_2_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_3
			}
			if = { #Government WON'T level up
				limit = {
					check_variable = { JAP_government_faction_influence_level < JAP_tier_3_to_tier_4_big_gate }
				}
				custom_effect_tooltip = JAP_big_government_faction_gain_tt
			}
			else = { #Government WILL level up
				custom_effect_tooltip = JAP_big_government_faction_gain_tt
				
				JAP_government_faction_goes_up_from_tier_3_to_tier_4 = yes
			}
		}
		add_to_variable = { JAP_government_faction_influence_level = JAP_big_influence_point }
	}
}

JAP_small_government_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_government_faction_influence_level > JAP_minimum_faction_level  }
		}
		if = {
			limit = {
				has_idea = JAP_government_faction_tier_4
			}
			if = { #Government WON'T level down
				limit = {
					check_variable = { JAP_government_faction_influence_level > JAP_maximum_faction_level_check  }
				}
				custom_effect_tooltip = JAP_small_government_faction_loss_tt
			}
			else = { #Government WILL level down
				custom_effect_tooltip = JAP_small_government_faction_loss_tt

				JAP_government_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_3
			}
			if = { #Government WON'T level down
				limit = {
					check_variable = { JAP_government_faction_influence_level > JAP_tier_3_to_tier_2_small_gate }
				}
				custom_effect_tooltip = JAP_small_government_faction_loss_tt
			}
			else = { #Government WILL level down
				custom_effect_tooltip = JAP_small_government_faction_loss_tt
				
				JAP_government_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_2
			}
			if = { #Government WON'T level down
				limit = {
					check_variable = { JAP_government_faction_influence_level > JAP_tier_2_to_tier_1_small_gate }
				}
				custom_effect_tooltip = JAP_small_government_faction_loss_tt
			}
			else = { #Government WILL level down
				custom_effect_tooltip = JAP_small_government_faction_loss_tt
				
				JAP_government_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Government Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_small_government_faction_loss_tt
		}
	}
	subtract_from_variable = { JAP_government_faction_influence_level = JAP_small_influence_point }
}

JAP_big_government_faction_loss = {
	if = {
		limit = {
			check_variable = { JAP_government_faction_influence_level > JAP_minimum_faction_level  }
		}
		if = {
			limit = {
				has_idea = JAP_government_faction_tier_4
			}
			if = { #Government WON'T level down
				limit = {
					check_variable = { JAP_government_faction_influence_level > JAP_maximum_faction_level_check  }
				}
				custom_effect_tooltip = JAP_big_government_faction_loss_tt
			}
			else = { #Government WILL level down
				custom_effect_tooltip = JAP_big_government_faction_loss_tt

				JAP_government_faction_goes_down_from_tier_4_to_tier_3 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_3
			}
			if = { #Government WON'T level down
				limit = {
					check_variable = { JAP_government_faction_influence_level > JAP_tier_3_to_tier_2_big_gate }
				}
				custom_effect_tooltip = JAP_big_government_faction_loss_tt
			}
			else = { #Government WILL level down
				custom_effect_tooltip = JAP_big_government_faction_loss_tt
				
				JAP_government_faction_goes_down_from_tier_3_to_tier_2 = yes
			}
		}
		else_if = {
			limit = {
				has_idea = JAP_government_faction_tier_2
			}
			if = { #Government WON'T level down
				limit = {
					check_variable = { JAP_government_faction_influence_level > JAP_tier_2_to_tier_1_big_gate }
				}
				custom_effect_tooltip = JAP_big_government_faction_loss_tt
			}
			else = { #Government WILL level down
				custom_effect_tooltip = JAP_big_government_faction_loss_tt
				

				JAP_government_faction_goes_down_from_tier_2_to_tier_1 = yes
			}
		}
		else = { #Government Faction is already at rock bottom and can't go lower than this
			custom_effect_tooltip = JAP_big_government_faction_loss_tt
		}
		subtract_from_variable = { JAP_government_faction_influence_level = JAP_big_influence_point }
	}
	else_if = { #Government Faction is already at rock bottom and can't go lower than this
		limit = {
			check_variable = { JAP_government_faction_influence_level > JAP_tier_1_minimum_limit }
		}
		custom_effect_tooltip = JAP_small_government_faction_loss_tt
		subtract_from_variable = { JAP_government_faction_influence_level = JAP_small_influence_point }
	}
}

#################################################
#################################################
	### PROMOTE AND DEMOTE SIMULTANEOUSLY ###
#################################################
#################################################
#Due to how the Imperial Influence Faction System is set up, if you want to promote one or more faction(s) and/or demote one or more faction(s) simultaneously you need a separate script for how that works, and that's mostly because how the Inter-service Rivalry between Army and Navy works. We're handling simultaneous promotions/demotions separately so we don't display the Inter-service effects twice *le sigh*

#Promote Army and Demote Navy
JAP_small_army_gain_and_small_naval_loss = {
	if = {
		limit = {
			check_variable = { JAP_army_faction_influence_level < JAP_tier_4_minimum_limit } #Can promote Army higher
			check_variable = { JAP_naval_faction_influence_level > JAP_minimum_faction_level } #Can demote Navy lower
		}
		if = { #Army WON'T level up but Navy MIGHT level down
			limit = { #Checking to make sure Army WON'T actually level up
				OR = {
					AND = {
						JAP_army_faction_is_tier_1 = yes
						check_variable = { JAP_army_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
					}
					AND = {
						JAP_army_faction_is_tier_2 = yes
						check_variable = { JAP_army_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
					}
					AND = {
						JAP_army_faction_is_tier_3 = yes
						check_variable = { JAP_army_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
					}
					JAP_army_faction_is_tier_4 = yes						
				}
			}
			if = {
				limit = {
					OR = {
						AND = {
							JAP_army_faction_is_tier_1 = yes
							check_variable = { JAP_army_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
						}
						AND = {
							JAP_army_faction_is_tier_2 = yes
							check_variable = { JAP_army_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
						}
						AND = {
							JAP_army_faction_is_tier_3 = yes
							check_variable = { JAP_army_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
						}	
						#No need to check if Army Faction is Tier 4 because they ain't getting anything then!			
					}
				}
				custom_effect_tooltip = JAP_small_army_faction_gain_tt
				add_to_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
			}

			JAP_small_naval_faction_loss = yes
			#log = "Only Naval Should be Demoted"
		}
		else_if = { #Army WILL level up but Navy WON'T level down
			limit = { #Checking so that Navy WON'T actually level down
				OR = {
					AND = {
						JAP_naval_faction_is_tier_4 = yes
						check_variable = { JAP_naval_faction_influence_level > JAP_tier_4_top_limit_check }
					}
					AND = {
						JAP_naval_faction_is_tier_3 = yes
						check_variable = { JAP_naval_faction_influence_level > JAP_tier_3_to_tier_4_small_gate }
					}
					AND = {
						JAP_naval_faction_is_tier_2 = yes
						check_variable = { JAP_naval_faction_influence_level > JAP_tier_2_to_tier_3_small_gate }
					}
					JAP_naval_faction_is_tier_1 = yes
				}
			}
			if = {
				limit = {
					OR = {
						AND = {
							JAP_naval_faction_is_tier_4 = yes
							check_variable = { JAP_naval_faction_influence_level > JAP_tier_4_top_limit_check }
						}
						AND = {
							JAP_naval_faction_is_tier_3 = yes
							check_variable = { JAP_naval_faction_influence_level > JAP_tier_3_to_tier_4_small_gate }
						}
						AND = {
							JAP_naval_faction_is_tier_2 = yes
							check_variable = { JAP_naval_faction_influence_level > JAP_tier_2_to_tier_3_small_gate }
						}
						AND = { #Only reduce Navy Influence further if they're above the minimum limit
							JAP_naval_faction_is_tier_1 = yes
							check_variable = { JAP_naval_faction_influence_level > JAP_tier_1_minimum_limit }
						}
					}
				}
				custom_effect_tooltip = JAP_small_naval_faction_loss_tt
				subtract_from_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
			}
			
			JAP_small_army_faction_gain = yes
			#log = "Only Army should be promoted"
		}
		else = { #Army will level UP and Navy will level DOWN
			custom_effect_tooltip = JAP_small_army_faction_gain_tt
			add_to_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
			custom_effect_tooltip = JAP_small_naval_faction_loss_tt
			subtract_from_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
			
			JAP_army_faction_goes_up_and_navy_goes_down = yes
			#log = "Army Goes up, Navy goes Down"
		}
	}
}

#Promote Navy and Demote Army
JAP_small_naval_gain_and_small_army_loss = {
	if = {
		limit = {
			#check_variable = { JAP_naval_faction_influence_level < JAP_tier_4_minimum_limit } #Can promote Army higher
			check_variable = { JAP_army_faction_influence_level > JAP_minimum_faction_level } #Can demote Navy lower
		}
		if = { #Navy WON'T level up but Army MIGHT level down
			limit = { #Checking to make sure Navy WON'T actually level up
				OR = {
					AND = {
						JAP_naval_faction_is_tier_1 = yes
						check_variable = { JAP_naval_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
					}
					AND = {
						JAP_naval_faction_is_tier_2 = yes
						check_variable = { JAP_naval_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
					}
					AND = {
						JAP_naval_faction_is_tier_3 = yes
						check_variable = { JAP_naval_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
					}
					JAP_naval_faction_is_tier_4 = yes						
				}
			}
			if = {
				limit = {
					OR = {
						AND = {
							JAP_naval_faction_is_tier_1 = yes
							check_variable = { JAP_naval_faction_influence_level < JAP_tier_1_to_tier_2_small_gate }
						}
						AND = {
							JAP_naval_faction_is_tier_2 = yes
							check_variable = { JAP_naval_faction_influence_level < JAP_tier_2_to_tier_3_small_gate }
						}
						AND = {
							JAP_naval_faction_is_tier_3 = yes
							check_variable = { JAP_naval_faction_influence_level < JAP_tier_3_to_tier_4_small_gate }
						}	
						#No need to check if Army Faction is Tier 4 because they ain't getting anything then!			
					}
				}
				custom_effect_tooltip = JAP_small_naval_faction_gain_tt
				add_to_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
			}

			JAP_small_army_faction_loss = yes
			#log = "Only Army Should be Demoted"
		}
		else_if = { #Navy WILL level up but Army WON'T level down
			limit = { #Checking so that Army WON'T actually level down
				OR = {
					AND = {
						JAP_army_faction_is_tier_4 = yes
						check_variable = { JAP_army_faction_influence_level > JAP_tier_4_top_limit_check }
					}
					AND = {
						JAP_army_faction_is_tier_3 = yes
						check_variable = { JAP_army_faction_influence_level > JAP_tier_3_to_tier_4_small_gate }
					}
					AND = {
						JAP_army_faction_is_tier_2 = yes
						check_variable = { JAP_army_faction_influence_level > JAP_tier_2_to_tier_3_small_gate }
					}
					JAP_army_faction_is_tier_1 = yes
				}
			}
			if = {
				limit = {
					OR = {
						AND = {
							JAP_army_faction_is_tier_4 = yes
							check_variable = { JAP_army_faction_influence_level > JAP_tier_4_top_limit_check }
						}
						AND = {
							JAP_army_faction_is_tier_3 = yes
							check_variable = { JAP_army_faction_influence_level > JAP_tier_3_to_tier_4_small_gate }
						}
						AND = {
							JAP_army_faction_is_tier_2 = yes
							check_variable = { JAP_army_faction_influence_level > JAP_tier_2_to_tier_3_small_gate }
						}
						AND = { #Only reduce Navy Influence further if they're above the minimum limit
							JAP_army_faction_is_tier_1 = yes
							check_variable = { JAP_army_faction_influence_level > JAP_tier_1_minimum_limit }
						}
					}
				}
				custom_effect_tooltip = JAP_small_army_faction_loss_tt
				subtract_from_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
			}
			
			JAP_small_naval_faction_gain = yes
			#log = "Only Navy should be promoted"
		}
		else = { #Navy will level UP and Army will level DOWN
			custom_effect_tooltip = JAP_small_naval_faction_gain_tt
			add_to_variable = { JAP_naval_faction_influence_level = JAP_small_influence_point }
			custom_effect_tooltip = JAP_small_army_faction_loss_tt
			subtract_from_variable = { JAP_army_faction_influence_level = JAP_small_influence_point }
			
			JAP_naval_faction_goes_up_and_army_goes_down = yes
			#log = "Navy Goes up, Army goes Down"
		}
	}
}


####################################
####################################
	### LEVELING UP AND DOWN ###
####################################
####################################

#First and foremost, we gotta keep track of how many Influential Factions there are, since we don't want more than 2 at the same time
JAP_add_influential_imperial_faction = {
	add_to_variable = { JAP_num_of_influential_imperial_factions = 1 }
	#If there are already 2 Influential Factions, trigger an event to choose which one to boot
	if = { 
		limit = {
			check_variable = { JAP_num_of_influential_imperial_factions > 2 }
		}
		hidden_effect = { set_country_flag = JAP_pending_imperial_influence_decision } #Used to block players from influencing the Imperial Influence system. Remember to clear it!
		country_event = { id = SEA_imperial_influence_events.1 hours = 1 }
		custom_effect_tooltip = generic_skip_one_line_tt
	}
}

###############################################
	### Army Faction Influence Leveling ###
###############################################
#Army Goes Up
JAP_army_faction_goes_up_from_tier_1_to_tier_2 = {

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry
			}
		}

		if = { #Army is EQUAL to Navy
			limit = {
				has_idea = JAP_army_faction_tier_1_equal_navy
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_equal_navy
				add_idea = JAP_army_faction_tier_2_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_equal_army
				add_idea = JAP_naval_faction_tier_1_lesser_1
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_1_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_1
				add_idea = JAP_army_faction_tier_2_equal_navy
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_greater_1
				add_idea = JAP_naval_faction_tier_2_equal_army
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_1_lesser_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_2
				add_idea = JAP_army_faction_tier_2_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_2
				add_idea = JAP_naval_faction_tier_3_greater_1
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_1_lesser_3
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_3
				add_idea = JAP_army_faction_tier_2_lesser_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_3
				add_idea = JAP_naval_faction_tier_3_greater_2
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1 
			add_idea = JAP_army_faction_tier_2
		}
	}
		
}

JAP_army_faction_goes_up_from_tier_2_to_tier_3 = {

	JAP_add_influential_imperial_faction = yes

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = { #Army is EQUAL to Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_equal_navy
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_equal_navy
				add_idea = JAP_army_faction_tier_3_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_equal_army
				add_idea = JAP_naval_faction_tier_2_lesser_1
			}
		}
		else_if = { #Army is GREATER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_greater_1
				add_idea = JAP_army_faction_tier_3_greater_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_1
				add_idea = JAP_naval_faction_tier_2_lesser_2
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_1
				add_idea = JAP_army_faction_tier_3_equal_navy
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_1
				add_idea = JAP_naval_faction_tier_3_equal_army
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_lesser_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_2
				add_idea = JAP_army_faction_tier_3_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_2
				add_idea = JAP_naval_faction_tier_4_greater_1
			}
		}
		
	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2 
			add_idea = JAP_army_faction_tier_3
		}
	}
	
}

JAP_army_faction_goes_up_from_tier_3_to_tier_4 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}
		
		if = { #Army is EQUAL to Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_equal_navy
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_equal_navy
				add_idea = JAP_army_faction_tier_4_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_equal_army
				add_idea = JAP_naval_faction_tier_3_lesser_1
			}
		}
		else_if = { #Army is GREATER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_1
				add_idea = JAP_army_faction_tier_4_greater_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_1
				add_idea = JAP_naval_faction_tier_2_lesser_2
			}
		}
		else_if = { #Army is GREATER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_greater_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_2
				add_idea = JAP_army_faction_tier_4_greater_3
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_2
				add_idea = JAP_naval_faction_tier_1_lesser_3
			}
		}

		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_lesser_1
			}

			JAP_add_influential_imperial_faction = yes
			
			set_variable = { JAP_naval_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates

			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_lesser_1
				add_idea = JAP_army_faction_tier_4_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_1
				add_idea = JAP_naval_faction_tier_3_lesser_1
			}
		}
		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_zaibatsu_faction_tier_4
					has_idea = JAP_government_faction_tier_4
				}
			}

			JAP_add_influential_imperial_faction = yes

			if = {
				limit = {
					has_idea = JAP_zaibatsu_faction_tier_4
				}
				set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_zaibatsu_faction_tier_4
					add_idea = JAP_zaibatsu_faction_tier_3
				}
			}
			if = {
				limit = {
					has_idea = JAP_government_faction_tier_4
				}
				set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_government_faction_tier_4
					add_idea = JAP_government_faction_tier_3
				}
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3 
			add_idea = JAP_army_faction_tier_4
		}

		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_zaibatsu_faction_tier_4
					has_idea = JAP_government_faction_tier_4
					has_idea = JAP_naval_faction_tier_4
				}
			}

			JAP_add_influential_imperial_faction = yes

			if = {
				limit = {
					has_idea = JAP_zaibatsu_faction_tier_4
				}
				set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_zaibatsu_faction_tier_4
					add_idea = JAP_zaibatsu_faction_tier_3
				}
			}
			if = {
				limit = {
					has_idea = JAP_government_faction_tier_4
				}
				set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_government_faction_tier_4
					add_idea = JAP_government_faction_tier_3
				}
			}
			if = {
				limit = {
					has_idea = JAP_naval_faction_tier_4
				}
				set_variable = { JAP_naval_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_naval_faction_tier_4
					add_idea = JAP_naval_faction_tier_3
				}
			}

		}

	}

	
}

#Army Goes Down
JAP_army_faction_goes_down_from_tier_4_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = {
			limit = {
				has_idea = JAP_army_faction_tier_4_greater_3
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_3
				add_idea = JAP_army_faction_tier_3_greater_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_3
				add_idea = JAP_naval_faction_tier_1_lesser_2
			}
		}
		if = {
			limit = {
				has_idea = JAP_army_faction_tier_4_greater_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_2
				add_idea = JAP_army_faction_tier_3_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_2
				add_idea = JAP_naval_faction_tier_2_lesser_1
			}
		}
		if = {
			limit = {
				has_idea = JAP_army_faction_tier_4_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_1
				add_idea = JAP_army_faction_tier_3_equal_navy
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_lesser_1
				add_idea = JAP_naval_faction_tier_3_equal_army
			}
		}
		
	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_4
			add_idea = JAP_army_faction_tier_3
		}
	}

	
}

JAP_army_faction_goes_down_from_tier_3_to_tier_2 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = { #Army is EQUAL to Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_equal_navy
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_equal_navy
				add_idea = JAP_army_faction_tier_2_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_equal_army
				add_idea = JAP_naval_faction_tier_3_greater_1
			}
		}
		else_if = { #Army is GREATER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_1
				add_idea = JAP_army_faction_tier_2_equal_navy
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_1
				add_idea = JAP_naval_faction_tier_2_equal_army
			}
		}
		else_if = { #Army is GREATER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_greater_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_2
				add_idea = JAP_army_faction_tier_2_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_2
				add_idea = JAP_naval_faction_tier_2_lesser_1
			}
		}	
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_3_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_lesser_1
				add_idea = JAP_army_faction_tier_2_lesser_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_1
				add_idea = JAP_naval_faction_tier_4_greater_2
			}
		}
		
	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3
			add_idea = JAP_army_faction_tier_2
		}
	}
	
	
}

JAP_army_faction_goes_down_from_tier_2_to_tier_1 = {

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = { #Army is EQUAL to Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_equal_navy
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_equal_navy
				add_idea = JAP_army_faction_tier_1_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_equal_army
				add_idea = JAP_naval_faction_tier_2_greater_1
			}
		}
		else_if = { #Army is GREATER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_greater_1
				add_idea = JAP_army_faction_tier_1_equal_navy
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_1
				add_idea = JAP_naval_faction_tier_1_equal_army
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_1
				add_idea = JAP_army_faction_tier_1_lesser_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_1
				add_idea = JAP_naval_faction_tier_3_greater_2
			}
		}
		else_if = { #Army is LESSER than Navy
			limit = {
				has_idea = JAP_army_faction_tier_2_lesser_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_2
				add_idea = JAP_army_faction_tier_1_lesser_3
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_2
				add_idea = JAP_naval_faction_tier_4_greater_3
			}
		}
		
	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2
			add_idea = JAP_army_faction_tier_1
		}
	}

	
}

###############################################
	### Naval Faction Influnce Leveling ###
###############################################	
#Naval Goes Up
JAP_naval_faction_goes_up_from_tier_1_to_tier_2 = {

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}
		
		if = { #Navy is EQUAL to Army
			limit = {
				has_idea = JAP_naval_faction_tier_1_equal_army
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_equal_army
				add_idea = JAP_naval_faction_tier_2_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_equal_navy
				add_idea = JAP_army_faction_tier_1_lesser_1
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_1_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_1
				add_idea = JAP_naval_faction_tier_2_equal_army
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_greater_1
				add_idea = JAP_army_faction_tier_2_equal_navy
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_1_lesser_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_2
				add_idea = JAP_naval_faction_tier_2_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_2
				add_idea = JAP_army_faction_tier_3_greater_1
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_1_lesser_3
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_1_lesser_3
				add_idea = JAP_naval_faction_tier_1_lesser_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_3
				add_idea = JAP_army_faction_tier_3_greater_2
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1 
			add_idea = JAP_naval_faction_tier_2
		}
	}

	
}

JAP_naval_faction_goes_up_from_tier_2_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = { #Navy is EQUAL to Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_equal_army
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_equal_army
				add_idea = JAP_naval_faction_tier_3_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_equal_navy
				add_idea = JAP_army_faction_tier_2_lesser_1
			}
		}
		else_if = { #Navy is GREATER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_greater_1
				add_idea = JAP_naval_faction_tier_3_greater_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_1
				add_idea = JAP_army_faction_tier_2_lesser_2
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_1
				add_idea = JAP_naval_faction_tier_3_equal_army
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_1
				add_idea = JAP_army_faction_tier_3_equal_navy
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_lesser_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_2
				add_idea = JAP_naval_faction_tier_3_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_2
				add_idea = JAP_army_faction_tier_4_greater_1
			}
		}
		
	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2 
			add_idea = JAP_naval_faction_tier_3
		}
	}
	
}

JAP_naval_faction_goes_up_from_tier_3_to_tier_4 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}
		
		if = { #Navy is EQUAL to Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_equal_army
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_equal_army
				add_idea = JAP_naval_faction_tier_4_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_equal_navy
				add_idea = JAP_army_faction_tier_3_lesser_1
			}
		}
		else_if = { #Navy is GREATER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_1
				add_idea = JAP_naval_faction_tier_4_greater_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_1
				add_idea = JAP_army_faction_tier_2_lesser_2
			}
		}
		else_if = { #Navy is GREATER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_greater_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_2
				add_idea = JAP_naval_faction_tier_4_greater_3
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_2
				add_idea = JAP_army_faction_tier_1_lesser_3
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_lesser_1
			}
			
			JAP_add_influential_imperial_faction = yes

			#Demote Army Faction
			set_variable = { JAP_army_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
			
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_lesser_1
				add_idea = JAP_naval_faction_tier_4_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_1
				add_idea = JAP_army_faction_tier_3_lesser_1
			}
		}
		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_zaibatsu_faction_tier_4
					has_idea = JAP_government_faction_tier_4
				}
			}

			add_to_variable = { JAP_num_of_influential_imperial_factions = 1 }
			if = { #This is a fallback check and shouldn't really happen
				limit = {
					check_variable = { JAP_num_of_influential_imperial_factions > 2 }
				}
				hidden_effect = { set_country_flag = JAP_pending_imperial_influence_decision } #Used to block players from influencing the Imperial Influence system. Remember to clear it!
				country_event = { id = SEA_imperial_influence_events.1 hours = 1 }
				custom_effect_tooltip = generic_skip_one_line_tt
			}

			if = {
				limit = {
					has_idea = JAP_zaibatsu_faction_tier_4
				}
				set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_zaibatsu_faction_tier_4
					add_idea = JAP_zaibatsu_faction_tier_3
				}
			}
			if = {
				limit = {
					has_idea = JAP_government_faction_tier_4
				}
				set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_government_faction_tier_4
					add_idea = JAP_government_faction_tier_3
				}
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3 
			add_idea = JAP_naval_faction_tier_4
		}

		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_zaibatsu_faction_tier_4
					has_idea = JAP_government_faction_tier_4
					has_idea = JAP_army_faction_tier_4
				}
			}

			JAP_add_influential_imperial_faction = yes

			if = {
				limit = {
					has_idea = JAP_zaibatsu_faction_tier_4
				}
				set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_zaibatsu_faction_tier_4
					add_idea = JAP_zaibatsu_faction_tier_3
				}
			}
			if = {
				limit = {
					has_idea = JAP_government_faction_tier_4
				}
				set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_government_faction_tier_4
					add_idea = JAP_government_faction_tier_3
				}
			}
			if = {
				limit = {
					has_idea = JAP_army_faction_tier_4
				}
				set_variable = { JAP_army_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_army_faction_tier_4
					add_idea = JAP_army_faction_tier_3
				}
			}

		}

	}

	
}

#Naval Goes Down
JAP_naval_faction_goes_down_from_tier_4_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = {
			limit = {
				has_idea = JAP_naval_faction_tier_4_greater_3
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_3
				add_idea = JAP_naval_faction_tier_3_greater_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_3
				add_idea = JAP_army_faction_tier_1_lesser_2
			}
		}
		if = {
			limit = {
				has_idea = JAP_naval_faction_tier_4_greater_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_2
				add_idea = JAP_naval_faction_tier_3_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_2
				add_idea = JAP_army_faction_tier_2_lesser_1
			}
		}
		if = {
			limit = {
				has_idea = JAP_naval_faction_tier_4_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4_greater_1
				add_idea = JAP_naval_faction_tier_3_equal_army
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_lesser_1
				add_idea = JAP_army_faction_tier_3_equal_navy
			}
		}
		
	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_4
			add_idea = JAP_naval_faction_tier_3
		}
	}

	
}

JAP_naval_faction_goes_down_from_tier_3_to_tier_2 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}
		
		if = { #Navy is EQUAL to Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_equal_army
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_equal_army
				add_idea = JAP_naval_faction_tier_2_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_equal_navy
				add_idea = JAP_army_faction_tier_3_greater_1
			}
		}
		else_if = { #Navy is GREATER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_1
				add_idea = JAP_naval_faction_tier_2_equal_army
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_lesser_1
				add_idea = JAP_army_faction_tier_2_equal_navy
			}
		}
		else_if = { #Navy is GREATER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_greater_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_greater_2
				add_idea = JAP_naval_faction_tier_2_greater_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_2
				add_idea = JAP_army_faction_tier_2_lesser_1
			}
		}	
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_3_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3_lesser_1
				add_idea = JAP_naval_faction_tier_2_lesser_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_1
				add_idea = JAP_army_faction_tier_4_greater_2
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3
			add_idea = JAP_naval_faction_tier_2
		}
	}

	
}

JAP_naval_faction_goes_down_from_tier_2_to_tier_1 = {

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}
		
		if = { #Navy is EQUAL to Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_equal_army
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_equal_army
				add_idea = JAP_naval_faction_tier_1_lesser_1
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2_equal_navy
				add_idea = JAP_army_faction_tier_2_greater_1
			}
		}
		else_if = { #Navy is GREATER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_greater_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_greater_1
				add_idea = JAP_naval_faction_tier_1_equal_army
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_1_lesser_1
				add_idea = JAP_army_faction_tier_1_equal_navy
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_lesser_1
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_1
				add_idea = JAP_naval_faction_tier_1_lesser_2
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3_greater_1
				add_idea = JAP_army_faction_tier_3_greater_2
			}
		}
		else_if = { #Navy is LESSER than Army
			limit = {
				has_idea = JAP_naval_faction_tier_2_lesser_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2_lesser_2
				add_idea = JAP_naval_faction_tier_1_lesser_3
			}
			custom_effect_tooltip = JAP_interservice_rivalry_effects
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4_greater_2
				add_idea = JAP_army_faction_tier_4_greater_3
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2
			add_idea = JAP_naval_faction_tier_1
		}
	}

	
}

###################################################
	### Zaibatsu Faction Influnce Leveling ###
###################################################	
#Zaibatsu Goes Up
JAP_zaibatsu_faction_goes_up_from_tier_1_to_tier_2 = {
	swap_ideas = {
		remove_idea = JAP_zaibatsu_faction_tier_1
		add_idea = JAP_zaibatsu_faction_tier_2
	}
}

JAP_zaibatsu_faction_goes_up_from_tier_2_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes

	swap_ideas = {
		remove_idea = JAP_zaibatsu_faction_tier_2
		add_idea = JAP_zaibatsu_faction_tier_3
	}
}

JAP_zaibatsu_faction_goes_up_from_tier_3_to_tier_4 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	swap_ideas = {
		remove_idea = JAP_zaibatsu_faction_tier_3
		add_idea = JAP_zaibatsu_faction_tier_4
	}

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_government_faction_tier_4
					JAP_army_faction_is_tier_4 = yes
					JAP_naval_faction_is_tier_4 = yes
				}
			}

			JAP_add_influential_imperial_faction = yes

			#Demote the Dominant Faction:
			if = {
				limit = {
					has_idea = JAP_government_faction_tier_4
				}
				set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_government_faction_tier_4
					add_idea = JAP_government_faction_tier_3
				}
			}
			else_if = {
				limit = {
					JAP_army_faction_is_tier_4 = yes
				}
				set_variable = { JAP_army_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_army_faction_tier_4_greater_3
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4_greater_3
						add_idea = JAP_army_faction_tier_3_greater_2
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_1_lesser_3
						add_idea = JAP_naval_faction_tier_1_lesser_2
					}
				}
				else_if = {
					limit = {
						has_idea = JAP_army_faction_tier_4_greater_2
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4_greater_2
						add_idea = JAP_army_faction_tier_3_greater_1
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_2_lesser_2
						add_idea = JAP_naval_faction_tier_2_lesser_1
					}
				}
				else_if = {
					limit = {
						has_idea = JAP_army_faction_tier_4_greater_1
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4_greater_1
						add_idea = JAP_army_faction_tier_3_equal_navy
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_3_lesser_1
						add_idea = JAP_naval_faction_tier_3_equal_army
					}
				}
			}
			else_if = {
				limit = {
					JAP_naval_faction_is_tier_4 = yes
				}
				set_variable = { JAP_naval_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4_greater_3
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4_greater_3
						add_idea = JAP_naval_faction_tier_3_greater_2
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_1_lesser_3
						add_idea = JAP_army_faction_tier_1_lesser_2
					}
				}
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4_greater_2
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4_greater_2
						add_idea = JAP_naval_faction_tier_3_greater_1
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_2_lesser_2
						add_idea = JAP_army_faction_tier_2_lesser_1
					}
				}
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4_greater_1
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4_greater_1
						add_idea = JAP_naval_faction_tier_3_equal_army
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_3_lesser_1
						add_idea = JAP_army_faction_tier_3_equal_navy
					}
				}
			}
		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {
		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_government_faction_tier_4
					JAP_army_faction_is_tier_4 = yes
					JAP_naval_faction_is_tier_4 = yes
				}
			}

			JAP_add_influential_imperial_faction = yes

			#Demote the Dominant Faction:
			if = {
				limit = {
					has_idea = JAP_government_faction_tier_4
				}
				set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_government_faction_tier_4
					add_idea = JAP_government_faction_tier_3
				}
			}
			else_if = {
				limit = {
					JAP_army_faction_is_tier_4 = yes
				}
				set_variable = { JAP_army_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_army_faction_tier_4
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4
						add_idea = JAP_army_faction_tier_3
					}
				}
			}
			else_if = {
				limit = {
					JAP_naval_faction_is_tier_4 = yes
				}
				set_variable = { JAP_naval_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4
						add_idea = JAP_naval_faction_tier_3
					}
				}
			}
		}
	}
	

}

#Zaibatsu Goes Down
JAP_zaibatsu_faction_goes_down_from_tier_4_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes

	swap_ideas = {
		remove_idea = JAP_zaibatsu_faction_tier_4
		add_idea = JAP_zaibatsu_faction_tier_3
	}
}

JAP_zaibatsu_faction_goes_down_from_tier_3_to_tier_2 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	swap_ideas = {
		remove_idea = JAP_zaibatsu_faction_tier_3
		add_idea = JAP_zaibatsu_faction_tier_2
	}
}

JAP_zaibatsu_faction_goes_down_from_tier_2_to_tier_1 = {
	swap_ideas = {
		remove_idea = JAP_zaibatsu_faction_tier_2
		add_idea = JAP_zaibatsu_faction_tier_1
	}
}

####################################################
	### Government Faction Influnce Leveling ###
####################################################
#Government Goes Up
JAP_government_faction_goes_up_from_tier_1_to_tier_2 = {
	swap_ideas = {
		remove_idea = JAP_government_faction_tier_1
		add_idea = JAP_government_faction_tier_2
	}
}

JAP_government_faction_goes_up_from_tier_2_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes
	
	swap_ideas = {
		remove_idea = JAP_government_faction_tier_2
		add_idea = JAP_government_faction_tier_3
	}
}

JAP_government_faction_goes_up_from_tier_3_to_tier_4 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	swap_ideas = {
		remove_idea = JAP_government_faction_tier_3
		add_idea = JAP_government_faction_tier_4
	}

	IF = {
		limit = {
			NOT = {
				has_completed_focus = JAP_end_the_interservice_rivalry 
			}
		}

		#Demote the Dominant Faction:
		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_zaibatsu_faction_tier_4
					JAP_army_faction_is_tier_4 = yes
					JAP_naval_faction_is_tier_4 = yes
				}
			}

			JAP_add_influential_imperial_faction = yes 

			if = {
				limit = {
					has_idea = JAP_zaibatsu_faction_tier_4
				}
				set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_zaibatsu_faction_tier_4
					add_idea = JAP_zaibatsu_faction_tier_3
				}
			}
			else_if = {
				limit = {
					JAP_army_faction_is_tier_4 = yes
				}
				set_variable = { JAP_army_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_army_faction_tier_4_greater_3
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4_greater_3
						add_idea = JAP_army_faction_tier_3_greater_2
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_1_lesser_3
						add_idea = JAP_naval_faction_tier_1_lesser_2
					}
				}
				else_if = {
					limit = {
						has_idea = JAP_army_faction_tier_4_greater_2
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4_greater_2
						add_idea = JAP_army_faction_tier_3_greater_1
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_2_lesser_2
						add_idea = JAP_naval_faction_tier_2_lesser_1
					}
				}
				else_if = {
					limit = {
						has_idea = JAP_army_faction_tier_4_greater_1
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4_greater_1
						add_idea = JAP_army_faction_tier_3_equal_navy
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_3_lesser_1
						add_idea = JAP_naval_faction_tier_3_equal_army
					}
				}
			}
			else_if = {
				limit = {
					JAP_naval_faction_is_tier_4 = yes
				}
				set_variable = { JAP_naval_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4_greater_3
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4_greater_3
						add_idea = JAP_naval_faction_tier_3_greater_2
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_1_lesser_3
						add_idea = JAP_army_faction_tier_1_lesser_2
					}
				}
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4_greater_2
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4_greater_2
						add_idea = JAP_naval_faction_tier_3_greater_1
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_2_lesser_2
						add_idea = JAP_army_faction_tier_2_lesser_1
					}
				}
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4_greater_1
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4_greater_1
						add_idea = JAP_naval_faction_tier_3_equal_army
					}
					custom_effect_tooltip = JAP_interservice_rivalry_effects
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_3_lesser_1
						add_idea = JAP_army_faction_tier_3_equal_navy
					}
				}
			}

		}

	}
	# If Army and Navy no longer compare themselves to eachother 
	ELSE = {

		#Demote the Dominant Faction:
		if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
			limit = {
				OR = {
					has_idea = JAP_zaibatsu_faction_tier_4
					JAP_army_faction_is_tier_4 = yes
					JAP_naval_faction_is_tier_4 = yes
				}
			}

			JAP_add_influential_imperial_faction = yes 

			if = {
				limit = {
					has_idea = JAP_zaibatsu_faction_tier_4
				}
				set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				swap_ideas = {
					remove_idea = JAP_zaibatsu_faction_tier_4
					add_idea = JAP_zaibatsu_faction_tier_3
				}
			}
			else_if = {
				limit = {
					JAP_army_faction_is_tier_4 = yes
				}
				set_variable = { JAP_army_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_army_faction_tier_4
					}
					swap_ideas = {
						remove_idea = JAP_army_faction_tier_4
						add_idea = JAP_army_faction_tier_3
					}
				}
			}
			else_if = {
				limit = {
					JAP_naval_faction_is_tier_4 = yes
				}
				set_variable = { JAP_naval_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
				if = {
					limit = {
						has_idea = JAP_naval_faction_tier_4
					}
					swap_ideas = {
						remove_idea = JAP_naval_faction_tier_4
						add_idea = JAP_naval_faction_tier_3
					}
				}
			}

		}

	}

}

#Governmant Goes Down
JAP_government_faction_goes_down_from_tier_4_to_tier_3 = {
	
	JAP_add_influential_imperial_faction = yes
	
	swap_ideas = {
		remove_idea = JAP_government_faction_tier_4
		add_idea = JAP_government_faction_tier_3
	}
}

JAP_government_faction_goes_down_from_tier_3_to_tier_2 = {

	subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

	swap_ideas = {
		remove_idea = JAP_government_faction_tier_3
		add_idea = JAP_government_faction_tier_2
	}
}

JAP_government_faction_goes_down_from_tier_2_to_tier_1 = {
	swap_ideas = {
		remove_idea = JAP_government_faction_tier_2
		add_idea = JAP_government_faction_tier_1
	}
}

####################################################
####################################################
	### PROMOTING AND DEMOTING ARMY AND NAVY ###
####################################################
####################################################

JAP_army_faction_goes_up_and_navy_goes_down = {
	#Army and Navy cannot be equals if one has to go down while the other one goes up - that functionality is handled elsewhere
	if = { #Army Tier 1 is LESSER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_1_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_1
			add_idea = JAP_army_faction_tier_2_greater_1
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_greater_1
			add_idea = JAP_naval_faction_tier_1_lesser_1
		}
	}
	else_if = { #Army Tier 1 is LESSER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_1_lesser_2
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_2
			add_idea = JAP_army_faction_tier_2_equal_navy
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_greater_2
			add_idea = JAP_naval_faction_tier_2_equal_army
		}
	}
	else_if = { #Army Tier 1 is LESSER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_1_lesser_3
		}

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_3
			add_idea = JAP_army_faction_tier_2_lesser_1
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_4_greater_3
			add_idea = JAP_naval_faction_tier_3_greater_1
		}
	}
	else_if = { #Army Tier 1 (no rivalry)
		limit = {
			has_idea = JAP_army_faction_tier_1
		}

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1
			add_idea = JAP_army_faction_tier_2
		}

		IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_4
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4
				add_idea = JAP_naval_faction_tier_3
			}
			JAP_add_influential_imperial_faction = yes
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_3
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3
				add_idea = JAP_naval_faction_tier_2
			}
			subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2
				add_idea = JAP_naval_faction_tier_1
			}
		}
		
	}
	#ARMY TIER 2
	else_if = { #Army Tier 2 Tier 2 is EQUAL to Navy
		limit = {
			has_idea = JAP_army_faction_tier_2_equal_navy
		}
	
		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_equal_navy
			add_idea = JAP_army_faction_tier_3_greater_2
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_equal_army
			add_idea = JAP_naval_faction_tier_1_lesser_2
		}
	}
	else_if = { #Army Tier 2 is GREATER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_2_greater_1
		}

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_greater_1
			add_idea = JAP_army_faction_tier_3_greater_2
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_1
			add_idea = JAP_naval_faction_tier_1_lesser_2
		}
	}
	else_if = { #Army Tier 2 is LESSER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_2_lesser_1
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_lesser_1
			add_idea = JAP_army_faction_tier_3_greater_1
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_greater_1
			add_idea = JAP_naval_faction_tier_2_lesser_1
		}
	}
	else_if = { #Army Tier 2 is LESSER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_2_lesser_2
		}

		#We're gonna have to add an extra Influential Faction point here
		add_to_variable = { JAP_num_of_influential_imperial_factions = 1 }

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_lesser_2
			add_idea = JAP_army_faction_tier_3_equal_navy
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_4_greater_2
			add_idea = JAP_naval_faction_tier_3_equal_army
		}
	}
	else_if = { #Army Tier 2 (no rivalry)
		limit = {
			has_idea = JAP_army_faction_tier_2
		}

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2
			add_idea = JAP_army_faction_tier_3
		}
		
		IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_4
			}
			#We're gonna have to add an extra Influential Faction point here
			add_to_variable = { JAP_num_of_influential_imperial_factions = 1 }
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4
				add_idea = JAP_naval_faction_tier_3
			}
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_3
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3
				add_idea = JAP_naval_faction_tier_2
			}
			subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2
				add_idea = JAP_naval_faction_tier_1
			}
		}

		JAP_add_influential_imperial_faction = yes

	}
	#ARMY TIER 3
	else_if = { #Army is EQUAL to Navy
		limit = {
			has_idea = JAP_army_faction_tier_3_equal_navy
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 2 } #Gotta keep track of how many Influential Factions there are! And here, TWO Factions are leaving the Influential Level

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_equal_navy
			add_idea = JAP_army_faction_tier_4_greater_2
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_equal_army
			add_idea = JAP_naval_faction_tier_2_lesser_2
		}
	}
	else_if = { #Army is GREATER than Navy
		limit = {
			has_idea = JAP_army_faction_tier_3_greater_1
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_greater_1
			add_idea = JAP_army_faction_tier_4_greater_3
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_lesser_1
			add_idea = JAP_naval_faction_tier_1_lesser_3
		}
	}
	else_if = { #Army is tier 3 (no rivalry)
		limit = {
			has_idea = JAP_army_faction_tier_3
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3
			add_idea = JAP_army_faction_tier_4
		}
		
		IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_4
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_4
				add_idea = JAP_naval_faction_tier_3
			}
			JAP_add_influential_imperial_faction = yes
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_3
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_3
				add_idea = JAP_naval_faction_tier_2
			}
			subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_naval_faction_tier_2
			}
			swap_ideas = {
				remove_idea = JAP_naval_faction_tier_2
				add_idea = JAP_naval_faction_tier_1
			}
		}

	}
	#No need to check if the Naval faction is Tier 1 here since they cannot be demoted further. This is handled elsewhere
	if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
		limit = {
			OR = {
				has_idea = JAP_zaibatsu_faction_tier_4
				has_idea = JAP_government_faction_tier_4
			}
		}

		JAP_add_influential_imperial_faction = yes

		if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_4
			}
			set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
			swap_ideas = {
				remove_idea = JAP_zaibatsu_faction_tier_4
				add_idea = JAP_zaibatsu_faction_tier_3
			}
		}
		if = {
			limit = {
				has_idea = JAP_government_faction_tier_4
			}
			set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
			swap_ideas = {
				remove_idea = JAP_government_faction_tier_4
				add_idea = JAP_government_faction_tier_3
			}
		}
	}

}

JAP_naval_faction_goes_up_and_army_goes_down = {
	#Army and Navy cannot be equals if one has to go down while the other one goes up - that functionality is handled elsewhere
	if = { #Navy Tier 1 is LESSER than Army
		limit = {
			has_idea = JAP_naval_faction_tier_1_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_1
			add_idea = JAP_naval_faction_tier_2_greater_1
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_greater_1
			add_idea = JAP_army_faction_tier_1_lesser_1
		}
	}
	else_if = { #Navy Tier 1 is LESSER than Army
		limit = {
			has_idea = JAP_naval_faction_tier_1_lesser_2
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_2
			add_idea = JAP_naval_faction_tier_2_equal_army
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_greater_2
			add_idea = JAP_army_faction_tier_2_equal_navy
		}
	}
	else_if = { #Navy Tier 1 is LESSER than Army
		limit = {
			has_idea = JAP_naval_faction_tier_1_lesser_3
		}

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_3
			add_idea = JAP_naval_faction_tier_2_lesser_1
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_4_greater_3
			add_idea = JAP_army_faction_tier_3_greater_1
		}
	}
	else_if = { #Navy Tier 1 (no rivalry)
		limit = {
			has_idea = JAP_naval_faction_tier_1
		}

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1
			add_idea = JAP_naval_faction_tier_2
		}

		IF = {
			limit = {
				has_idea = JAP_army_faction_tier_4
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4
				add_idea = JAP_army_faction_tier_3
			}
			JAP_add_influential_imperial_faction = yes
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_army_faction_tier_3
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3
				add_idea = JAP_army_faction_tier_2
			}
			subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_army_faction_tier_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2
				add_idea = JAP_army_faction_tier_1
			}
		}

	}
	#NAVY TIER 2
	else_if = { #Navy Tier 2 Tier 2 is EQUAL to Navy
		limit = {
			has_idea = JAP_naval_faction_tier_2_equal_army
		}
	
		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_equal_army
			add_idea = JAP_naval_faction_tier_3_greater_2
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_equal_navy
			add_idea = JAP_army_faction_tier_1_lesser_2
		}
	}
	else_if = { #Navy Tier 2 is GREATER than Navy
		limit = {
			has_idea = JAP_naval_faction_tier_2_greater_1
		}

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_greater_1
			add_idea = JAP_naval_faction_tier_3_greater_2
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_1
			add_idea = JAP_army_faction_tier_1_lesser_2
		}
	}
	else_if = { #Navy Tier 2 is LESSER than Navy
		limit = {
			has_idea = JAP_naval_faction_tier_2_lesser_1
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_lesser_1
			add_idea = JAP_naval_faction_tier_3_greater_1
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_greater_1
			add_idea = JAP_army_faction_tier_2_lesser_1
		}
	}
	else_if = { #Navy Tier 2 is LESSER than Navy
		limit = {
			has_idea = JAP_naval_faction_tier_2_lesser_2
		}

		#We're gonna have to add an extra Influential Faction point here
		add_to_variable = { JAP_num_of_influential_imperial_factions = 1 }

		JAP_add_influential_imperial_faction = yes

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_lesser_2
			add_idea = JAP_naval_faction_tier_3_equal_army
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_4_greater_2
			add_idea = JAP_army_faction_tier_3_equal_navy
		}
	}
	else_if = { #Navy Tier 2 (no rivalry)
		limit = {
			has_idea = JAP_naval_faction_tier_2
		}

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2
			add_idea = JAP_naval_faction_tier_3
		}
		
		IF = {
			limit = {
				has_idea = JAP_army_faction_tier_4
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4
				add_idea = JAP_army_faction_tier_3
			}
			#We're gonna have to add an extra Influential Faction point here
			add_to_variable = { JAP_num_of_influential_imperial_factions = 1 }
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_army_faction_tier_3
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3
				add_idea = JAP_army_faction_tier_2
			}
			subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 }  #Gotta keep track of how many Influential Factions there are!
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_army_faction_tier_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2
				add_idea = JAP_army_faction_tier_1
			}
		}

		JAP_add_influential_imperial_faction = yes

	}
	#NAVY TIER 3
	else_if = { #Army is EQUAL to Navy
		limit = {
			has_idea = JAP_naval_faction_tier_3_equal_army
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 2 } #Gotta keep track of how many Influential Factions there are! And here, TWO Factions are leaving the Influential Level

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_equal_army
			add_idea = JAP_naval_faction_tier_4_greater_2
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_equal_navy
			add_idea = JAP_army_faction_tier_2_lesser_2
		}
	}
	else_if = { #Army is GREATER than Navy
		limit = {
			has_idea = JAP_naval_faction_tier_3_greater_1
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_greater_1
			add_idea = JAP_naval_faction_tier_4_greater_3
		}
		custom_effect_tooltip = JAP_interservice_rivalry_effects
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_lesser_1
			add_idea = JAP_army_faction_tier_1_lesser_3
		}
	}
	else_if = { # Navy tier 3 (no rivalry)
		limit = {
			has_idea = JAP_naval_faction_tier_3
		}

		subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!

		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3
			add_idea = JAP_naval_faction_tier_4
		}
		
		IF = {
			limit = {
				has_idea = JAP_army_faction_tier_4
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_4
				add_idea = JAP_army_faction_tier_3
			}
			JAP_add_influential_imperial_faction = yes
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_army_faction_tier_3
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_3
				add_idea = JAP_army_faction_tier_2
			}
			subtract_from_variable = { JAP_num_of_influential_imperial_factions = 1 } #Gotta keep track of how many Influential Factions there are!
		}
		ELSE_IF = {
			limit = {
				has_idea = JAP_army_faction_tier_2
			}
			swap_ideas = {
				remove_idea = JAP_army_faction_tier_2
				add_idea = JAP_army_faction_tier_1
			}
		}
		
	}
	#No need to check if the Naval faction is Tier 1 here since they cannot be demoted further. This is handled elsewhere
	if = { #Gotta check if there already is a Tier 4 Faction; in that case they need to be demoted to Tier 3
		limit = {
			OR = {
				has_idea = JAP_zaibatsu_faction_tier_4
				has_idea = JAP_government_faction_tier_4
			}
		}

		JAP_add_influential_imperial_faction = yes

		if = {
			limit = {
				has_idea = JAP_zaibatsu_faction_tier_4
			}
			set_variable = { JAP_zaibatsu_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
			swap_ideas = {
				remove_idea = JAP_zaibatsu_faction_tier_4
				add_idea = JAP_zaibatsu_faction_tier_3
			}
		}
		if = {
			limit = {
				has_idea = JAP_government_faction_tier_4
			}
			set_variable = { JAP_government_faction_influence_level = JAP_tier_3_to_tier_4_small_gate } #Sets the Influence Level to a variable already used to check tier gates
			swap_ideas = {
				remove_idea = JAP_government_faction_tier_4
				add_idea = JAP_government_faction_tier_3
			}
		}
	}

}

JAP_army_faction_swap_away_from_interservice_rivalry_effect = {
	
	## ON TIER 1 ##
	IF = {
		limit = {
			has_idea = JAP_army_faction_tier_1_equal_navy
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_equal_navy
			add_idea = JAP_army_faction_tier_1
		}	
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_1_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_1
			add_idea = JAP_army_faction_tier_1
		}	
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_1_lesser_2
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_2
			add_idea = JAP_army_faction_tier_1
		}	
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_1_lesser_3
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_1_lesser_3
			add_idea = JAP_army_faction_tier_1
		}	
	}
	## ON TIER 2 ##
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_2_equal_navy
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_equal_navy
			add_idea = JAP_army_faction_tier_2
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_2_greater_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_greater_1
			add_idea = JAP_army_faction_tier_2
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_2_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_lesser_1
			add_idea = JAP_army_faction_tier_2
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_2_lesser_2
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_2_lesser_2
			add_idea = JAP_army_faction_tier_2
		}
	}
	## ON TIER 3 ##
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_3_equal_navy
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_equal_navy
			add_idea = JAP_army_faction_tier_3
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_3_greater_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_greater_1
			add_idea = JAP_army_faction_tier_3
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_3_greater_2
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_greater_2
			add_idea = JAP_army_faction_tier_3
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_3_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_3_lesser_1
			add_idea = JAP_army_faction_tier_3
		}
	}
	## ON TIER 4 ##
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_4_greater_1
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_4_greater_1
			add_idea = JAP_army_faction_tier_4
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_4_greater_2
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_4_greater_2
			add_idea = JAP_army_faction_tier_4
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_army_faction_tier_4_greater_3
		}
		swap_ideas = {
			remove_idea = JAP_army_faction_tier_4_greater_3
			add_idea = JAP_army_faction_tier_4
		}
	}

}

JAP_naval_faction_swap_away_from_interservice_rivalry_effect = {
	
	## ON TIER 1 ##
	IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_1_equal_army
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_equal_army
			add_idea = JAP_naval_faction_tier_1
		}	
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_1_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_1
			add_idea = JAP_naval_faction_tier_1
		}	
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_1_lesser_2
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_2
			add_idea = JAP_naval_faction_tier_1
		}	
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_1_lesser_3
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_1_lesser_3
			add_idea = JAP_naval_faction_tier_1
		}	
	}
	## ON TIER 2 ##
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_2_equal_army
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_equal_army
			add_idea = JAP_naval_faction_tier_2
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_2_greater_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_greater_1
			add_idea = JAP_naval_faction_tier_2
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_2_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_lesser_1
			add_idea = JAP_naval_faction_tier_2
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_2_lesser_2
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_2_lesser_2
			add_idea = JAP_naval_faction_tier_2
		}
	}
	## ON TIER 3 ##
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_3_equal_army
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_equal_army
			add_idea = JAP_naval_faction_tier_3
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_3_greater_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_greater_1
			add_idea = JAP_naval_faction_tier_3
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_3_greater_2
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_greater_2
			add_idea = JAP_naval_faction_tier_3
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_3_lesser_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_3_lesser_1
			add_idea = JAP_naval_faction_tier_3
		}
	}
	## ON TIER 4 ##
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_4_greater_1
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_4_greater_1
			add_idea = JAP_naval_faction_tier_4
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_4_greater_2
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_4_greater_2
			add_idea = JAP_naval_faction_tier_4
		}
	}
	ELSE_IF = {
		limit = {
			has_idea = JAP_naval_faction_tier_4_greater_3
		}
		swap_ideas = {
			remove_idea = JAP_naval_faction_tier_4_greater_3
			add_idea = JAP_naval_faction_tier_4
		}
	}

}

########################################
	### INTERNAL FACTION DEMANDS ###
########################################

JAP_faction_demand_activation_effects = {
	add_to_variable = { JAP_num_of_faction_demands = 1 }
	add_to_variable = { JAP_num_of_faction_demands_total = 1 }

	set_country_flag = { #This is needed so we don't spam the player with these events
		flag = JAP_faction_demands_cooldown_flag
		days = 200
		value = 1
	}
}

JAP_faction_demand_finalize_mission_effect = { #Sets flags and everything necessary to end a mission and keep track of ongoing missions, etc.
	subtract_from_variable = { JAP_num_of_faction_demands = 1 }
	add_to_variable = { JAP_faction_demand_number_of_missions_resolved = 1 }
}

JAP_faction_demand_add_to_successful_missions = {
	add_to_variable = { JAP_faction_demand_successful_missions = 1 }
	
}

JAP_faction_demand_add_to_failed_missions = {
	add_to_variable = { JAP_faction_demand_failed_missions = 1 }
}
