ALB_albanian_independence_movement = {
	ALB_organize_rebellion = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = { original_tag = ALB }
		custom_cost_text = 250_infantry_equipment_1
		custom_cost_trigger = { has_equipment = { infantry_equipment > 249 } }
		days_remove = 70
		cancel_trigger = { controls_state = FROM }
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					ALB_is_kosovar_state = yes
					ALB_is_northern_state = yes
					ALB_is_central_state = yes
					ALB_is_southern_state = yes
				}
				NOT = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
				}
			}
		}
		visible = {
			OR = {
				NOT = { has_dynamic_modifier = { modifier = ALB_albanian_society_bad } }
				AND = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_kosovar_state = yes }
					FROM = {
						OR = {
							ALB_is_kosovar_state = yes
							has_state_flag = ALB_can_organize_uprisings
							AND = {
								ALB_is_northern_state = yes
								controller = { has_country_flag = ALB_can_organize_northern_uprisings }
							}
						}
					}
				}
				AND = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_northern_state = yes }
					FROM = {
						OR = {
							ALB_is_northern_state = yes
							has_state_flag = ALB_can_organize_uprisings
							AND = {
								ALB_is_kosovar_state = yes
								controller = { has_country_flag = ALB_can_organize_northern_uprisings }
							}
						}
					}
				}
				AND = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_central_state = yes }
					FROM = {
						OR = {
							ALB_is_central_state = yes
							has_state_flag = ALB_can_organize_uprisings
						}
					}
				}
				AND = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_southern_state = yes }
					FROM = {
						OR = {
							ALB_is_southern_state = yes
							has_state_flag = ALB_can_organize_uprisings
						}
					}
				}
			}
		}
		on_map_mode = map_only
		complete_effect = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -250
				}
				if = {
					limit = {
						FROM = {
							controller = {
								intel_level_over = { 
									target = ALB
									civilian_intel > 0.2
								}
							}
						}
					}
					FROM = { controller = { activate_mission = other_organize_rebellion } }
				}
				if = {
					limit = {
						FROM = {
							controller = {
								intel_level_over = { 
									target = ALB
									civilian_intel > 0.5
								}
							}
						}
					}
					FROM = { controller = { country_event = albania.7 } }
				}
				FROM = { set_variable = { global.albanian_resistance_state = THIS } }
			}
		}
		remove_effect = {
			effect_tooltip = {
				FROM = {
					add_resistance = 25
					add_compliance = -2
				}
			}
			custom_effect_tooltip = ALB_albanian_independence_movement_tt
			if = {
				limit = { any_enemy_country = { divisions_in_state = { state = FROM size > 3 } } }
				FROM = {
					add_resistance = 5
					add_compliance = -10
				}
			}
			else_if = {
				limit = { any_enemy_country = { divisions_in_state = { state = FROM size > 2 } } }
				FROM = {
					add_resistance = 10
					add_compliance = -8
				}
			}
			else_if = {
				limit = { any_enemy_country = { divisions_in_state = { state = FROM size > 1 } } }
				FROM = {
					add_resistance = 15
					add_compliance = -6
				}
			}
			else_if = {
				limit = { any_enemy_country = { divisions_in_state = { state = FROM size > 0 } } }
				FROM = {
					add_resistance = 20
					add_compliance = -4
				}
			}
			else_if = {
				limit = { any_enemy_country = { divisions_in_state = { state = FROM size < 1 } } }
				FROM = {
					add_resistance = 25
					add_compliance = -2
				}
			}
			clear_variable = global.albanian_resistance_state
		}
		cancel_effect = { hidden_effect = { clear_variable = global.albanian_resistance_state } }
		ai_will_do = {
			base = 5
			modifier = {
				date > 1910.7.14
				FROM = {
					state = 870
					has_resistance > 15
					has_resistance < 30
				}
				add = 50
			}
			modifier = {
				date > 1910.9.14
				FROM = {
					state = 870
					has_resistance > 30
					has_resistance < 45
				}
				add = 50
			}
			modifier = {
				date > 1910.11.14
				FROM = {
					state = 870
					has_resistance > 45
					has_resistance < 60
				}
				add = 100
			}
			modifier = {
				date > 1911.1.14
				FROM = {
					state = 870
					has_resistance > 60
				}
				add = 1000
			}
			modifier = {
				date > 1911.6.1
				FROM = {
					OR = {
						state = 848
						state = 847
					}
					has_resistance > 15
					has_resistance < 30
				}
				add = 50
			}
			modifier = {
				date > 1911.8.1
				FROM = {
					OR = {
						state = 848
						state = 847
					}
					has_resistance > 30
					has_resistance < 45
				}
				add = 50
			}
			modifier = {
				date > 1911.10.1
				FROM = {
					OR = {
						state = 848
						state = 847
					}
					has_resistance > 45
					has_resistance < 60
				}
				add = 100
			}
			modifier = {
				date > 1911.12.1
				FROM = {
					OR = {
						state = 848
						state = 847
					}
					has_resistance > 60
				}
				add = 1000
			}
		}
	}
	other_organize_rebellion = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = { NOT = { original_tag = ALB } }
		activation = { always = no }
		days_mission_timeout = 70
		cancel_trigger = { ALB = { controls_state = var:global.albanian_resistance_state } }
		state_target = yes
		target_trigger = { FROM = { state = var:global.albanian_resistance_state } }
		on_map_mode = map_only
		visible = { controls_state = var:global.albanian_resistance_state }
		available = { hidden_trigger = { always = no } }
		timeout_effect = {
			effect_tooltip = {
				var:global.albanian_resistance_state = {
					add_resistance = 25
					add_compliance = -2
				}
				custom_effect_tooltip = ALB_albanian_independence_movement_tt
				if = {
					limit = {
						var:global.albanian_resistance_state = {
							controller = {
								intel_level_over = { 
									target = ALB
									civilian_intel > 0.3
								}
							}
						}
					}
					if = {
						limit = { ROOT = { divisions_in_state = { state = var:global.albanian_resistance_state size > 3 } } }
						var:global.albanian_resistance_state = {
							add_resistance = 5
							add_compliance = -10
						}
					}
					else_if = {
						limit = { ROOT = { divisions_in_state = { state = var:global.albanian_resistance_state size > 2 } } }
						var:global.albanian_resistance_state = {
							add_resistance = 10
							add_compliance = -8
						}
					}
					else_if = {
						limit = { ROOT = { divisions_in_state = { state = var:global.albanian_resistance_state size > 1 } } }
						var:global.albanian_resistance_state = {
							add_resistance = 15
							add_compliance = -6
						}
					}
					else_if = {
						limit = { ROOT = { divisions_in_state = { state = var:global.albanian_resistance_state size > 0 } } }
						var:global.albanian_resistance_state = {
							add_resistance = 20
							add_compliance = -4
						}
					}
					else_if = {
						limit = { ROOT = { divisions_in_state = { state = var:global.albanian_resistance_state size < 1 } } }
						var:global.albanian_resistance_state = {
							add_resistance = 25
							add_compliance = -2
						}
					}
				}
				else = { custom_effect_tooltip = other_albanian_independence_movement_tt }
			}
		}
		cancel_effect = { hidden_effect = { clear_variable = global.albanian_resistance_state } }
	}
	ALB_establish_committees = {
		icon = GFX_decision_SWI_no_elected_president
		allowed = { original_tag = ALB }
		custom_cost_text = decision_cost_CP_30_250_infantry_equipment_1
		custom_cost_trigger = {
			command_power > 29.9
			has_equipment = { infantry_equipment > 249 }
		}
		days_remove = 70
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					ALB_is_kosovar_state = yes
					ALB_is_northern_state = yes
					ALB_is_central_state = yes
					ALB_is_southern_state = yes
				}
				NOT = {
					is_owned_by = ROOT
					is_controlled_by = ROOT
				}
			}
		}
		visible = { has_completed_focus = ALB_black_hand_of_salvation }
		on_map_mode = map_only
		complete_effect = {
			hidden_effect = {
				add_command_power = -30
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = -250
				}
			}
		}
		remove_effect = {
			if = {
				limit = { FROM = { NOT = { has_variable = ALB_committee_resistance } } }
				unlock_decision_tooltip = ALB_activate_committee_resistance
				hidden_effect = { set_variable = { ALB_committee_resistance = 0 } }
			}
			random_list = {
				25 = {
					event_option_tooltip = albania.12.a
					hidden_effect = {
						country_event = albania.12
						FROM = { add_to_variable = { ALB_committee_resistance = 10 } }
					}
				}
				25 = {
					event_option_tooltip = albania.13.a
					hidden_effect = {
						country_event = albania.13
						FROM = { add_to_variable = { ALB_committee_resistance = 15 } }
					}
				}
				25 = {
					event_option_tooltip = albania.14.a
					hidden_effect = {
						country_event = albania.14
						FROM = { add_to_variable = { ALB_committee_resistance = 20 } }
					}
				}
				25 = {
					event_option_tooltip = albania.15.a
					hidden_effect = {
						country_event = albania.15
						FROM = { add_to_variable = { ALB_committee_resistance = 25 } }
					}
				}
			}
		}
		ai_will_do = {
			base = 25
			modifier = {
				FROM = { ALB_is_southern_state = yes }
				add = 30
			}
			modifier = {
				FROM = { ALB_is_central_state = yes }
				add = 15
			}
			modifier = {
				FROM = { ALB_is_northern_state = yes }
				add = 5
			}
		}
	}
	ALB_activate_committee_resistance = {
		icon = GFX_decision_generic_scorched_earth
		allowed = { original_tag = ALB }
		days_remove = ALB_activate_committee_resistance_timer?7
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					ALB_is_kosovar_state = yes
					ALB_is_northern_state = yes
					ALB_is_central_state = yes
					ALB_is_southern_state = yes
				}
			}
		}
		visible = {
			FROM = {
				NOT = { is_controlled_by = ROOT }
				check_variable = { ALB_committee_resistance > 0 }
			}
		}
		available = {
			if = {
				limit = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_kosovar_state = yes }
				}
				if = {
					limit = { FROM = { ALB_is_northern_state = yes } }
					has_completed_focus = ALB_albanian_national_committee
				}
				if = {
					limit = {
						FROM = {
							OR = {
								ALB_is_central_state = yes
								ALB_is_southern_state = yes
							}
						}
					}
					has_completed_focus = ALB_taxim_meeting
				}
			}
			if = {
				limit = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_northern_state = yes }
				}
				if = {
					limit = { FROM = { ALB_is_kosovar_state = yes } }
					has_completed_focus = ALB_albanian_national_committee
				}
				if = {
					limit = {
						FROM = {
							OR = {
								ALB_is_central_state = yes
								ALB_is_southern_state = yes
							}
						}
					}
					has_completed_focus = ALB_taxim_meeting
				}
			}
			if = {
				limit = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_central_state = yes }
					FROM = {
						OR = {
							ALB_is_kosovar_state = yes
							ALB_is_northern_state = yes
							ALB_is_southern_state = yes
						}
					}
				}
				has_completed_focus = ALB_taxim_meeting
			}
			if = {
				limit = {
					has_dynamic_modifier = { modifier = ALB_albanian_society_bad }
					capital_scope = { ALB_is_southern_state = yes }
					FROM = {
						OR = {
							ALB_is_kosovar_state = yes
							ALB_is_northern_state = yes
							ALB_is_central_state = yes
						}
					}
				}
				has_completed_focus = ALB_taxim_meeting
			}
		}
		on_map_mode = map_only
		complete_effect = {
			custom_effect_tooltip = ALB_activate_committee_resistance_tt
			hidden_effect = { set_variable = { ALB_activate_committee_resistance_timer = 7 } }
		}
		remove_effect = {
			FROM = { add_resistance = THIS.ALB_committee_resistance }
			custom_effect_tooltip = ALB_activate_committee_resistance_tt2
			hidden_effect = { set_variable = { ALB_activate_committee_resistance_timer = -7 } }
		}
		ai_will_do = {
			base = 5
			modifier = {
				date > 1912.12.1
				any_owned_state = { is_controlled_by = ROOT }
				add = 25
			}
			modifier = {
				date > 1912.12.1
				FROM = { state = 44 }
				add = 30
			}
			modifier = {
				date > 1912.12.1
				FROM = { state = 803 }
				add = 25
			}
			modifier = {
				date > 1912.12.1
				FROM = { state = 871 }
				add = 10
			}
			modifier = {
				date > 1912.12.1
				FROM = { state = 203 }
				add = 5
			}
		}
	}
	other_establish_committees = {
		icon = GFX_decision_generic_police_action
		allowed = { NOT = { original_tag = ALB } }
		custom_cost_text = decision_cost_CP_15
		custom_cost_trigger = { command_power > 14.9 }
		days_remove = 70
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					ALB_is_kosovar_state = yes
					ALB_is_northern_state = yes
					ALB_is_central_state = yes
					ALB_is_southern_state = yes
				}
			}
		}
		visible = {
			FROM = {
				is_controlled_by = ROOT
				check_variable = { ALB_committee_resistance > 0 }
			}
			intel_level_over = {
				target = ALB
				civilian_intel > 0.65
			}
		}
		available = {
			divisions_in_state = {
				type = infantry
				size > 1
				state = FROM
			}
		}
		cancel_trigger = {
			OR = {
				NOT = { controls_state = FROM }
				divisions_in_state = {
					type = infantry
					size < 2
					state = FROM
				}
			}
        }
		on_map_mode = map_only
		complete_effect = { hidden_effect = { add_command_power = -15 } }
		remove_effect = {
			hidden_effect = {
				set_temp_variable = { decision_effect_positive = FROM.compliance }
				set_temp_variable = { decision_effect_negative = FROM.resistance }
			}
			random_list = {
				var:decision_effect_positive = {
					if = {
						limit = {
							intel_level_over = { 
								target = ALB
								civilian_intel > 0.8
							}
						}
						effect_tooltip = {
							25 = { event_option_tooltip = albania.16.a }
							25 = { event_option_tooltip = albania.17.a }
							25 = { event_option_tooltip = albania.18.a }
						}
					}
					else = { custom_effect_tooltip = other_establish_committees_unknown }
					hidden_effect = {
						random_list = {
							25 = {
								country_event = albania.16
								ALB = { country_event = albania.16 }
								FROM = { add_to_variable = { ALB_committee_resistance = -5 } }
							}
							25 = {
								country_event = albania.17
								ALB = { country_event = albania.17 }
								FROM = { add_to_variable = { ALB_committee_resistance = -10 } }
							}
							25 = {
								country_event = albania.18
								ALB = { country_event = albania.18 }
								FROM = { add_to_variable = { ALB_committee_resistance = -15 } }
							}
						}
					}
				}
				var:decision_effect_negative = {
					event_option_tooltip = albania.19.a
					hidden_effect = { country_event = albania.19 }
				}
			}
		}
		ai_will_do = { base = 30 }
	}
}

economy_decisions = {
	ALB_equipment_donations = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = { tag = ALB }
		visible = {
			has_country_flag = TUR_revolting_country
			any_other_country = {
				is_major = yes
				NOT = { has_war_with = ROOT }
			}
			has_completed_focus = ALB_international_weapon_aid
		}
		available = { has_country_flag = TUR_revolting_country }
		cost = 35
		fire_only_once = no
		complete_effect = {
			hidden_effect = {
				random_other_country = {
					limit = {
						is_major = yes
						NOT = { has_war_with = ROOT }
					}
					set_variable = { ALB_infantry_weapon_donations_donations = THIS }
				}
			}
		}
		remove_effect = {
			hidden_effect = {
				set_temp_variable = { ALB_equipment_to_be_added = 100 }
				every_other_country = {
					limit = { is_major = yes }
					if = {
						limit = {
							has_opinion = {
								target = PREV
								value > 50
							}
						}
						ROOT = { add_to_temp_variable = { ALB_equipment_to_be_added = 100 } }
					}
				}
			}
			custom_effect_tooltip = ALB_equipment_donations_tt
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = var:ALB_equipment_to_be_added
				producer = var:ALB_infantry_weapon_donations_donations
			}
			clear_variable = ALB_infantry_weapon_donations_donations
		}
		ai_will_do = {
			base = 100
			modifier = {
				has_equipment = { infantry_equipment > 15000 }
				factor = 0
			}
		}
	}
}

political_actions = {
	#failsafe
	#for when northern epirus defeats albania
	EPR_restore_albania = {
		allowed = {
			original_tag = EPR
		}
		visible = {
			is_subject = no
			OR = {
				controls_state = 44
				controls_state = 871
				controls_state = 1214
				controls_state = 1215
			}
		}
		available = {
			has_capitulated = no
			has_war = no
			44 = {
				is_owned_by = ROOT
				is_fully_controlled_by = ROOT
			}
			803 = {
				is_owned_by = ROOT
				is_fully_controlled_by = ROOT
			}
			871 = {
				is_owned_by = ROOT
				is_fully_controlled_by = ROOT
			}
			1214 = {
				is_owned_by = ROOT
				is_fully_controlled_by = ROOT
			}
			1215 = {
				is_owned_by = ROOT
				is_fully_controlled_by = ROOT
			}
			NOT = {
				country_exists = ALB
			}
		}
		fire_only_once = no
		complete_effect = {
			every_owned_state = {
				limit = {
					is_core_of = ALB
					NOT = {
						is_core_of = ROOT
						state = 803
					}
				}
				transfer_state_to = ALB
			}
			set_autonomy = {
				target = ALB
				autonomy_state = autonomy_dominion
			}
		}
	}
}
