political_actions = {
	LBA_fix_sahara = {
		allowed = {
			original_tag = LBA
		}
		visible = {
			OR = {
				is_debug = yes
				is_ai = yes
			}
			OR = {
				owns_state = 515
				owns_state = 567
			}
		}
		available = {
			has_war = no
			if = {
				limit = {
					owns_state = 515
				}
				NOT = {
					owns_state = 782
				}
			}
			if = {
				limit = {
					owns_state = 567
				}
				NOT = {
					owns_state = 273
					owns_state = 775
				}
			}
		}
		ai_will_do = {
			factor = 200
		}
		cost = 0
		fire_only_once = no
		complete_effect = {
			if = {
				limit = {
					owns_state = 515
				}
				every_country = {
					limit = {
						owns_state = 782
					}
					transfer_state = 515
				}
			}
			if = {
				limit = {
					owns_state = 567
				}
				every_country = {
					limit = {
						owns_state = 775
					}
					transfer_state = 567
				}
			}
		}
	}
}
peace_deals = {
	LBA_sue_for_peace_ENG = {
		name = sue_for_peace_FROM
		icon = GFX_decision_eng_trade_unions_support
		allowed = {
			tag = LBA
		}
		target_trigger = {
			FROM = {
				tag = ENG
			}
		}
		visible = {
			is_subject = no
			has_war_with = FROM
			FROM = { is_subject = no }
			has_global_flag = great_war
			NOT = { has_global_flag = great_war_ends }
		}
		available = {
			OR = {
				has_capitulated = yes
				has_country_leader = {
					character = LBA_muhammad_idris_assenussi
				}
			}
		}
		fire_only_once = yes
		ai_will_do = {
			base = 1000
			modifier = {
				factor = 0
				NOT = {
					has_country_leader = {
						character = LBA_muhammad_idris_assenussi
					}
				}
			}
		}
		complete_effect = {
			set_country_flag = LBA_modus_vivendi_of_acroma
			hidden_effect = {
				if = {
					limit = {
						has_capitulated = yes
					}
					#prevent generic peace
					set_state_controller = 663
					set_state_controller = 810
				}
			}
			if = {
				limit = { is_in_faction = yes }
				leave_faction = yes
			}
			every_state = {
				limit = {
					owner = { has_war_with = ROOT }
				}
				if = {
					limit = {
						OR = {
							state = 273
							state = 661
							state = 1061
						}
					}
					transfer_state_to = ROOT
				}
				if = {
					limit = {
						state = 1060
					}
					transfer_state_to = TRP
				}
			}
			if = {
				limit = {
					owns_state = 552
				}
				every_enemy_country = {
					limit = {
						owns_state = 452
					}
					transfer_state = 552
				}
			}
			white_peace = FROM
			hidden_effect = {
				every_enemy_country = {
					limit = {
						is_in_faction_with = FROM
					}
					ROOT = {
						white_peace = PREV
					}
				}
				if = {
					limit = {
						country_exists = TRP
					}
					set_truce = {
						target = TRP
						days = 365
					}
					diplomatic_relation = {
						country = TRP
						relation = non_aggression_pact
						active = yes
					}
				}
			}
		}
	}
}

war_in_desert = { 

	attack_foreign_state = {
		icon = border_war
		custom_cost_trigger = {
			command_power > 9
		}
		custom_cost_text = decision_cost_CP_10
		days_re_enable = 120
		state_target = yes
		visible = {
			always = yes
		}
		
		target_trigger = {
			FROM = {
				any_neighbor_state = {
					is_owned_and_controlled_by = ROOT
					is_demilitarized_zone = no
					NOT = {
						region = 127
					}
					NOT = {
						has_state_flag = border_incident_active
					}
					has_ROOT_at_least_1_div_in_current_state_scope = yes
				}
				NOT = {
					is_owned_and_controlled_by = ROOT
				}
				region = 225
			}
		}
		complete_effect = {
			custom_effect_tooltip = ITA_LBA_border_war_start_tt
			FROM = {
				random_neighbor_state = {
					limit = {
						is_owned_and_controlled_by = ROOT
						is_demilitarized_zone = no
						NOT = {
							region = 127
						}
						NOT = {
							has_state_flag = border_incident_active
						}
						has_ROOT_at_least_1_div_in_current_state_scope = yes
					}
					save_event_target_as = attacker_state
					set_variable = { FROM.attacker_state_vs_@ROOT = id }
					set_temp_variable = { attacker_state_temp = id }
					set_state_flag = border_incident_active
					set_state_flag = border_incident_active_libya
				}
			}
			FROM = {
				save_event_target_as = defender_state
				set_variable = { FROM.defender_state_vs_@ROOT = id }
				set_temp_variable = { defender_state_temp = id }
				set_state_flag = border_incident_active
				set_state_flag = border_incident_active_libya
				if = {
					limit = {
						ROOT = {
							tag = LBA
						}
					}
					add_dynamic_modifier = {
						modifier = LBA_intensified_guerrila
						days = 90
					}
				}
			}
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = var:FROM.attacker_state_vs_@ROOT
					num_provinces = 6
					on_win = wtt_border_conflict_won_attacker.1
					on_lose = wtt_border_conflict_lost_attacker.1
					on_cancel = wtt_border_conflict_canceled_attacker.1
				}	
				defender = {
					state = var:FROM.defender_state_vs_@ROOT
					num_provinces = 6
					on_win = wtt_border_conflict_won_defender.1
					on_lose = wtt_border_conflict_lost_defender.1
					on_cancel = wtt_border_conflict_canceled_defender.1
				}
			}
			custom_effect_tooltip = tt_you_have_90_days
			custom_effect_tooltip = back_in_120_days
			activate_mission = attack_mission_in_progress
		}
	}
	attack_mission_in_progress = {
		icon = border_war
		days_mission_timeout = 4
		available = {
			has_border_war = no
		}
		is_good = no
		timeout_effect = {
			random_owned_controlled_state = {
				limit = {
					any_neighbor_state = {
						has_state_flag = border_incident_active_libya
					}
					has_state_flag = border_incident_active_libya
				}
				set_temp_variable = { attacker_state_temp = id }
				set_variable = { attacker_state_temp = id }
			}
			every_state = {
				limit = {
					has_state_flag = border_incident_active_libya
				}
				clr_state_flag = border_incident_active_libya
				OWNER = {
					country_event = {
						id = wtt_border_conflict_canceled_defender.1
						days = 1
					}
				}
			}
		}
		activation = {
			always = no
		}
	}
	clear_flags = {
		complete_effect = {
			every_owned_state = {
				limit = {
					has_state_flag = border_incident_active
				}
				clr_state_flag = border_incident_active
				clr_state_flag = border_incident_active_libya
			}
		}
	}
}
