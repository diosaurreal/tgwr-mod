QIN_warlord_era_category = {
	QIN_warlord_era_mission = {
		icon = revolt
		days_mission_timeout = 140
		allowed = {
			original_tag = QIN
		}
		activation = {
			has_global_flag = chinese_warlord_crisis
			has_stability < 0.8
			is_subject = no
			NOT = {
				any_enemy_country = {
					is_china_or_warlord_no_tt = no
				}
				has_country_flag = great_war_winner
				has_global_flag = warlord_era
				country_exists = CHI
			}
		}
		priority = 1000
		available = {
			OR = {
				has_stability > 0.8
				has_country_flag = great_war_winner
				any_enemy_country = {
					is_china_or_warlord_no_tt = no
				}
			}
		}
		fire_only_once = no
		is_good = no
		timeout_effect = {
			set_global_flag = warlord_era
			QIN = {
				create_faction = qing_empire
				set_cosmetic_tag = QIN_government
				add_ideas = QIN_idea_fractured_empire
			}
		}
	}
}

political_actions = {
	QIN_crackdown_on_corruption = {
		icon = GFX_decision_oppression
		allowed = {
			original_tag = QIN
		}
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					state = 283
					state = 287
					state = 322
					state = 325
					state = 328
					state = 329
					state = 330
					state = 592
					state = 595
					state = 596
					state = 597
					state = 598
					state = 599
					state = 600
					state = 602
					state = 603
					state = 604
					state = 605
					state = 607
					state = 608
					state = 610
					state = 612
					state = 614
					state = 615
					state = 616
					state = 619
					state = 620
					state = 621
					state = 714
					state = 715
					state = 716
					state = 890
					state = 1064
				}
			}
		}
		available = {
			FROM = {
				is_owned_and_controlled_by = ROOT
			}
		}
		visible = {
			has_completed_focus = QIN_anti_corruption_crackdowns
			FROM = {
				is_owned_by = ROOT
				NOT = { has_state_flag = QIN_anti_corruption_crackdowns }
			}
		}
		fire_only_once = no
		cost = 25
		days_remove = 50
		cancel_if_not_visible = yes
		cancel_effect = {
			FROM = { clr_state_flag = QIN_anti_corruption_crackdowns }
		}
		complete_effect = {
			FROM = { set_state_flag = QIN_anti_corruption_crackdowns }
		}
		remove_effect = {
			add_to_variable = {
				var = QIN_bur_consumer_goods
				value = -0.02
			}
			custom_effect_tooltip = QIN_bur_consumers_2.tt
		}
		ai_will_do = {
			base = 5
			modifier = {
				has_political_power > 100
				factor = 5
			}
		}
	}

	QIN_crackdown_on_banditry = {
		icon = GFX_decision_oppression
		allowed = {
			original_tag = QIN
		}
		visible = {
			is_debug = yes
		}
		state_target = yes
		target_trigger = {
			FROM = {
				OR = {
					state = 283
					state = 287
					state = 322
					state = 325
					state = 328
					state = 329
					state = 330
					state = 592
					state = 595
					state = 596
					state = 597
					state = 598
					state = 599
					state = 600
					state = 602
					state = 603
					state = 604
					state = 605
					state = 607
					state = 608
					state = 610
					state = 612
					state = 614
					state = 615
					state = 616
					state = 619
					state = 620
					state = 621
					state = 714
					state = 715
					state = 716
					state = 890
					state = 1064
				}
			}
		}
		available = {
			FROM = {
				is_owned_and_controlled_by = ROOT
			}
		}
		visible = {
			has_completed_focus = QIN_pacify_bandits
			FROM = {
				is_owned_by = ROOT
				NOT = { has_state_flag = QIN_pacify_bandits }
			}
		}
		fire_only_once = no
		cost = 50
		days_remove = 50
		cancel_if_not_visible = yes
		cancel_effect = {
			FROM = { clr_state_flag = QIN_pacify_bandits }
		}
		complete_effect = {
			FROM = { set_state_flag = QIN_pacify_bandits }
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = QIN_idea_rampant_banditry
				}
				swap_ideas = {
					remove_idea = QIN_idea_rampant_banditry
					add_idea = QIN_idea_rampant_banditry_1
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_rampant_banditry_1
				}
				swap_ideas = {
					remove_idea = QIN_idea_rampant_banditry_1
					add_idea = QIN_idea_rampant_banditry_2
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_rampant_banditry_3
				}
				swap_ideas = {
					remove_idea = QIN_idea_rampant_banditry_3
					add_idea = QIN_idea_rampant_banditry_4
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_rampant_banditry_4
				}
				swap_ideas = {
					remove_idea = QIN_idea_rampant_banditry_4
					add_idea = QIN_idea_rampant_banditry_5
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_rampant_banditry_5
				}
				swap_ideas = {
					remove_idea = QIN_idea_rampant_banditry_5
					add_idea = QIN_idea_rampant_banditry_6
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_rampant_banditry_6
				}
				swap_ideas = {
					remove_idea = QIN_idea_rampant_banditry_6
				}
			}
		}
		ai_will_do = {
			base = 5
			modifier = {
				has_political_power > 100
				factor = 5
			}
		}
	}
}

economy_decisions = {
	QIN_open_new_schools = {
		icon = GFX_decision_generic_research
		cost = 50
		days_remove = 200
		allowed = {
			original_tag = QIN
		}
		visible = {
			is_debug = yes
		}
		available = {
			has_completed_focus = QIN_imperial_schools
			num_of_civilian_factories_available_for_projects >1
		}
		visible = {
			has_completed_focus = QIN_imperial_schools
			OR = {
				has_idea = QIN_idea_illiteracy
				has_idea = QIN_idea_illiteracy2
				has_idea = QIN_idea_illiteracy3
				has_idea = QIN_idea_illiteracy4
				has_idea = QIN_idea_illiteracy5
			}
		}
		ai_will_do = {
			factor = 100
		}
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			if = {
				limit = {
					has_idea = QIN_idea_illiteracy3
				}
				swap_ideas = {
					remove_idea = QIN_idea_illiteracy3
					add_idea = QIN_idea_illiteracy4
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_illiteracy4
				}
				swap_ideas = {
					remove_idea = QIN_idea_illiteracy4
					add_idea = QIN_idea_illiteracy5
				}
			}
			if = {
				limit = {
					has_idea = QIN_idea_illiteracy5
				}
				remove_ideas = QIN_idea_illiteracy5
			}
		}
	}
}

CHI_xinhai_revolution = {
	# to prohibit player does nothing to delay xinhai
	QIN_reform_timer = {
		icon = revolt
		days_mission_timeout = 120
		activation = {
			tag = QIN
			has_start_date < 1914.1.1
			NOT = {
				has_global_flag = xinhai_revolution
			}
			has_active_mission = CHI_xinhai_revolution_mission
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			OR = {
				is_subject = yes
				has_civil_war = yes
				has_global_flag = xinhai_revolution
				has_government = democratic
				has_government = communism
			}
		}
		fire_only_once = yes
		is_good = no
		timeout_effect = {
			add_days_mission_timeout = {
				mission = QIN_reform_timer
				days = 70
			}
		}
	}
}

QIN_internal_factions = {
	QIN_init_loyalties = {
		allowed = {
			tag = QIN
		}
		available = {
			tag = QIN
		}
		visible = {
			is_debug = yes
		}
		complete_effect = {

			set_variable = {
				QIN_military_loyalty = 40
			}
			set_variable = {
				QIN_royalists_loyalty = 100
			}
			set_variable = {
				QIN_reformists_loyalty = 60
			}
			set_variable = {
				QIN_gentry_loyalty = 40
			}
			set_variable = {
				QIN_military_popularity = 30
			}
			set_variable = {
				QIN_royalists_popularity = 80
			}
			set_variable = {
				QIN_reformists_popularity = 40
			}
			set_variable = {
				QIN_gentry_popularity = 10
			}

			QIN_recalculate_loyalties = yes
			
			add_dynamic_modifier = {
				modifier = QIN_military_loyalty_effect
			}
			add_dynamic_modifier = {
				modifier = QIN_royalists_loyalty_effect
			}
			add_dynamic_modifier = {
				modifier = QIN_reformists_loyalty_effect
			}
			add_dynamic_modifier = {
				modifier = QIN_gentry_loyalty_effect
			}
		}
	}

	QIN_nationalization_of_private_railways = {
		allowed = {
			tag = QIN
		}
		available = {
			tag = QIN
		}
		visible = {
			is_debug = yes
		}
		complete_effect = {
			#Read me carefuly, i will explain here
			#The temp variable is very important, always fill it, you can fill it with positive of negative value
			#You need to set it because the var is used into "gentry_gain_loyalty" tooltip. 
			#The number will be auto formatted in red or green depending if its positive or not! 
			set_temp_variable = {
				var = QIN_value_mutation
				value = -10
			}
			custom_effect_tooltip = gentry_gain_loyalty
			add_to_variable = {
				var = QIN_gentry_loyalty
				value = QIN_value_mutation
			}
			#always use it, it will update the GUI !!!
			QIN_recalculate_loyalties = yes



			#im doing some other stuff to make it looks tempting
			QIN_improve_industrialization = yes #yeah i optimized your industrialization mechanism with a scripted effect
			add_political_power = 200
			add_tech_bonus = {
				name = QIN_nationalization_of_private_railways
				bonus = 0.5
				uses = 1
				category = train_tech
			}
			debt_increase_very_small = yes
		}
	}

	QIN_empower_the_consultative_assembly = {
		allowed = {
			tag = QIN
		}
		available = {
			tag = QIN
		}
		visible = {
			is_debug = yes
		}
		complete_effect = {
			custom_effect_tooltip = QIN_royalists_weakened
			set_temp_variable = {
				var = QIN_value_mutation
				value = -40
			}
			custom_effect_tooltip = royalists_gain_loyalty
			add_to_variable = {
				var = QIN_royalists_loyalty
				value = QIN_value_mutation
			}
			custom_effect_tooltip = royalists_gain_popularity
			add_to_variable = {
				var = QIN_royalists_popularity
				value = QIN_value_mutation
			}
			#block 2
			set_temp_variable = {
				var = QIN_value_mutation
				value = -10
			}
			custom_effect_tooltip = gentry_gain_loyalty
			add_to_variable = {
				var = QIN_gentry_loyalty
				value = QIN_value_mutation
			}
			#block 3
			set_temp_variable = {
				var = QIN_value_mutation
				value = 30
			}
			custom_effect_tooltip = reformists_gain_loyalty
			add_to_variable = {
				var = QIN_reformists_loyalty
				value = QIN_value_mutation
			}
			#it works the same for popularity
			custom_effect_tooltip = reformists_gain_popularity
			add_to_variable = {
				var = QIN_reformists_popularity
				value = QIN_value_mutation
			}

			#always use it, it will update the GUI !!!
			QIN_recalculate_loyalties = yes


			add_stability = 0.05
			#im doing some other stuff to make it looks tempting
			add_popularity = {
				ideology = democratic
				popularity = 0.15
			}
		}
	}
}

QIN_army_reform_category = {

	QIN_tianjin_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 608
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			608 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0
		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			608 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 608 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
			}
	
		}
	}

		QIN_anqing_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 606
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			606 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0
		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			606 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 606 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}
		QIN_shanghai_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 613
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			613 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0
		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			606 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 613 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}


		QIN_nanjing_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 598
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			598 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0
		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			598 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 598 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}

		QIN_lanzhou_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 283
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			283 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0
		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			283 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 283 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}

		QIN_hanyang_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 620
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			620 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0

		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			620 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 620 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}

		QIN_taiyuan_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 615
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			615 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0

		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			615 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 615 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}

		QIN_shenyang_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 716
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			716 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0

		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			716 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 716 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}

		QIN_gongxian_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 607
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			607 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0

		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			607 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 607 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}

		QIN_jinan_arsenal_decision = {
		icon = GFX_decision_ger_military_buildup
		cost = 50
		days_remove = 70
		fire_only_once = yes
		highlight_states = {
			highlight_states_trigger = {
				state = 716
			}
		}
		allowed = {
			original_tag = QIN
		}
		available = {
			716 = {
				is_owned_and_controlled_by = QIN
			}
			num_of_civilian_factories_available_for_projects > 0

		}
		visible = {
			has_completed_focus = QIN_restore_military_production
			716 = {
				is_owned_and_controlled_by = QIN
			}
			is_debug = yes
		}
		modifier = {
			civilian_factory_use = 5
			production_speed_buildings_factor = -0.1
		}
		remove_effect = {
			
			random_owned_state = {
				prioritize = { 716 }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = QIN_rebuild_military_production_tt
			add_to_variable = {
				QIN_beiyang_industrial_capacity_factory = 0.02
				}
	
			}
		}
	}