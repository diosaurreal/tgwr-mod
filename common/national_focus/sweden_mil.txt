### Military (ww1)
shared_focus = {
	id = SWE_swedish_rearmament
	icon = GFX_focus_secret_rearmament
	x = 10
	y = 8
	
	cost = 5
	
	available = {
		OR = {
			threat > 0.2
			AND = {
				has_war_support > 0.6
				NOT = { has_government = democratic }
			}
		}
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL }
	
	completion_reward = {
		if = {
			limit = { has_idea = civilian_economy }
			add_ideas = low_economic_mobilisation
		}
		add_timed_idea = {
			idea = SWE_swedish_rearmament
			days = 365
		}
		every_military_industrial_organization = {
			add_mio_funds = 100
		}
		custom_effect_tooltip = adjust_swe_military_tt
		add_to_variable = {
			tooltip = industrial_capacity_factory_tt
			var = SWE_mil_industrial_capacity_factory
			value = 0.05
		}
	}
}
shared_focus = {
	id = SWE_establishment_of_airforce
	icon = GFX_goal_generic_air_fighter2
	prerequisite = { focus = SWE_swedish_rearmament }
	relative_position_id = SWE_swedish_rearmament
	x = -3
	y = 1
	
	cost = 8
	
	available = {
		date > 1912.1.1
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		has_tech = aircraft_engine
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		add_tech_bonus = {
			name = light_air
			category = light_air
			uses = 1
			bonus = 1.0
		}
	}
}
shared_focus = {
	id = SWE_the_type_l	# Licensed from France
	icon = GFX_goal_generic_air_fighter
	prerequisite = { focus = SWE_establishment_of_airforce }
	relative_position_id = SWE_swedish_rearmament
	x = -3
	y = 3
	
	cost = 8
	
	available = {
		NOT = { has_war_with = FRA }
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		has_tech = scout_plane2
		FRA = { has_tech = scout_plane2 }
	}
	bypass = {
		has_tech = fighter1
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		if = {
			limit = { has_tech = synchronizer }
			air_experience = 25
		}
		else = {
			air_experience = 10
			set_technology = { synchronizer = 1 }
		}
		add_tech_bonus = {
			name = fighter1
			technology = fighter1
			uses = 1
			bonus = 2.0
		}
		# If rework of air happens at some point, change to free design
	}
}
shared_focus = {
	id = SWE_make_use_of_bofors
	icon = GFX_focus_marmara_artillery
	prerequisite = { focus = SWE_swedish_rearmament }
	relative_position_id = SWE_swedish_rearmament
	x = 0
	y = 1
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		add_tech_bonus = {
			name = artillery
			category = artillery
			uses = 2
			bonus = 0.75
		}
	}
}
shared_focus = {
	id = SWE_kjellman_submachineguns
	icon = GFX_focus_SWE_let_fly_all_guns
	prerequisite = { focus = SWE_make_use_of_bofors }
	relative_position_id = SWE_swedish_rearmament
	x = -1
	y = 2
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
	}
	bypass = {
		has_tech = advanced_infantry_weapons2
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		add_tech_bonus = {
			name = modernize_equipment
			technology = improved_infantry_weapons
			technology = improved_infantry_weapons_2
			technology = advanced_infantry_weapons2
			uses = 1
			bonus = 1.0
		}
	}
}
shared_focus = {
	id = SWE_funds_to_bofors
	icon = GFX_goal_generic_army_artillery2
	prerequisite = { focus = SWE_make_use_of_bofors }
	relative_position_id = SWE_swedish_rearmament
	x = 1
	y = 2
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL }
	
	completion_reward = {
		if = {
			limit = { has_dlc = "Arms Against Tyranny" }
			mio:SWE_bofors_organization = {
				add_mio_funds = 750
			}
		}
		else = {
			if = {
				limit = { NOT = { has_idea = bofors } }
				set_country_flag = bofors_improved
				custom_effect_tooltip = adjustment_of_national_idea
				effect_tooltip = {
					swap_ideas = {
						remove_idea = bofors
						add_idea = bofors_imp
					}
				}
			}
			else = {
				swap_ideas = {
					remove_idea = bofors
					add_idea = bofors_imp
				}
			}
		}
	}
}
shared_focus = {
	id = SWE_modernise_the_army
	icon = GFX_focus_SWE_varnplikt
	prerequisite = { focus = SWE_make_use_of_bofors }
	relative_position_id = SWE_swedish_rearmament
	x = 0
	y = 3
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_ARMY_XP }
	
	completion_reward = {
		army_experience = 15
		add_doctrine_cost_reduction = {
			name = land_doctrine
			cost_reduction = 0.5
			uses = 2
			category = land_doctrine
		}
		custom_effect_tooltip = adjust_swe_military_tt
		add_to_variable = {
			tooltip = experience_gain_army_factor_tt
			var = SWE_mil_experience_gain_army_factor
			value = 0.05
		}
		custom_effect_tooltip = unlock_decisions_to_improve_army_spirit
		set_country_flag = SWE_army_decisions
	}
}
shared_focus = {
	id = SWE_improve_research
	text = extra_tech_slot
	icon = GFX_focus_generic_university_3
	prerequisite = { focus = SWE_modernise_the_army }
	relative_position_id = SWE_swedish_rearmament
	x = 0
	y = 4
	
	cost = 8
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		add_research_slot = 1
	}
}
shared_focus = {
	id = SWE_extend_our_naval_funds
	icon = GFX_focus_generic_navy_battleship2
	prerequisite = { focus = SWE_swedish_rearmament }
	relative_position_id = SWE_swedish_rearmament
	x = 4
	y = 1
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		NOT = {
			has_country_leader = {
				character = SWE_karl_staaff
				ruling_only = yes
			}
		}
		any_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_NAVY_XP }
	
	completion_reward = {
		navy_experience = 35
		add_timed_idea = {
			idea = SWE_naval_rearmament
			days = 240
		}
	}
}
shared_focus = {
	id = SWE_coastal_projection
	icon = GFX_goal_generic_navy_doctrines_tactics
	prerequisite = { focus = SWE_extend_our_naval_funds }
	mutually_exclusive = { focus = SWE_a_local_naval_arms_race }
	relative_position_id = SWE_extend_our_naval_funds
	x = -1
	y = 1
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		any_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_HISTORICAL FOCUS_FILTER_NAVY_XP }
	
	completion_reward = {
		navy_experience = 10
		add_timed_idea = {
			idea = SWE_coastal_projection
			days = 1095
		}
	}
}
shared_focus = {
	id = SWE_invest_in_kustartilleriet
	icon = GFX_focus_generic_coastal_fort
	prerequisite = { focus = SWE_coastal_projection }
	relative_position_id = SWE_extend_our_naval_funds
	x = -1
	y = 3
	
	cost = 8
	
	available = {
		threat > 0.05
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		has_tech = fortification1
		any_owned_state = {
			is_coastal = yes
			is_core_of = SWE
			is_fully_controlled_by = SWE
		}
	}
	
	available_if_capitulated = yes
	
	completion_reward = {
		every_core_state = {
			limit = {
				is_coastal = yes
				is_owned_by = SWE
				is_fully_controlled_by = SWE
			}
			custom_effect_tooltip = will_add_fortification_on_every_naval_base_and_coastal_victory_point
			hidden_effect = {
				add_building_construction = {
					type = coastal_bunker
					level = 2
					instant_build = yes
					province = {
						limit_to_naval_base = yes
					}
				}
				add_building_construction = {
					type = coastal_bunker
					level = 1
					instant_build = yes
					province = {
						limit_to_coastal = yes
						limit_to_victory_point = yes
					}
				}
			}
		}
	}
}
shared_focus = {
	id = SWE_a_local_naval_arms_race
	icon = GFX_goal_generic_construct_naval_dockyard
	prerequisite = { focus = SWE_extend_our_naval_funds }
	mutually_exclusive = { focus = SWE_coastal_projection }
	relative_position_id = SWE_extend_our_naval_funds
	x = 2
	y = 1
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		NOT = {
			has_country_leader = {
				character = SWE_karl_staaff
				ruling_only = yes
			}
		}
		any_state = {
			is_coastal = yes
			is_controlled_by = ROOT
		}
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_INDUSTRY }
	
	completion_reward = {
		add_threat = 2
		custom_effect_tooltip = adjust_swe_military_tt
		add_to_variable = {
			tooltip = industrial_capacity_dockyard_tt
			var = SWE_mil_industrial_capacity_dockyard
			value = 0.01
		}
		every_owned_state = {
			limit = {
				is_controlled_by = ROOT
				is_coastal = yes
				free_building_slots = {
					building = dockyard
					size > 0
					include_locked = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								is_controlled_by = ROOT
								is_coastal = yes
								free_building_slots = {
									building = dockyard
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
			}
			random_select_amount = 3
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = dockyard
				level = 1
				instant_build = yes
			}
		}
	}
}
shared_focus = {
	id = SWE_destroyer_effort
	icon = GFX_focus_generic_destroyer
	prerequisite = {
		focus = SWE_coastal_projection
		focus = SWE_a_local_naval_arms_race
	}
	relative_position_id = SWE_extend_our_naval_funds
	x = 0
	y = 2
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		NOT = {
			has_country_leader = {
				character = SWE_karl_staaff
				ruling_only = yes
			}
		}
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		add_tech_bonus = {
			name = dd_tech
			category = dd_tech
			uses = 1
			bonus = 1.0
		}
		if = {
			limit = { has_dlc = "Man the Guns" }
			create_equipment_variant = {
				name = "Clas Fleming Class"
				type = ship_hull_light_2
				name_group = NOR_DD_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = ship_light_battery_1
					fixed_ship_anti_air_slot = empty
					fixed_ship_fire_control_system_slot = empty
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = light_ship_engine_1
					fixed_ship_torpedo_slot = ship_torpedo_1
					mid_1_custom_slot = ship_mine_layer_1
					rear_1_custom_slot = empty
				}
			}
		}
	}
}
shared_focus = {
	id = SWE_capital_effort
	icon = GFX_focus_generic_naval_ship_transfer
	prerequisite = { focus = SWE_a_local_naval_arms_race }
	relative_position_id = SWE_extend_our_naval_funds
	x = 2
	y = 2
	
	cost = 8
	
	available = {
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		NOT = {
			has_country_leader = {
				character = SWE_karl_staaff
				ruling_only = yes
			}
		}
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_RESEARCH }
	
	completion_reward = {
		add_tech_bonus = {
			name = SWE_capital_effort
			category = bb_tech
			category = bc_tech
			uses = 1
			bonus = 1.0
		}
	}
}
shared_focus = {
	id = SWE_naval_arms_race
	icon = GFX_focus_generic_shipyard
	prerequisite = { focus = SWE_destroyer_effort }
	prerequisite = { focus = SWE_capital_effort }
	relative_position_id = SWE_extend_our_naval_funds
	x = 1
	y = 3
	
	cost = 8
	
	available = {
		is_subject = no
		has_capitulated = no
		NOT = { has_idea = SWE_forsvarsvasendet }
		NOT = { has_idea = SWE_anti_war_promises }
		NOT = { has_idea = idea_army_restrictions }
		NOT = { has_idea = idea_naval_treaty_adherent }
		NOT = {
			has_country_leader = {
				character = SWE_karl_staaff
				ruling_only = yes
			}
		}
	}
	bypass = {
		has_global_flag = great_war_ends
	}
	
	available_if_capitulated = yes
	
	search_filters = { FOCUS_FILTER_INDUSTRY }
	
	completion_reward = {
		custom_effect_tooltip = adjust_swe_military_tt
		add_to_variable = {
			tooltip = industrial_capacity_dockyard_tt
			var = SWE_mil_industrial_capacity_dockyard
			value = 0.02
		}
		if = {
			limit = { has_idea = SWE_naval_rearmament }
			remove_ideas = SWE_naval_rearmament
		}
		add_timed_idea = {
			idea = SWE_engage_in_naval_race
			days = 730
		}
		custom_effect_tooltip = this_is_removed_upon_end_of_great_war
	}
}