add_namespace = ww1_latvia

# Remove Iskolata color
####################
country_event = {
	id = ww1_latvia.1
	
	trigger = {
		tag = LAT
		has_country_flag = LAT_iskolata
		NOT = { has_government = communism }
	}	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	hidden = yes

	immediate = {
		LAT = {
			drop_cosmetic_tag = yes
			clr_country_flag = LAT_iskolata
			set_rule = {
				can_join_factions = yes
            }
		}
	}
}

# Iskolata join faction rule
####################
country_event = {
	id = ww1_latvia.2
	
	trigger = {
		tag = LAT
		has_country_flag = LAT_iskolata
	    NOT = {has_war_with = GER}
	}	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	hidden = yes

	immediate = {
		set_rule = {
		    can_join_factions = yes
        }
	}
}


# Virsaitis
country_event = {
	id = ww1_latvia.3
	title = ww1_latvia.3.t
	desc = ww1_latvia.3.d
	picture = GFX_report_event_destroyers
	trigger = {
		date > 1917.1.1
		tag = LAT
		is_subject = no
		any_owned_state = {
			is_coastal = yes
			naval_base > 0
		}
		has_global_flag = great_war_ends
		GER = {
			has_country_flag = great_war_loser
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 365
	}
	option = {
		name = ww1_latvia.3.a
		if = {
			limit = {
				has_dlc = "Man the Guns"
			}
			hidden_effect = {
				GER = {
					create_equipment_variant = {
						type = ship_hull_light_3
						name = "M1916 Class"
						name_group = GER_DD_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_anti_air_slot = empty
							fixed_ship_engine_slot = light_ship_engine_1
							fixed_ship_torpedo_slot = ship_torpedo_1
							mid_1_custom_slot = empty
							rear_1_custom_slot = empty
						}
						obsolete = yes
					}
				}
			}
			create_ship = {
				type = ship_hull_light_3
				creator = GER
				equipment_variant = "M1916 Class"
				name = "Virsaitis"
			}
		}
		else = {
			hidden_effect = {
				GER = {
					create_equipment_variant = {
						type = destroyer_2
						name = "M1916 Class"
						name_group = GER_DD_HISTORICAL
						parent_version = 0
						obsolete = yes
					}
				}
			}
			create_ship = {
				type = destroyer_2
				creator = GER
				equipment_variant = "M1916 Class"
				name = "Virsaitis"
			}
		}
	}
}