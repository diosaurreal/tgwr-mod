add_namespace = ww1_morocco
add_namespace = ww1_rif
add_namespace = ww1_agadir

# FRENCH INTERVENTION
########################
country_event = {
	id = ww1_morocco.1
	title = ww1_morocco.1.t
	desc = ww1_morocco.1.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	option = {
		name = ww1_morocco.1.a
		custom_effect_tooltip = historical_tt
		set_global_flag = agadir_crisis
		FRA = { country_event = { id = ww1_morocco.2 days = 2 } }
		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			FRA = {
				puppet = ROOT
				transfer_state = 1093
			}
		}
		
		ai_chance = { 
			base = 100 
			modifier = {
				has_game_rule = {
					rule = moroccan_revolution
					option = MOROCCAN_REVOLUTION_FIRED
				}
				factor = 0
			}
		}
	}
	option = {
		name = ww1_morocco.1.b
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
		}
		hidden_effect = {
			set_popularities = {
				democratic = 10
				neutrality = 80
				fascism = 8
				communism = 2
			}
		}
		division_template = {
			name = "Harka"
			is_locked = yes
			regiments = {
				irregular_infantry = {
					x = 0
					y = 0
				}
				irregular_infantry = {
					x = 0
					y = 1
				}
				irregular_infantry = {
					x = 0
					y = 2
				}
				irregular_infantry = {
					x = 1
					y = 0
				}
				irregular_infantry = {
					x = 1
					y = 1
				}
				irregular_infantry = {
					x = 1
					y = 2
				}
			}
		}
		diplomatic_relation = {
			country = FRA
			relation = military_access
			active = no
		}
		FRA = {
			diplomatic_relation = {
				country = MOR
				relation = military_access
				active = no
			}
		}
		set_global_flag = MOR_rebellion_against_FRA
		461 = {
			create_unit = {
				division = "name = \"Harka\" division_template = \"Harka\" start_experience_factor = 0.25 start_equipment_factor = 0.5"
				owner = ROOT
				count = 10
			}
		}
		MOR_ahmed_al_hiba = {
			promote_character = absolute_monarchy
			promote_character = reactionism
		}
		add_ideas = extensive_conscription
		add_ideas = MOR_guerilla_warfare
		remove_ideas = FRA_idea_moroccan_intervention
		news_event = ww1_morocco.5
		FRA = { country_event = { id = ww1_morocco.3 days = 2 } }
		ai_chance = { 
			base = 0
			modifier = {
				has_game_rule = {
					rule = moroccan_revolution
					option = MOROCCAN_REVOLUTION_FIRED
				}
				add = 500
			}
		}
	}
	option = {
		name = ww1_morocco.1.c
		#fight alone as the sultan
		MOR_start_war_with_hostile_caids = yes
		ai_chance = { 
			base = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

# French protectorate in Morocco
country_event = {
	title = ww1_morocco.2.t
	desc = ww1_morocco.2.d
	id = ww1_morocco.2
	picture = GFX_report_event_usa_destroyers
	immediate = {
		hidden_effect = {
			set_global_flag = agadir_crisis
			set_global_flag = {
				flag = GER_reaction_time
				days = 40
				value = 1
			}
		}
	}
	is_triggered_only = yes
	option = {
		name = ww1_morocco.2.a
		ai_chance = {
			base = 100
		}
		custom_effect_tooltip = historical_tt
		news_event = {
			id = ww1_morocco.23
			days = 3
		}
		MOR = { 
			set_country_flag = protectorate 
			get_current_government_type = yes
			FRA = {
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_tgwr_informal_protectorate #will be a real protectorate after treaty of Fès in 1912
					freedom_level = 0.6
					end_civil_wars = no
					end_wars = no
				}
			}
			restore_previous_government_type = yes	
			unlock_national_focus = MOR_cooperate_with_french	
			if = {
				limit = {
					owns_state = 1093
				}
				1093 = {
					transfer_state_to = FRA
				}
			}
		}
		# if = {
		# 	limit = {
		# 		country_exists = SPR
		# 		any_state = {
		# 			OR = {
		# 				is_owned_or_subject_trigger = yes
		# 				SPR = {
		# 					is_owned_or_subject_trigger = yes
		# 				}
		# 			}					
		# 			OR = {
		# 				state = 290
		# 				state = 1137
		# 				state = 807
		# 			}
		# 		}	
		# 	}
		# 	effect_tooltip = {
		# 		SPR = { transfer_state = 290 transfer_state = 1137 transfer_state = 807 }
		# 	}
		# 	hidden_effect = {
		# 		SPR = {
		# 			country_event = {
		# 				id = ww1_morocco.20
		# 				days = 2
		# 			}
		# 		}
		# 	}
		# }
		
		hidden_effect = {
			MOR = {
				set_capital = { state = 461 }
			}
			create_dynamic_country = {
				original_tag = MOR
				reserve_dynamic_country = yes
				set_country_flag = MOR_anti_french
				every_state = {
					limit = {
						is_core_of = MOR
					}
					if = {
						limit = { has_resistance = no }
						start_resistance = yes
					}
					add_core_of = PREV
				}
				set_popularities = {
					neutrality = 100
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
			}
		}
		every_state = {
			limit = {
				OR = {
					is_owned_by = FRA
					is_owned_by = MOR
				}
				OR = {
					state = 1095
					state = 461
				}
			}
			remove_core_of = MOR
			add_core_of = RMO
			if = {
				limit = { has_resistance = no }
				start_resistance = yes
			}
			add_dynamic_modifier = {
				modifier = FRA_anti_french_resistance
			}
			transfer_state_to = RMO	#to avoid no flag bug
			transfer_state_to = MOR
		}
		RMO = {
			set_capital = {
				state = 462
			}
		}

		#South rebellion : 
		#Izayan rebels
		#Moha rebels
		#Heemou rebels
	}
	option = {
		name = ww1_morocco.2.b
		add_war_support = -0.05
		ai_chance = {
			base = 0
		}
		MOR = {
			add_opinion_modifier = {
				target = FRA
				modifier = large_increase
			}
			promote_character = MOR_yusef_bin_hassan
		}
		
	}
}

# Moroccan Rebellion
country_event = {
	title = ww1_morocco.3.t
	desc = ww1_morocco.3.d
	id = ww1_morocco.3
	picture = GFX_report_event_usa_destroyers

	is_triggered_only = yes
	option = {
		name = ww1_morocco.3.a
		every_state = {
			limit = {
				is_core_of = MOR
				NOT = {
					is_owned_by = ROOT
					state = 699
					state = 743
					state = 783
					state = 807
				}
			}
		}
		create_wargoal = {
			target = MOR
			type = annex_everything	
		}
		set_global_flag = FRA_MOR_war
		add_named_threat = { threat = 3 name = "ww1_morocco.3.t" }
		ai_chance = {
			base = 1000
		}
	}
	option = {
		name = ww1_morocco.3.b
		add_war_support = -0.05
		ai_chance = {
			base = 0
		}
	}
}

# France occupied Fez
news_event = {
	id = ww1_morocco.4
	title = ww1_morocco.4.t
	desc = ww1_morocco.4.d
	picture = EVENT_hoi4tgw_agadir_crisis

	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.4.a
	}
}

# Moroccan Rebellion
news_event = {
	id = ww1_morocco.5
	title = ww1_morocco.5.t
	desc = ww1_morocco.5.d
	picture = EVENT_hoi4tgw_agadir_crisis

	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.5.a
	}
}

# German fleet in Agadir
country_event = {
	title = ww1_morocco.6.t
	desc = ww1_morocco.6.d
	id = ww1_morocco.6
	picture = GFX_report_event_usa_destroyers

	immediate = {
		hidden_effect = {
			start_agadir_crisis = yes
		}
	}

	is_triggered_only = yes
	option = {
		name = ww1_morocco.6.a
		ai_chance = { base = 100 }
	}
}


# Agadir Crisis - Germany Demands Compensation
#################################################
country_event = {
	title = ww1_morocco.8.t
	
	id = ww1_morocco.8
	picture = GFX_report_event_usa_destroyers
	desc = {
		text = ww1_morocco.8.d.forcongo
		trigger = {
			has_global_flag = agadir_german_demand_congo
		}
	}
	desc = {
		text = ww1_morocco.8.d.forsouthmorocco
		trigger = {
			has_global_flag = agadir_german_southern_morocco
		}
	}
	desc = {
		text = ww1_morocco.8.d.forfreemorocco
		trigger = {
			has_global_flag = agadir_german_free_morocco
		}
	}

	is_triggered_only = yes
	###############
	# GERMANY WANT CONGO
	#################################
	option = {
		name = ww1_morocco.8.a
		add_political_power = -75
		hidden_effect = {
			set_crisis_progressbar_75 = yes
		}
		GER = {
			if = {
				limit = {
					769 = {
						is_owned_or_subject_PREV_trigger = yes
					}
				}
				769 = {
					transfer_state_to = FRA
					add_core_of = CHA
				}
			}
			country_event = {
				id = ww1_morocco.10
				days = 2
			}
		}
		news_event = ww1_morocco.11
		every_state = {			
			limit = {
				is_owned_or_subject_trigger = yes
				OR = {					
					state = 814
					state = 1143
					state = 815
					state = 1144
					state = 752
					state = 772
				}
			}
			if = {
				limit = {
					country_exists = CMR
				}
				transfer_state_to = CMR
			}
			else = {
				transfer_state_to = GER
			}
			add_claim_by = ROOT
		}
		hidden_effect = {
			CMR = {
				add_state_core = 814
				add_state_core = 1143
		   		add_state_core = 815
				add_state_core = 1144
			}
		}
		ai_chance = {
			base = 100 
			modifier = {
				GER = {
					has_navy_size = {
						size < 70
					}
				}
				factor = 0.5
			}
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
			}
		}
		trigger = {
			has_global_flag = agadir_german_demand_congo
			NOT = {
				has_global_flag = agadir_british_support_france
			}
			any_state = {
				is_owned_or_subject_trigger = yes
				OR = {
					state = 814
					state = 1143
					state = 815
					state = 1144
					state = 752
					state = 772
				}
			}
		}
	}
	option = {
		name = ww1_morocco.8.b
		trigger = {
			has_global_flag = agadir_german_demand_congo
			has_global_flag = agadir_british_support_france
			any_state = {
				is_owned_or_subject_trigger = yes
				OR = {
					state = 814
					state = 1143
					state = 815
					state = 1144
				}
			}
		}
		add_war_support = 0.05
		every_state = {
			limit = {
				is_owned_or_subject_trigger = yes
				OR = {
					state = 814
					state = 1143
					state = 815
					state = 1144
				}	
			}
			if = {
				limit = {
					country_exists = CMR
				}
				transfer_state_to = CMR
			}
			else = {
				transfer_state_to = GER
			}
			add_core_of = CMR
			add_claim_by = ROOT
		}
		GER = {
			if = {
				limit = {
					769 = {
						is_owned_or_subject_PREV_trigger = yes
					}
				}
				769 = {
					transfer_state_to = FRA
					add_core_of = CHA
				}
			}
			country_event = {
				id = ww1_morocco.10
				days = 2
			}
		}
		news_event = ww1_morocco.11
		
		ai_chance = {
			base = 100 
			modifier = {
				GER = {
					has_navy_size = {
						size < 70
					}
				}
				factor = 0.5
			}
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
			}
		}
	}
	###############
	# GERMANY WANT SOUTH MOROCCO
	#################################
	option = {
		name = ww1_morocco.8.e
		trigger = {
			has_global_flag = agadir_german_southern_morocco
			any_state = {
				OR = {
					is_owned_or_subject_trigger = yes
					is_owned_by = MOR
				}
				OR = {
					state = 807
					state = 783
				}
			}
		}
		hidden_effect = {
			set_crisis_progressbar_50 = yes
		}
		every_state = {
			limit = {
				OR = {
					is_owned_or_subject_trigger = yes
					is_owned_by = MOR
				}
				OR = {
					state = 807
					state = 783
				}
			}
			transfer_state_to = GER
		}
		GER = {
			add_stability = 0.05
		}
		add_political_power = -150
		news_event = ww1_morocco.11
		ai_chance = {
			base = 100 
			modifier = {
				GER = {
					has_navy_size = {
						size < 70
					}
				}
				factor = 0.5
			}
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
			}
		}
	}
	###############
	# GERMANY WANT FREE MOROCCO
	#################################
	option = {
		name = ww1_morocco.8.f
		trigger = {
			has_global_flag = agadir_german_free_morocco
		}
		hidden_effect = {
			set_crisis_progressbar_25 = yes
		}
		set_autonomy = {
			target = MOR
			autonomous_state = autonomy_free
		}
		FRA = {
			every_owned_state = {
				limit = {
					is_core_of = MOR
				}
				transfer_state_to = MOR
			}
		}
		MOR = {
			leave_faction = yes
			drop_cosmetic_tag = yes
			GER = { give_guarantee = PREV }
		}
		add_political_power = -75
		news_event = ww1_morocco.11
		hidden_effect = {
			RMO = {
				every_state = {
					limit = {
						is_core_of = PREV
					}
					remove_core_of = PREV
				}
			}
		}
		ai_chance = {
			base = 100 
			modifier = {
				GER = {
					has_navy_size = {
						size < 70
					}
				}
				factor = 0.5
			}
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
			}
		}
	}

	option = {
		name = ww1_morocco.8.c
		hidden_effect = {
			set_crisis_progressbar_100 = yes
		}
		GER = { country_event = { id = ww1_morocco.12 days = 4 } }
		news_event = ww1_morocco.14
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				NOT = { has_war_with = GER }
				NOT = {
					has_game_rule = {
						rule = ultimatum_on_agadir
						option = WAR_ON_AGADIR
					}
				}
				factor = 0
			}
			modifier = {
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
				factor = 1000
			}
		}
	}
}

# Germany Demands Agadir
##############################
country_event = {
	title = ww1_morocco.9.t
	desc = ww1_morocco.9.d
	id = ww1_morocco.9
	picture = GFX_report_event_usa_destroyers

	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	is_triggered_only = yes
	option = {
		name = ww1_morocco.9.a
		news_event = ww1_morocco.13
		FRA = {
			every_state = {
				limit = {
					is_core_of = MOR
					is_owned_or_subject_trigger = yes
				}
				add_claim_by = PREV
				transfer_state_to = MOR
			}
			end_puppet = MOR
		}
		GER = {
			MOR = { 
				set_country_flag = protectorate 
				get_current_government_type = yes
			}
			set_autonomy = {
				target = MOR
				autonomy_state = autonomy_tgwr_protectorate
				freedom_level = 0.6
			}
			hidden_effect = {
				MOR = {
					restore_previous_government_type = yes
				}
			}
		}
		add_war_support = 0.10
		ai_chance = {
			base = 80 
			modifier = {
				GER = {
					has_navy_size = {
						size < 70
					}
				}
				factor = 0.5
			}
			modifier = {
				ENG = { is_in_faction_with = FRA }
				factor = 0.5
			}
			modifier = {
				has_war_with = GER
				factor = 0
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
			}
		}
	}
	option = {
		name = ww1_morocco.9.b
		GER = { country_event = { id = ww1_morocco.12 days = 2 } }
		news_event = ww1_morocco.14
		ai_chance = {
			base = 20
			modifier = {
				is_historical_focus_on = yes
				NOT = {
					has_war_with = GER
					has_game_rule = {
						rule = ultimatum_on_agadir
						option = WAR_ON_AGADIR
					}
				}
				factor = 0
			}
		}
	}
}

# France will pay for Morocco
#####################
country_event = {
	title = ww1_morocco.10.t
	desc = ww1_morocco.10.d
	id = ww1_morocco.10
	picture = GFX_report_event_usa_destroyers

	is_triggered_only = yes
	option = {
		name = ww1_morocco.10.a		
		set_global_flag = agadir_crisis_ends
		GER = { set_country_flag = GER_shame_in_agadir }
		ai_chance = { base = 100 }
	}
}

# Agadir Crisis Averted
news_event = {
	id = ww1_morocco.11
	title = ww1_morocco.11.t
	picture = EVENT_hoi4tgw_agadir_crisis
	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	desc = {
		text = ww1_morocco.11.d.forcongo
		trigger = {
			has_global_flag = agadir_german_demand_congo
		}
	}
	desc = {
		text = ww1_morocco.11.d.forsouthmorocco
		trigger = {
			has_global_flag = agadir_german_southern_morocco
		}
	}
	desc = {
		text = ww1_morocco.11.d.forfreemorocco
		trigger = {
			has_global_flag = agadir_german_free_morocco
		}
	}

	major = yes
	is_triggered_only = yes
	immediate = {
		set_global_flag = agadir_crisis_ends
	}

	option = {
		name = ww1_morocco.11.a
		trigger = {
			NOT = {
				tag = FRA
				tag = GER
			}
		}
	}
	option = {
		name = ww1_morocco.11.b
		trigger = {
			tag = GER
		}
	}
	option = {
		name = ww1_morocco.11.c
		trigger = {
			tag = FRA
		}
	}
}

# France refuced to cede the colony
##############################
country_event = {
	title = ww1_morocco.12.t
	desc = ww1_morocco.12.d
	id = ww1_morocco.12
	picture = GFX_report_event_usa_destroyers
	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	is_triggered_only = yes
	option = {
		name = ww1_morocco.12.a
		create_wargoal = {
			type = take_state_focus
			target = MOR
			generator = { 462 108 } 
		}
		set_global_flag = agadir_crisis_ends
		ai_chance = { base = 100 }
	}
	option = {
		name = ww1_morocco.12.b
		add_stability = 0.05
		add_war_support = -0.1
		add_political_power = -150
		set_global_flag = agadir_crisis_ends
		country_event = {
			id = ww1_morocco.15
			days = 3
		}
		every_other_country = {
			limit = {
				OR = {
					tag = SPR
					tag = FRA
					tag = ENG
				}
			}
			country_event = {
				id = ww1_morocco.27
				days = 1
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ultimatum_on_agadir
					option = WAR_ON_AGADIR
				}
			}
		}
	}
}

# Germany occupies Western Morocco
news_event = {
	id = ww1_morocco.13
	title = ww1_morocco.13.t
	desc = ww1_morocco.13.d
	picture = EVENT_hoi4tgw_agadir_crisis
	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.13.a
		set_global_flag = agadir_crisis_ends
		ai_chance = { base = 100 }
	}
}

# Escalation of the Agadir Crisis
news_event = {
	id = ww1_morocco.14
	title = ww1_morocco.14.t
	desc = ww1_morocco.14.d
	picture = EVENT_hoi4tgw_agadir_crisis
	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	major = yes
	is_triggered_only = yes
	immediate = {
		set_global_flag = agadir_crisis_ends
	}
	option = {
		name = ww1_morocco.14.a
		trigger = {
			tag = GER
		}
	}
	option = {
		name = ww1_morocco.14.b
		trigger = {
			OR = {
				tag = FRA
				is_in_faction_with = FRA
			}
		}
	}
	option = {
		name = ww1_morocco.14.c
		trigger = {
			NOT = {
				is_in_faction_with = FRA
				tag = FRA
				tag = GER
			}
		}
	}
}

# The crisis period has passed
country_event = {
	title = ww1_morocco.15.t
	desc = ww1_morocco.15.d
	id = ww1_morocco.15
	picture = GFX_report_event_usa_destroyers
	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	is_triggered_only = yes
	option = {
		name = ww1_morocco.15.a
		ai_chance = { base = 100 }
	}
}

# British involvement
country_event = {
	id = ww1_morocco.16
	title = ww1_morocco.16.t
	desc = ww1_morocco.16.d
	picture = GFX_report_event_usa_destroyers
	is_triggered_only = yes
	option = {
		name = ww1_morocco.16.a
		trigger = { tag = FRA }
		add_opinion_modifier = {
			target = FROM
			modifier = HOI4TGW_Opinion_diplomats_bonus
		}
		hidden_effect = {
			ENG = {
				join_aggressor_in_current_crisis = yes
			}
		}
	}
}

# German financial crisis
country_event = {
	id = ww1_morocco.17
	title = ww1_morocco.17.t
	desc = ww1_morocco.17.d
	picture = GFX_report_event_gathering_protest
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.17.a
		add_ideas = GER_financial_crisis_of_agadir
		if = {
			limit = {
				has_country_flag = GER_sms_panther_morocco
			}
			custom_effect_tooltip = GER_leave_in_one_month_or_crash
			activate_mission = GER_retire_from_morocco
			else = {
				country_event = {
					id = ww1_morocco.26
					days = 3
				}
			}
		}
		
		set_country_flag = {
			flag = wait_25_days
			days = 25
			value = 1
		}
	}
}

# German financial crisis gets worse
country_event = {
	id = ww1_morocco.18
	title = ww1_morocco.18.t
	desc = ww1_morocco.18.d
	picture = GFX_report_event_gathering_protest
	is_triggered_only = yes
	option = {
		name = ww1_morocco.18.a
		swap_ideas = {
			remove_idea = GER_financial_crisis_of_agadir
			add_idea = GER_financial_crisis_of_agadir_2
		}
	}
}

# Spainish Morocco
country_event = {
	id = ww1_morocco.20
	title = ww1_morocco.20.t
	desc = ww1_morocco.20.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.20.a
		SPR_alfonso_xiii = {
			add_country_leader_trait = SPR_el_africano
		}
		FRA = {
			every_state = {
				limit = {
					OR = {
						is_owned_or_subject_PREV_trigger = yes
						SPR = {
							is_owned_or_subject_PREV_trigger = yes
						}
					}			
					OR = {
						state = 290
						state = 1137
					}
				}
				if = {
					limit = {
						MRS = {
							OR = {
								exists = no
								is_subject_of = ROOT
							}
						}					
					}
					transfer_state_to = MRS
					add_core_of = MRS
					MRS = { set_country_flag = protectorate }
					ROOT = {
						set_autonomy = {
							target = MRS
							autonomy_state = autonomy_tgwr_integrated_protectorate
							freedom_level = 0.6
						}
					}
					FRA = { give_guarantee = MRS }			
					MOR = { give_guarantee = MRS }
					hidden_effect = {
						MRS = {
							give_military_access = MOR
							set_politics = {
								ruling_party = neutrality
								elections_allowed = no
							}
							set_popularities = {
								neutrality = 100
							}
							add_state_claim = 807 #officially as part of the Spanish protectorate in Morocco, but mainly administered alongside Saguía el-Hamra and Río de Oro as part of Spanish Sahara
						}
					}
				}
				else = {
					transfer_state_to = ROOT
				}
			}		
			if = {
				limit = {
					807 = {
						is_owned_or_subject_PREV_trigger = yes
					}
				}
				807 = { transfer_state_to = ROOT } 
			}			
		}
	}
}


# Agadir Crisis
news_event = {
	id = ww1_morocco.23
	title = ww1_morocco.23.t
	desc = ww1_morocco.23.d
	picture = EVENT_hoi4tgw_france_at_war

	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.23.a
		trigger = {
			tag = FRA
		}
	}

	option = {
		name = ww1_morocco.23.b
		trigger = {
			tag = GER
		}
		custom_effect_tooltip = GER_decisions_agadir
		activate_mission = GER_agadir_crisis_opportunity
	}
	option = {
		name = ww1_morocco.23.c
		trigger = {
			NOT = {
				tag = GER
				tag = FRA
				tag = ENG
				tag = SPR
			}
		}
	}
	option = {
		name = ww1_morocco.23.e
		trigger = {
			tag = ENG
		}
	}
	option = {
		name = ww1_morocco.23.f
		trigger = {
			tag = SPR
		}
	}
}

# germany remove SMS panther
country_event = {
	id = ww1_morocco.24
	title = ww1_morocco.24.t
	desc = ww1_morocco.24.d
	picture = GFX_report_event_usa_destroyers

	major = no
	is_triggered_only = yes

	option = {
		name = ww1_morocco.24.a
		trigger = {
			tag = FRA
		}
	}
	option = {
		name = ww1_morocco.24.b
		trigger = {
			tag = ENG
		}

	}
}

# will british intervene ? 
country_event = {
	id = ww1_morocco.25
	title = ww1_morocco.25.t
	picture = GFX_report_event_usa_destroyers
	desc = {
		text = ww1_morocco.25.d.forcongo
		trigger = {
			has_global_flag = agadir_german_demand_congo
		}
	}
	desc = {
		text = ww1_morocco.25.d.forsouthmorocco
		trigger = {
			has_global_flag = agadir_german_southern_morocco
		}
	}
	desc = {
		text = ww1_morocco.25.d.forfreemorocco
		trigger = {
			has_global_flag = agadir_german_free_morocco
		}
	}
	major = no
	is_triggered_only = yes

	option = {
		name = ww1_morocco.25.a
		set_global_flag = agadir_british_support_france
		FRA = {
			country_event = {
				id = ww1_morocco.16
				days = 1
			}
		}
		ai_chance = {
			base = 500
		}
	}
	option = {
		name = ww1_morocco.25.b #neutral
		ai_chance = {
			base = 0
		}
	}
}

# What germany want ? 
country_event = {
	id = ww1_morocco.26
	title = ww1_morocco.26.t
	desc = ww1_morocco.26.d
	picture = GFX_report_event_usa_destroyers

	major = no
	is_triggered_only = yes

	option = {	#huh we want french congo - historical
		name = ww1_morocco.26.a
		custom_effect_tooltip = historical_tt
		set_country_flag = GER_shame_in_agadir
		set_global_flag = agadir_german_demand_congo
		trigger = {
			FRA = {
				any_state = {
					is_owned_or_subject_PREV_trigger = yes
					OR = {
						state = 814
						state = 1143
						state = 815
						state = 1144
					}
				}
			}
		}
		ENG = {
			country_event = {
				id = ww1_morocco.25
				days = 1
			}
		}
		FRA = {
			country_event = {
				id = ww1_morocco.8
				days = 14
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 500
			}
		}
	}
	option = {
		name = ww1_morocco.26.b #huh give us southern morocco
		set_global_flag = agadir_german_southern_morocco
		set_country_flag = GER_shame_in_agadir
		trigger = {
			FRA = {
				any_state = {
					OR = {
						is_owned_or_subject_trigger = yes
						is_owned_by = MOR
						is_owned_by = SPR
					}
					OR = {
						state = 807
						state = 783
					}
				}
			}
		}
		ENG = {
			country_event = {
				id = ww1_morocco.25
				hours = 6
			}
		}
		FRA = {
			country_event = {
				id = ww1_morocco.8
				days = 14
			}
		}
		ai_chance = {
			base = 10
		}
	}
	option = {
		name = ww1_morocco.26.c #morocco must be free
		set_global_flag = agadir_german_free_morocco
		ENG = {
			country_event = {
				id = ww1_morocco.25
				hours = 6
			}
		}
		FRA = {
			country_event = {
				id = ww1_morocco.8
				days = 14
			}
		}
		ai_chance = {
			base = 5
		}
	}
	# option = {
	# 	name = ww1_morocco.26.e #give us money
	# 	ai_chance = {
	# 		factor = 5
	# 	}
	# }
	# option = {
	# 	name = ww1_morocco.26.f #nothing, we are cucked
	# 	ai_chance = {
	# 		factor = 1
	# 	}
	# }
}


# the agadir crisis has been ignored by germany
country_event = {
	id = ww1_morocco.27
	title = ww1_morocco.27.t
	desc = ww1_morocco.27.d
	picture = GFX_report_event_usa_destroyers
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			delete_crisis = yes
		}
	}
	option = {
		name = ww1_morocco.27.a
	}
}

# germany is warned of French occupation of morocco
country_event = {
	id = ww1_morocco.28
	title = ww1_morocco.28.t
	desc = ww1_morocco.28.d
	picture = GFX_report_event_usa_destroyers
	is_triggered_only = yes

	option = {
		name = ww1_morocco.28.a
	}
}

# morocco rebellion defeated
country_event = {
	id = ww1_morocco.29
	title = ww1_morocco.29.t
	desc = ww1_morocco.29.d
	picture = GFX_report_event_arab_revolt
	is_triggered_only = yes

	option = {
		annex_country = {
			target = MOR
		}
		country_event = {
			id = ww1_morocco.2
			days = 2
		}
		name = ww1_morocco.29.a
	}
}

# moroccan forces beat the french
country_event = {
	id = ww1_morocco.31
	title = ww1_morocco.31.t
	desc = ww1_morocco.31.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.31.a
		white_peace = FRA
		hidden_effect = {
			every_country = {
				limit = {
					has_war_with = MOR
					has_war_together_with = FRA
				}
				white_peace = MOR
			}
		}
		every_state = {
			limit = {
				is_owned_by = FRA
				OR = {
					is_core_of = MOR
					state = 996
				}
				
			}
			transfer_state_to = MOR
		}
		news_event = ww1_morocco.33

	}
}

# moroccan survived
country_event = {
	id = ww1_morocco.32
	title = ww1_morocco.32.t
	desc = ww1_morocco.32.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.32.a
		white_peace = FRA
		hidden_effect = {
			every_country = {
				limit = {
					has_war_with = MOR
					has_war_together_with = FRA
				}
				white_peace = MOR
			}
		}
		every_state = {
			limit = {
				is_owned_by = FRA
				is_core_of = MOR
				
			}
			transfer_state_to = MOR
		}
		news_event = ww1_morocco.33
	}
}


# french defeat news
news_event = {
	id = ww1_morocco.33
	title = ww1_morocco.33.t
	desc = ww1_morocco.33.d
	picture = EVENT_hoi4tgw_france_at_war
	immediate = {
		hidden_effect = {
			set_global_flag = agadir_crisis_ends
		}
	}
	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.33.a
		trigger = {
			tag = FRA
		}
	}
	option = {
		name = ww1_morocco.33.c
		trigger = {
			NOT = {
				tag = GER
				tag = FRA
				tag = ENG
				tag = SPR
			}
		}
	}
	option = {
		name = ww1_morocco.33.e
		trigger = {
			tag = ENG
		}
	}
	option = {
		name = ww1_morocco.33.f
		trigger = {
			tag = SPR
		}
	}
}


# moroccan reclaim lands
country_event = {
	id = ww1_morocco.34
	title = ww1_morocco.34.t
	desc = ww1_morocco.34.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.34.a
		every_owned_state = {
			limit = {
				is_core_of = MOR
			}
			transfer_state_to = MOR
		}
		
		add_political_power = -100
		FROM = {
			country_event = {
				id = ww1_morocco.36
				days = 2
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				has_war = yes
				factor = 500
			}
			modifier = {
				FROM = {
					has_army_size = {
						size > 20
					}
				}
				add = 10
			}
			modifier = {
				FROM = {
					has_army_size = {
						size > 30
					}
				}
				add = 50
			}
		}
	}
	option = {
		name = ww1_morocco.34.b
		FROM = {
			country_event = {
				id = ww1_morocco.35
				days = 2
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				FROM = {
					has_army_size = {
						size < 15
					}
				}
				add = 100
			}
			modifier = {
				FROM = {
					has_army_size = {
						size < 5
					}
				}
				add = 100
			}
		}
	}
}


# FROM dont give lands
country_event = {
	id = ww1_morocco.35
	title = ww1_morocco.35.t
	desc = ww1_morocco.35.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.35.a
		create_wargoal = {
			type = take_claimed_state
			target = FROM
		}
	}
}

# FROM give lands
country_event = {
	id = ww1_morocco.36
	title = ww1_morocco.36.t
	desc = ww1_morocco.36.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.36.a
	}
}


############################################################################################################################################


# German Protectorate Interwar
country_event = {
	id = ww1_morocco.19
	title = ww1_morocco.19.t
	desc = ww1_morocco.19.d
	picture = GFX_report_event_arab_protests
	trigger = {
		tag = GER
		has_war = no
		OR = {
			AND = {
				any_owned_state = { is_core_of = MOR }
				NOT = { country_exists = MOR }
			}
			AND = {
				MOR = {
					NOT = { 
						has_country_flag = great_war_winner 
						is_subject_of = ROOT
					}
				}
				has_country_flag = great_war_winner
				has_global_flag = agadir_crisis
			}
		}
		has_global_flag = frankfurt_treaty
	}
	fire_only_once = yes
	option = {
		name = ww1_morocco.19.a
		# Loyal protectorate
		GER = {
			every_owned_state = {
				limit = {
					OR = {
						is_core_of = MOR
						state = 461 
						state = 1094
						state = 462
						state = 108
						state = 1095
					}
					NOT = {
						state = 743
						state = 783
						state = 887
					}
				}
				transfer_state_to = MOR
				add_core_of = MOR
			}
			MOR = { 
				get_current_government_type = yes
				set_country_flag = protectorate 
			}
			set_autonomy = {
				target = MOR
				autonomy_state = autonomy_tgwr_protectorate
				freedom_level = 0.6
			}
			hidden_effect = {
				MOR = {
					restore_previous_government_type = yes
					every_owned_state = {
						limit = { is_claimed_by = OVERLORD }
						remove_claim_by = OVERLORD
					}
				}
			}
		}
	}
	option = {
		name = ww1_morocco.19.b
		# The Germans fools us!
		trigger = {
			any_owned_state = {
				is_core_of = MOR
			}
		}
		every_owned_state = {
			limit = { is_core_of = MOR }
			add_compliance = -50
			add_resistance = 30
		}
		ai_chance = { base = 0 }
	}
}

# Yusef dies
country_event = {
	id = ww1_morocco.21
	title = ww1_morocco.21.t
	desc = ww1_morocco.21.d
	picture = GFX_report_event_generic_funeral
	fire_only_once = yes
	trigger = {
		tag = MOR
		date > 1927.11.1
		has_character = MOR_yusef_bin_hassan
	}
	mean_time_to_happen = {
		days = 17
	}
	option = {
		name = ww1_morocco.21.a
		retire_character = MOR_yusef_bin_hassan
		add_country_leader_role = {
			character = MOR_muhammad_bin_yusef
			promote_leader = yes
			country_leader = {
				ideology = semi_constitutional_monarchy
			}
		}
	}
}

# Tangier International Zone
country_event = {
	id = ww1_morocco.22
	title = ww1_morocco.22.t
	desc = ww1_morocco.22.d
	picture = GFX_report_event_generic_peaceful_annexation
	trigger = {
		country_exists = TGR
		is_subject = no
		NOT = {
			has_war_with = TGR
			has_war_with = FRA
			has_war_with = MOR
			has_country_flag = great_war_loser
		}
		OR = {
			original_tag = ENG
			original_tag = SPR
			is_neighbor_of = TGR
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_morocco.22.b
		give_guarantee = TGR
		TGR = { give_military_access = ROOT }
	}
}



##########################################################

# The Rif #
# Riffian Tribesmen strongly resists the Spanish
country_event = {
	id = ww1_rif.1
	title = ww1_rif.1.t
	desc = ww1_rif.1.d
	picture = GFX_report_event_india_protests
	trigger = {
		tag = SPR
		290 = { is_owned_or_subject_trigger = yes }
		has_start_date < 1914.1.1
	}
	fire_only_once = yes
	option = {
		name = ww1_rif.1.a
		290 = { add_core_of = RIF }
		1137 = { add_core_of = RIF }
		random_subject_country = {
			limit = {
				290 = {
					is_core_of = PREV
				}
			}
			remove_state_core = 290
			add_state_claim = 290
		}
		290 = {
			start_resistance = yes
			add_compliance = -30
			add_resistance = 30
		}
		#add_manpower = -40000
	}
}

# Disaster of Annual
country_event = {
	id = ww1_rif.2
	title = ww1_rif.2.t
	desc = ww1_rif.2.d
	picture = GFX_report_event_spr_army_of_africa
	trigger = {
		tag = SPR
		290 = { is_owned_or_subject_trigger = yes }
		date > 1921.6.1
	}
	fire_only_once = yes
	mean_time_to_happen = { days = 22 }
	option = {
		name = ww1_rif.2.a
		add_manpower = -13363
		retire_character = SPR_manuel_fernandez_silvestre
		add_war_support = -0.05
		RIF = { add_manpower = -800 }
		290 = { set_demilitarized_zone = yes }
		hidden_effect = {
			country_event = {
				id = ww1_rif.3
				days = 20
			}
			set_country_flag = disaster_of_annual
		}
	}
}


# Republic of the Rif Proclaimed
country_event = {
	id = ww1_rif.3
	title = ww1_rif.3.t
	desc = ww1_rif.3.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	trigger = {
		owns_state = 290
	}
	immediate = {
		hidden_effect = {
			290 = { add_core_of = RIF }
			1137 = { add_core_of = RIF }
			743 = { add_claim_by = RIF }
			division_template = {
				name = "Regimiento de guarnición en Marruecos"
				division_names_group = SPR_GAR_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
				}
			}
			RIF = {
				division_template = {
					name = "Harka"
					regiments = {
						irregular_infantry = { x = 0 y = 0 }
						irregular_infantry = { x = 0 y = 1 }
						irregular_infantry = { x = 0 y = 1 }
						irregular_infantry = { x = 1 y = 0 }
						irregular_infantry = { x = 1 y = 1 }
						irregular_infantry = { x = 1 y = 2 }
					}
				}
			}
		}
	}
	option = {
		name = ww1_rif.3.a
		290 = { set_demilitarized_zone = no }
		RIF = {
			transfer_state = 290
			hidden_effect = {
				add_victory_points = {
					province = 7215
					value = 1
				}
				PREV = {
					set_province_controller = 12100
					1137 = {
						create_unit = {
							division = "name = \"Guarnición de Melilla\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12100
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Guarnición de Ceuta\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12087
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Guarnición de Melilla\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12100
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Guarnición de Ceuta\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12087
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				290 = {
					create_unit = {
						division = "name = \"Axdir Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 7215
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Chauen Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 12087
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Axdir Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 7215
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Chauen Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 12087
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { 
					1137 = {
						is_owned_or_subject_trigger = yes
					}
				}
				1137 = {
					owner = {
						set_province_controller = 12100
						add_state_claim = 290
					}
				}
				else = {
					set_province_controller = 12100
					add_state_claim = 290
				}
			}
		}
		declare_war_on = {
			target = RIF
			type = annex_everything
		}
		every_subject_country = {
			limit = {
				original_tag = MOR
			}
			add_to_war = {
				targeted_alliance = ROOT
				enemy = RIF
			}
			add_civil_war_target = RIF
		}
	}
	option = {
		name = ww1_rif.3.b
		trigger = { is_ai = no }
		290 = { set_demilitarized_zone = no }
		RIF = {
			transfer_state = 290
			hidden_effect = {
				add_victory_points = {
					province = 7215
					value = 1
				}
				PREV = {
					set_province_controller = 12100
					1137 = {
						create_unit = {
							division = "name = \"Guarnición de Melilla\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12100
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Guarnición de Ceuta\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12087
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Guarnición de Melilla\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12100
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "name = \"Guarnición de Ceuta\" division_template = \"Regimiento de guarnición en Marruecos\" start_experience_factor = 0.3 start_equipment_factor = 1.0"
							owner = ROOT
							prioritize_location = 12087
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				290 = {
					create_unit = {
						division = "name = \"Axdir Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 7215
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Chauen Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 12087
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Axdir Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 7215
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"Chauen Harka\" division_template = \"Harka\" start_experience_factor = 1.0 start_equipment_factor = 1.0"
						owner = RIF
						prioritize_location = 12087
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = { 
					1137 = {
						is_owned_or_subject_trigger = yes
					}
				}
				1137 = {
					owner = {
						set_province_controller = 12100
						add_state_claim = 290
					}
				}
				else = {
					set_province_controller = 12100
					add_state_claim = 290
				}
			}
		}
		declare_war_on = {
			target = RIF
			type = annex_everything
		}
		every_subject_country = {
			limit = {
				original_tag = MOR
			}
			add_to_war = {
				targeted_alliance = ROOT
				enemy = RIF
			}
			add_civil_war_target = RIF
		}
		RIF = { change_tag_from = ROOT }
	}
}

# French Invervention on the Rif?
country_event = {
	id = ww1_rif.4
	title = ww1_rif.4.t
	desc = ww1_rif.4.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_rif.4.a
		declare_war_on = {
			target = RIF
			type = topple_government
		}
		if = {
			limit = { has_subject = MOR }
			MOR = {
				add_to_war = {
					targeted_alliance = ROOT
					enemy = RIF
				}
			}
		}
	}
}

# Spanish withdraws from the Rif
country_event = {
	id = ww1_rif.5
	title = ww1_rif.5.t
	desc = ww1_rif.5.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_rif.5.a
		FROM = {
			white_peace = ROOT
		}
		
		if = {
			limit = {
				has_war_with = FRA
			}
			FRA = {
				white_peace = ROOT
			}		
		}
		FROM = {
			every_state = {
				limit = {
					is_owned_or_subject_PREV_trigger = yes
					is_core_of = ROOT
				}
				transfer_state_to = ROOT
				remove_claim_by = FROM
			}
		}
		if = {
			limit = {
				MRS = {
					exists = no
				}
			}
			MRS = {
				every_state = {
					limit = {
						OR = {
							is_core_of = PREV
							is_claimed_by = PREV
						}							
					}
					remove_claim_by = MRS
					remove_core_of = MRS
				}
			}

		}
		add_war_support = 0.20
		add_stability = 0.15
		add_political_power = 250
		remove_ideas = standing_alone
	}
}

# will french accept the morrocan loan ?
country_event = {
	id = ww1_morocco.38
	title = ww1_morocco.38.t
	desc = ww1_morocco.38.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.38.a
		#yes
		add_political_power = 15
		MOR = {
			add_opinion_modifier = {
				target = FRA
				modifier = small_increase
			}
			effect_tooltip = {
				swap_ideas = {
					add_idea = MOR_economical_crisis2
					remove_idea = MOR_economical_crisis
				}
			}
			country_event = {
				id = ww1_morocco.39
				days = 2
			}
		}
		ai_chance = {
			base = 500
		}
	}
	option = {
		name = ww1_morocco.38.b
		MOR = {
			add_opinion_modifier = {
				target = FRA
				modifier = small_decrease
			}
			country_event = {
				id = ww1_morocco.40
				days = 2
			}
		}
		ai_chance = {
			base = 2 #hahaha
		}
	}
}

# they said yes
country_event = {
	id = ww1_morocco.39
	title = ww1_morocco.39.t
	desc = ww1_morocco.39.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.39.a
		add_stability = 0.05
		MOR_improve_economical_situation = yes
	}
}

#oh no
country_event = {
	id = ww1_morocco.40
	title = ww1_morocco.40.t
	desc = ww1_morocco.40.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.40.a
		add_political_power = -50
	}
}

#lore about tertib darija of Moulay Aziz
country_event = {
	id = ww1_morocco.41
	title = ww1_morocco.41.t
	desc = ww1_morocco.41.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.41.a
		add_political_power = 10
	}
}

#famine in morocco
country_event = {
	id = ww1_morocco.42
	title = ww1_morocco.42.t
	desc = ww1_morocco.42.d
	picture = GFX_tunis_streets
	trigger = {
		has_start_date < 1913.1.1
		date > 1910.8.8
		tag = MOR
		NOT = {
			has_country_flag = MOR_1911_famine
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_morocco.42.a
		set_country_flag = MOR_1911_famine
		add_stability = -0.05
		every_owned_state = {
			limit = {
				OR = {
					state = 461
					state = 290
					state = 1137
					state = 807
					state = 699
					state = 108
					state = 1095
				}
			}
			add_dynamic_modifier = {
				modifier = sahel_local_famine
				days = 320
			}
		}
	}
}

country_event = {
	id = ww1_morocco.43
	title = ww1_morocco.43.t
	desc = ww1_morocco.43.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.43.a
		custom_effect_tooltip = historical_tt
		add_stability = -0.02
		set_country_flag = MOR_french_excavation_mission
		set_country_flag = MOR_german_excavation_mission
		add_opinion_modifier = {
			target = FRA
			modifier = small_increase
		}
		add_opinion_modifier = {
			target = GER
			modifier = small_increase
		}
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = ww1_morocco.43.b
		add_opinion_modifier = {
			target = FRA
			modifier = small_increase
		}
		set_country_flag = MOR_french_excavation_mission
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
	option = {
		name = ww1_morocco.43.c
		add_opinion_modifier = {
			target = GER
			modifier = small_increase
		}
		set_country_flag = MOR_german_excavation_mission
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

#fierce opposition to centralization reform
country_event = {
	id = ww1_morocco.44
	title = ww1_morocco.44.t
	desc = ww1_morocco.44.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.44.a
		custom_effect_tooltip = historical_tt
		add_stability = -0.15
		add_manpower = -143
		add_timed_idea = {
			idea = strikes_2
			days = 120
		}
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = ww1_morocco.44.b
		
		swap_ideas = {
			add_idea = MOR_decentralized_tribal_state
			remove_idea = MOR_decentralized_tribal_state2
		}
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

#unpopular army reform funding
country_event = {
	id = ww1_morocco.45
	title = ww1_morocco.45.t
	desc = ww1_morocco.45.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 5
	option = {
		name = ww1_morocco.45.a
		custom_effect_tooltip = historical_tt
		#yes, new taxes for the reform
		hidden_effect = {
			country_event = {
				id = ww1_morocco.46
				days = 40
			}
		}
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = ww1_morocco.45.b
		#fund it with the royal accounts
		add_stability = 0.05
		MOR_weaken_economical_situation = yes
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				NOT = {
					has_game_rule = {
						rule = MOR_ai_behavior 
						option = MOR_SUCCESSFUL_ARMY_REFORM
					}
					has_game_rule = {
						rule = MOR_ai_behavior 
						option = MOR_SUCCESSFUL_ARMY_REFORM_PASSIVE
					}
				}
				factor = 0
			}
			modifier = {
				OR = {
					has_game_rule = {
						rule = MOR_ai_behavior 
						option = MOR_SUCCESSFUL_ARMY_REFORM
					}
					has_game_rule = {
						rule = MOR_ai_behavior 
						option = MOR_SUCCESSFUL_ARMY_REFORM_PASSIVE
					}
				}
				factor = 500
			}
		}
	}
}

#Southern Caïds refuses to pay the new tax
country_event = {
	id = ww1_morocco.46
	title = ww1_morocco.46.t
	desc = ww1_morocco.46.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 5
	option = {
		name = ww1_morocco.46.a
		add_stability = -0.15
		ai_chance = {
			base = 50
		}
	}
}

#will Caîds rebels ?
country_event = {
	id = ww1_morocco.47
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		if = {
			limit = {
				has_stability < 0.3	
			}
			country_event = ww1_morocco.1
			else = {
				country_event = ww1_morocco.49
			}
		}
	}
}

#Southern Caïds are calm, reforms is a success !
country_event = {
	id = ww1_morocco.49
	title = ww1_morocco.49.t
	desc = ww1_morocco.49.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 5
	option = {
		name = ww1_morocco.49.a
		add_research_slot = 1
		add_stability = 0.07
		add_war_support = 0.15
		increase_conscription = yes
		add_doctrine_cost_reduction = {
			name = MOR_new_army_reform
			cost_reduction = 0.5
			category = land_doctrine
			uses = 2
		}
		army_experience = 25
		navy_experience = 20
		air_experience = 10
	}
}

#you need to invest into Izayan to get their help
country_event = {
	id = ww1_morocco.50
	title = ww1_morocco.50.t
	desc = ww1_morocco.50.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	timeout_days = 5
	option = {
		name = ww1_morocco.50.a
		add_political_power = -100
		add_stability = -0.05
		1095 = {
			add_dynamic_modifier = {
				modifier = MOR_authorized_nzala
			}
		}
		set_country_flag = izayan_tribes_allied
		hidden_effect = {
			division_template = {
				name = "Izayan Tribes"
				regiments = {
					mountaineers = { x = 0 y = 0 }
					mountaineers = { x = 0 y = 1 }
					mountaineers = { x = 1 y = 0 }
					mountaineers = { x = 1 y = 1 }
				}
				is_locked = yes
			}
			1095 = {
				create_unit = {
					division = "name = \"Izayan Tribes\" division_template = \"Izayan Tribes\" start_experience_factor = 2.0 start_equipment_factor = 0.6"
					owner = ROOT
					prioritize_location = 1207
					allow_spawning_on_enemy_provs = yes
				}
			}
		}
		custom_effect_tooltip = MOR_spawn_4_moutaineers_in_middle_atlas
	}
	option = {
		name = ww1_morocco.50.b
		add_stability = 0.02
	}
}

country_event = {
	id = ww1_morocco.51
	title = ww1_morocco.51.t
	desc = ww1_morocco.51.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.51.a
		hidden_effect = {
			division_template = {
				name = "Chaouia Tribes"
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
				}
				is_locked = yes
			}
			1093 = {
				create_unit = {
					division = "name = \"Chaouia Tribes\" division_template = \"Chaouia Tribes\" start_experience_factor = 0.8 start_equipment_factor = 0.4"
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
					count = 3
				}
			}
		}
		custom_effect_tooltip = MOR_spawn_3_regiments_in_meknes
	}
}

country_event = {
	id = ww1_morocco.52
	title = ww1_morocco.52.t
	desc = ww1_morocco.52.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.52.a
		add_political_power = 50
		add_stability = 0.02
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = MOR_thami_aglaou
		set_country_flag = MOR_thami_aglaou_pasha
	}
	option = {
		name = ww1_morocco.52.b
		add_war_support = 0.02
		1094 = {
			add_dynamic_modifier = {
				modifier = generic_local_investments
				days = 720
			}
		}
		custom_effect_tooltip = available_political_advisor
		show_ideas_tooltip = MOR_taieb_el_goundafi
		set_country_flag = MOR_taieb_el_goundafi_pasha
	}
}

country_event = {
	id = ww1_morocco.53
	title = ww1_morocco.53.t
	desc = ww1_morocco.53.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.53.a
		#relative autonomy
		add_stability = 0.3
		every_owned_state = {
			limit = {
				OR = {
					state = 1095
					state = 1094
					state = 807
					state = 783
				}
			}
			add_dynamic_modifier = {
				modifier = autonomous_state
			}
		}
	}
	option = {
		name = ww1_morocco.53.b
		add_stability = 0.5
		MOR_create_kingdom_of_tazeroualt = yes
		every_owned_state = {
			limit = {
				OR = {
					state = 1095
					state = 783
				}
			}
			add_dynamic_modifier = {
				modifier = autonomous_state
			}
		}
	}
}

country_event = {
	id = ww1_morocco.54
	title = ww1_morocco.54.t
	desc = ww1_morocco.54.d
	picture = GFX_morocco_tribes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_morocco.54.a
		#guarantees to Caïds
		if = {
			limit = {
				#has_country_leader = { 
				#	character = MOR_mulay_abdelhafid
				#}
				# already check when fires event
				MOR_mulay_abdelhafid = {
					has_ideology = semi_constitutional_monarchy
					has_trait = unpopular_sultan
				}
			}
			remove_trait = {
				character = MOR_mulay_abdelhafid
				ideology = semi_constitutional_monarchy
				trait = unpopular_sultan
			}
		}
	}
}

# Treaty of Fès
news_event = {
	id = ww1_morocco.55
	title = ww1_morocco.55.t
	desc = ww1_morocco.55.d
	picture = EVENT_hoi4tgw_agadir_crisis

	major = yes
	is_triggered_only = yes
	fire_for_sender = yes
	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = FRA
						tag = MOR
					}
				}
				country_event = {
					id = ww1_morocco.58
					days = 8
				}
			}
		}
	}
	option = {
		name = ww1_morocco.55.a
		trigger = {
			OR = {
				has_war_with = FRA
				is_in_faction_with = GER
				tag = GER
				has_opinion	= {
					target = FRA
					value < -10
				}
			}
		}
	}
	option = {
		name = ww1_morocco.55.b
		trigger = {
			OR = {
				is_subject_of = FRA
				tag = FRA
				has_opinion	= {
					target = FRA
					value > 15
				}
			}
		}
	}
	option = {
		name = ww1_morocco.55.c
		trigger = {
			has_opinion	= {
				target = FRA
				value > -11
			}
			has_opinion	= {
				target = FRA
				value < 16
			}
		}
	}
}

#5 months after fes treaty, mulay abdelhafid abdicates
country_event = {
	id = ww1_morocco.56
	title = ww1_morocco.56.t
	desc = ww1_morocco.56.d
	picture = GFX_tunis_streets
	trigger = {
		tag = MOR
		is_subject_of = FRA
		has_country_leader = {
			character = MOR_mulay_abdelhafid
		}
		has_country_flag = FRA_ww1_treaty_of_fes
		NOT = {
			has_country_flag = MOR_resign_in
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_morocco.56.a
		hidden_effect = {
			MOR_mulay_abdelhafid = {
				remove_country_leader_role = {
					ideology = semi_constitutional_monarchy
				}
			}
		}
		promote_character = MOR_yusef_bin_hassan
		ai_chance = {
			base = 150
		}
	}
	option = {
		name = ww1_morocco.56.b
		hidden_effect = {
			MOR_mulay_abdelhafid = {
				remove_country_leader_role = {
					ideology = semi_constitutional_monarchy
				}
			}
		}
		add_manpower = -1
		retire_character = MOR_mulay_abdelhafid
		promote_character = MOR_yusef_bin_hassan
		ai_chance = {
			base = 50
		}
	}
}

#campaign of morocco
country_event = {
	id = ww1_morocco.57
	title = ww1_morocco.57.t
	desc = ww1_morocco.57.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = no #for france and morocco
	option = {
		name = ww1_morocco.57.a
		set_country_flag = tribes_rebels_in_south_morocco
		MOR_ahmed_al_hiba_rebellion = yes
		hidden_effect = {
			if = {
				limit = {
					tag = MOR
				}
				1094 = {
					set_demilitarized_zone = no
				}
				1095 = {
					set_demilitarized_zone = no
				}
			}
		}
		effect_tooltip = {
			custom_effect_tooltip = MOR_rebels_declare_war
			RMO = {
				declare_war_on = {
					target = MOR
					type = civil_war
				}
			}
		}

		ai_chance = {
			base = 150
		}
	}
}

#campaign of morocco
country_event = {
	id = ww1_morocco.58
	title = ww1_morocco.58.t
	desc = ww1_morocco.58.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = no #for france and morocco
	option = {
		name = ww1_morocco.58.a
		custom_effect_tooltip = MOR_rebels_declare_war_soon
		hidden_effect = {
			country_event = {
				id = ww1_morocco.57
				days = 12
			}
		}
		1094 = {
			set_demilitarized_zone = yes
		}
		1095 = {
			set_demilitarized_zone = yes
		}
		ai_chance = {
			base = 150
		}
	}
}

#morocco is called in WW1
country_event = {
	id = ww1_morocco.59
	title = ww1_morocco.59.t
	desc = ww1_morocco.59.d
	picture = GFX_report_event_generic_peaceful_annexation
	trigger = {
		tag = MOR
		is_subject_of = FRA
		has_war = no
		FRA = {
			has_war_with_major = yes
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_morocco.59.a
		if = {
			limit = {
				FRA = {
					has_war_with = GER
				}
			}
			add_to_war = {
				targeted_alliance = FRA
				enemy = GER
			}
			else = {	#for ahistorical conflicts with majors
				random_country = {
					limit = {
						is_major = yes
						has_war_with = FRA
					}
					MOR = {
						add_to_war = {
							targeted_alliance = FRA
							enemy = PREV
						}
					}
				}
			}
		}
		ai_chance = {
			base = 150
		}
	}
}

#morocco flirt with germany
country_event = {
	id = ww1_morocco.60
	title = ww1_morocco.60.t
	desc = ww1_morocco.60.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		#yes its cool
		name = ww1_morocco.60.a
		add_political_power = 50
		add_war_support = 0.02
		FROM = {
			country_event = {
				id = ww1_morocco.61
				days = 4
			}
		}
		ai_chance = {
			base = 150
		}
	}
	option = {
		#nah
		name = ww1_morocco.60.b
		add_political_power = -25
		FROM = {
			country_event = {
				id = ww1_morocco.62
				days = 7
			}
		}
		ai_chance = {
			base = 1
		}
	}
}

#germany is receptive to flirt and might be gay
country_event = {
	id = ww1_morocco.61
	title = ww1_morocco.61.t
	desc = ww1_morocco.61.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_morocco.61.a
		add_political_power = 100
	}
}

country_event = {
	id = ww1_morocco.62
	title = ww1_morocco.62.t
	desc = ww1_morocco.62.d
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = ww1_morocco.62.a
		add_political_power = -10
	}
}


#Moroccan ask french forces to leave
country_event = {
	id = ww1_morocco.63
	title = ww1_morocco.63.t
	desc = ww1_morocco.63.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.63.a
		add_political_power = -75
		add_war_support = -0.05
		custom_effect_tooltip = MOR_this_could_lead_to_a_political_crisis
		#nah
		MOR = {
			country_event = {
				id = ww1_morocco.68
				days = 8
			}
		}
		ai_chance = {
			base = 150
			modifier = {
				MOR = {
					is_in_faction = yes
				}
				factor = 0.5
			}
			modifier = {
				MOR = {
					is_in_faction_with = GER
				}
				factor = 0.5
			}
			modifier = {
				has_war = yes
				factor = 0.1
			}
		}
	}
	option = {
		name = ww1_morocco.63.b
		#okay but pay
		MOR = {
			country_event = {
				id = ww1_morocco.65
				days = 4
			}
		}
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = ww1_morocco.63.c
		add_stability = 0.02
		MOR = {
			country_event = {
				id = ww1_morocco.64
				days = 3
			}
		}
		#okay we leave
		ai_chance = {
			base = 5
			modifier = {
				has_war = yes
				factor = 20
			}
		}
	}
}

#France leave Morocco peacefuly
country_event = {
	id = ww1_morocco.64
	title = ww1_morocco.64.t
	desc = ww1_morocco.64.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.64.a
		add_stability = 0.1
		every_state = {
			limit = {
				is_core_of = MOR
				is_controlled_by = FRA
			}
			transfer_state_to = MOR
		}
		if = {
			limit = {
				has_global_flag = casablanca_crisis_alert
			}
			hidden_effect = {
				delete_crisis = yes
			}
			news_event = ww1_morocco.75
		}
	}
}

#France leave but asks money
country_event = {
	id = ww1_morocco.65
	title = ww1_morocco.65.t
	desc = ww1_morocco.65.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.65.a
		add_stability = 0.05
		every_state = {
			limit = {
				is_core_of = MOR
				is_controlled_by = FRA
			}
			transfer_state_to = MOR
		}
		MOR_weaken_economical_situation = yes
		FRA = {
			country_event = {
				id = ww1_morocco.66
				days = 2
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				MOR = {
					arms_factory < 1
				}
				factor = 50
			}
			modifier = {
				MOR = {
					arms_factory > 3
				}
				factor = 0.5
			}
		}
	}
	option = {
		name = ww1_morocco.65.b
		add_war_support = 0.05
		add_stability = -0.1
		custom_effect_tooltip = MOR_this_could_lead_to_a_political_crisis
		FRA = {
			country_event = {
				id = ww1_morocco.67
				days = 4
			}
		}
		country_event = {
			id = ww1_morocco.68
			days = 8
		}
		ai_chance = {
			base = 100
			modifier = {
				MOR = {
					is_in_faction = yes
				}
				factor = 2
			}
		}
	}
}

#Morocco paid
country_event = {
	id = ww1_morocco.66
	title = ww1_morocco.66.t
	desc = ww1_morocco.66.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.66.a
		add_political_power = 100
	}
}

#Morocco refuses to pay
country_event = {
	id = ww1_morocco.67
	title = ww1_morocco.67.t
	desc = ww1_morocco.67.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.67.a
		
	}
}

#France dont want to stop occupation, what should we do
country_event = {
	id = ww1_morocco.68
	title = ww1_morocco.68.t
	desc = ww1_morocco.68.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.68.a
		add_stability = 0.05
		add_war_support = -0.15
		ai_chance = {
			base = 100
			modifier = {
				has_war = yes
				factor = 10
			}
			modifier = {
				OR = {
					has_war_together_with = FRA
					is_in_faction_with = FRA
				}
				factor = 100
			}
		}
	}
	option = {
		name = ww1_morocco.68.b
		trigger = {
			GER = {
				has_war = no
			}
		}
		GER = {
			country_event = {
				id = ww1_morocco.69
				days = 2
			}
		}
		#contact germany might trigger a crisis
		ai_chance = {
			base = 600
			modifier = {
				is_in_faction_with = GER
				factor = 2
			}
		}
	}
	option = {
		name = ww1_morocco.68.c
		create_wargoal = {
			target = FRA
			type = take_claimed_state
			generator = {462 108}
		}
		ai_chance = {
			base = 200
			modifier = {
				arms_factory > 3
				factor = 3
			}
		}
	}
}

#Morocco ask german support to stop french occupation
country_event = {
	id = ww1_morocco.69
	title = ww1_morocco.69.t
	desc = ww1_morocco.69.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.69.a
		add_war_support = 0.05
		MOR = {
			add_opinion_modifier = {
				target = GER
				modifier = huge_increase
			}
			country_event = {
				id = ww1_morocco.71
				days = 1
			}
		}
		effect_tooltip = {
			news_event = ww1_morocco.70
		}
		ai_chance = {
			base = 500
		}
	}
	option = {
		name = ww1_morocco.69.b
		#contact germany might trigger a crisis
		MOR = {
			add_opinion_modifier = {
				target = GER
				modifier = small_decrease
			}
		}
		ai_chance = {
			base = 5
			modifier = {
				has_war_with_major = yes
				NOT = {
					has_war_with = FRA
				}
				factor = 50
			}
		}
	}
}

#Casablanca crisis
news_event = {
	id = ww1_morocco.70
	title = ww1_morocco.70.t
	desc = ww1_morocco.70.d
	picture = EVENT_hoi4tgw_agadir_crisis
	fire_for_sender = yes
	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.70.a
	}
}

#german accepts
country_event = {
	id = ww1_morocco.71
	title = ww1_morocco.71.t
	desc = ww1_morocco.71.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.71.a
		hidden_effect = {
			if = {
				limit = {
					has_crisis = no
				}
				start_casablanca_crisis = yes
			}
		}
		give_military_access = GER
		diplomatic_relation = {
			country = FRA
			relation = military_access
			active = no
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			producer = GER
			amount = 2500
		}
		# 887 = {
		# 	transfer_state_to = GER
		# }
		FRA = {
			country_event = {
				id = ww1_morocco.72
				days = 4
			}
		}
		news_event = ww1_morocco.70
	}
}

#France learn that germany is backuping Morocco
country_event = {
	id = ww1_morocco.72
	title = ww1_morocco.72.t
	desc = ww1_morocco.72.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.72.a
		#we dont care
		add_war_support = -0.1
		every_country = {
			limit = {
				OR = {
					tag = FRA
					tag = MOR
					tag = GER
				}
			}
			country_event = {
				id = ww1_morocco.73
				days = 4
			}
		}
		ai_chance = {
			base = 250
		}
	}
	option = {
		name = ww1_morocco.72.b
		#lets stop here
		add_political_power = -200
		add_war_support = -0.1
		every_country = {
			limit = {
				OR = {
					tag = MOR
					tag = GER
				}
			}
			country_event = {
				id = ww1_morocco.64
				days = 1
			}
		}
		ai_chance = {
			base = 150
			modifier = {
				has_war = yes
				factor = 2
			}
			modifier = {
				surrender_progress > 0.8
				factor = 20
			}
		}
	}
}

#diplomatic window to get allies or close the crisis by a deal
country_event = {
	id = ww1_morocco.73
	title = ww1_morocco.73.t
	desc = ww1_morocco.73.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.73.a
		set_global_flag = MOR_crisis_mission
	}
}

#Morocco ultimatum on France
country_event = {
	id = ww1_morocco.74
	title = ww1_morocco.74.t
	desc = ww1_morocco.74.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	immediate = {
		clr_global_flag = MOR_crisis_mission
	}
	option = {
		name = ww1_morocco.74.a
		declare_war_on = {
			target = MOR
			type = annex_everything
		}

		GER = {
			add_to_war = {
				targeted_alliance = MOR
				enemy = FRA
			}
			add_to_faction = MOR
		}
		ai_chance = {
			base = 300
		}
	}
	option = {
		name = ww1_morocco.74.b
		add_political_power = -150
		add_war_support = -0.05
		every_country = {
			limit = {
				OR = {
					tag = GER
					tag = MOR
				}
			}
			country_event = {
				id = ww1_morocco.64
				days = 3
			}
		}
		hidden_effect = {
			delete_crisis = yes
		}
		ai_chance = {
			base = 100
			modifier = {
				has_war = yes
				factor = 2
			}
			modifier = {
				surrender_progress > 0.8
				factor = 20
			}
		}
	}
}

#Casablanca crisis averted
news_event = {
	id = ww1_morocco.75
	title = ww1_morocco.75.t
	desc = ww1_morocco.75.d
	picture = EVENT_hoi4tgw_agadir_crisis
	fire_for_sender = yes
	major = yes
	is_triggered_only = yes

	option = {
		name = ww1_morocco.75.a
	}
}

#Morocco ask colonies back to spain
country_event = {
	id = ww1_morocco.76
	title = ww1_morocco.76.t
	desc = ww1_morocco.76.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.76.a
		#We can leave Sidi Ifni
		783 = {
			transfer_state_to = MOR
		}
		add_political_power = -50
		MOR = {
			country_event = {
				id = ww1_morocco.77
				days = 3
			}
		}
		ai_chance = {
			base = 250
			modifier = {
				MOR = {
					is_in_faction = yes
				}
				factor = 1.5
			}
			modifier = {
				has_war = yes
				factor = 1.5
			}
		}
	}
	option = {
		name = ww1_morocco.76.b
		#we can give them sidi ifni and mauritania
		783 = {
			transfer_state_to = MOR
		}
		699 = {
			transfer_state_to = MOR
		}
		add_political_power = -100
		add_war_support = -0.05
		MOR = {
			country_event = {
				id = ww1_morocco.77
				days = 3
			}
		}
		ai_chance = {
			base = 200
			modifier = {
				MOR = {
					is_in_faction = yes
				}
				factor = 2
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}
	}
	option = {
		name = ww1_morocco.76.c
		#give them everything, including manilla
		783 = {
			transfer_state_to = MOR
		}
		699 = {
			transfer_state_to = MOR
		}
		743 = {
			transfer_state_to = MOR
		}
		add_political_power = -150
		add_war_support = -0.10
		MOR = {
			country_event = {
				id = ww1_morocco.77
				days = 3
			}
		}
		ai_chance = {
			base = 2
			modifier = {
				has_war = yes
				factor = 1.5
			}
		}
	}
	option = {
		name = ww1_morocco.76.e
		#nothing!
		add_war_support = 0.02
		MOR = {
			country_event = {
				id = ww1_morocco.78
				days = 3
			}
		}
		ai_chance = {
			base = 200
			modifier = {
				has_war = yes
				factor = 0.5
			}
			modifier = {
				surrender_progress > 0.8
				factor = 0.2
			}
		}
	}
}

#Spain restituate land
country_event = {
	id = ww1_morocco.77
	title = ww1_morocco.77.t
	desc = ww1_morocco.77.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.77.a
		#nothing!
		add_political_power = 25
	}
}

#Spain dont restituate land
country_event = {
	id = ww1_morocco.78
	title = ww1_morocco.78.t
	desc = ww1_morocco.78.d
	picture = GFX_report_event_spr_army_of_africa
	is_triggered_only = yes
	option = {
		name = ww1_morocco.78.a
		#nothing!
		add_political_power = -25
		ai_chance = {
			base = 250
		}
	}
	option = {
		name = ww1_morocco.78.b
		#nothing!
		create_wargoal = {
			type = take_state_focus
			target = SPR
			generator = { 699 783 743 }
		}
		ai_chance = {
			base = 50
		}
	}
}

# will germany accept the morrocan loan ?
country_event = {
	id = ww1_morocco.79
	title = ww1_morocco.79.t
	desc = ww1_morocco.79.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.79.a
		#yes
		add_political_power = 15
		MOR = {
			add_opinion_modifier = {
				target = GER
				modifier = small_increase
			}
			effect_tooltip = {
				MOR_improve_economical_situation = yes
			}
			country_event = {
				id = ww1_morocco.80
				days = 2
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				has_opinion	= {
					target = MOR
					value > 9
				}
				factor = 2
			}
			modifier = {
				has_opinion	= {
					target = MOR
					value > 80
				}
				factor = 100
			}
			modifier = {
				has_opinion	= {
					target = MOR
					value < 0
				}
				factor = 0.5
			}
		}
	}
	option = {
		name = ww1_morocco.79.b
		MOR = {
			add_opinion_modifier = {
				target = GER
				modifier = small_decrease
			}
			country_event = {
				id = ww1_morocco.81
				days = 2
			}
		}
		ai_chance = {
			base = 25 #hahaha
		}
	}
}

# they said yes
country_event = {
	id = ww1_morocco.80
	title = ww1_morocco.80.t
	desc = ww1_morocco.80.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.80.a
		add_stability = 0.05
		MOR_improve_economical_situation = yes
	}
}

#oh no
country_event = {
	id = ww1_morocco.81
	title = ww1_morocco.81.t
	desc = ww1_morocco.81.d
	picture = GFX_tunis_streets
	is_triggered_only = yes
	option = {
		name = ww1_morocco.81.a
		add_political_power = -50
	}
}

#Morocco is buying root ships
country_event = {
	id = ww1_morocco.82
	title = ww1_morocco.82.t
	desc = ww1_morocco.82.d
	picture = GFX_toulon_naval_base
	is_triggered_only = yes
	option = {
		name = ww1_morocco.82.a
		effect_tooltip = {
			add_timed_idea = {
				idea = MOR_ship_sale
				days = 60
			}
		}
	}
}

#morocco has no naval tradition, so they are shits
country_event = {
	id = ww1_morocco.83
	title = ww1_morocco.83.t
	desc = ww1_morocco.83.d
	picture = GFX_toulon_naval_base
	trigger = {
		original_tag = MOR
		OR = {
			dockyard > 0
			has_completed_focus = MOR_buy_warships
			has_navy_size = { size > 0 }
		}
		NOT = {
			has_country_flag = MOR_idiot_navy
		}
	}
	mean_time_to_happen = {
		days = 20
	}
	immediate = {
		set_country_flag = MOR_idiot_navy
	}
	option = {
		name = ww1_morocco.83.a
		add_ideas = MOR_incompetent_navy
	}
}

country_event = {
	id = ww1_morocco.84
	title = ww1_morocco.84.t
	desc = ww1_morocco.84.d
	picture = GFX_battleship_liberte_class
	is_triggered_only = yes
	option = {
		name = ww1_morocco.84.a
		#lets make some training
		navy_experience = 15
		add_political_power = 25
		MOR = {
			country_event = {
				id = ww1_morocco.85
				days = 2
			}
			effect_tooltip = {
				navy_experience = 75
				add_political_power = 25
				add_doctrine_cost_reduction = {
					name = MOR_anglo_moroccan_naval_agreement
					category = naval_doctrine
					uses = 2
					cost_reduction = 0.5
				}
				add_opinion_modifier = {
					target = ENG
					modifier = large_increase
				}
				if = {
					limit = {
						has_idea = MOR_incompetent_navy2
					}
					remove_ideas = MOR_incompetent_navy2
				}
				if = {
					limit = {
						has_idea = MOR_incompetent_navy
					}
					swap_ideas = {
						add_idea = MOR_incompetent_navy2
						remove_idea = MOR_incompetent_navy
					}
				}
			}
		}
		ai_chance = {
			base = 75
			modifier = {
				MOR = {
					is_subject = yes
					NOT = {
						is_subject_of = ENG
					}
				}
				factor = 0.1
			}
		}
	}
	option = {
		name = ww1_morocco.84.b
		#nah
		MOR = {
			country_event = {
				id = ww1_morocco.86
				days = 2
			}
			add_opinion_modifier = {
				target = ENG
				modifier = large_decrease
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				MOR = {
					is_subject_of = ENG
				}
				factor = 0
			}
			modifier = {
				MOR = {
					has_war_together_with = ENG
				}
				factor = 0.2
			}
		}
	}
}
#yes!
country_event = {
	id = ww1_morocco.85
	title = ww1_morocco.85.t
	desc = ww1_morocco.85.d
	picture = GFX_battleship_liberte_class
	is_triggered_only = yes
	option = {
		name = ww1_morocco.85.a
		MOR = {
			navy_experience = 75
			add_political_power = 25
			add_doctrine_cost_reduction = {
				name = MOR_anglo_moroccan_naval_agreement
				category = naval_doctrine
				uses = 2
				cost_reduction = 0.5
			}
			add_opinion_modifier = {
				target = ENG
				modifier = large_increase
			}
			if = {
				limit = {
					has_idea = MOR_incompetent_navy2
				}
				remove_ideas = MOR_incompetent_navy2
			}
			if = {
				limit = {
					has_idea = MOR_incompetent_navy
				}
				swap_ideas = {
					add_idea = MOR_incompetent_navy2
					remove_idea = MOR_incompetent_navy
				}
			}
		}
	}
}

country_event = {
	id = ww1_morocco.86
	title = ww1_morocco.86.t
	desc = ww1_morocco.86.d
	picture = GFX_battleship_liberte_class
	is_triggered_only = yes
	option = {
		name = ww1_morocco.86.a
		add_opinion_modifier = {
			target = ENG
			modifier = large_decrease
		}
	}
}

country_event = {
	id = ww1_morocco.87
	title = ww1_morocco.87.t
	desc = ww1_morocco.87.d
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_ETH_rif_map
	option = {
		name = ww1_morocco.87.a
		MOR = {
			transfer_state = 1151
			add_political_power = 100
			add_war_support = 0.05
		}
	}
	option = {
		name = ww1_morocco.87.b
	}
}