add_namespace = ww1_albania
add_namespace = albania

country_event = { #prizren government falls
	id = albania.1
	title = albania.1.t
	desc = albania.1.d
	is_triggered_only = yes
	picture = GFX_report_event_bajram_curri
	option = {
		name = albania.1.a
		set_party_name = {
			ideology = neutrality
			name = ALB_neutrality_party
			long_name = ALB_neutrality_party
		}
		set_party_name = {
			ideology = democratic
			name = ALB_democratic_party
			long_name = ALB_democratic_party
		}
		set_party_name = {
			ideology = fascism
			name = ALB_fascism_party
			long_name = ALB_fascism_party
		}
		set_party_name = {
			ideology = communism
			name = ALB_communism_party
			long_name = ALB_communism_party
		}
		if = {
			limit = { has_country_flag = ALB_refused_the_return_of_abdulhamid }
			promote_character = { character = ALB_idriz_seferi ideology = warlordism }
			hidden_effect = { promote_character = { character = ALB_idriz_seferi ideology = stratocracy } }
		}
		else = {
			promote_character = { character = ALB_isa_boletini ideology = warlordism }
			hidden_effect = { promote_character = { character = ALB_isa_boletini ideology = stratocracy } }
		}
		clr_country_flag = ALB_prizren_government
	}
}

country_event = { #kimza government falls
	id = albania.2
	title = albania.2.t
	desc = albania.2.d
	is_triggered_only = yes
	picture = GFX_report_event_terenc_toci
	option = {
		name = albania.2.a
		set_party_name = {
			ideology = neutrality
			name = ALB_neutrality_party
			long_name = ALB_neutrality_party
		}
		set_party_name = {
			ideology = democratic
			name = ALB_democratic_party
			long_name = ALB_democratic_party
		}
		set_party_name = {
			ideology = fascism
			name = ALB_fascism_party
			long_name = ALB_fascism_party
		}
		set_party_name = {
			ideology = communism
			name = ALB_communism_party
			long_name = ALB_communism_party
		}
		promote_character = { character = ALB_ded_gjo_luli ideology = warlordism }
		hidden_effect = { promote_character = { character = ALB_ded_gjo_luli ideology = stratocracy } }
		clr_country_flag = ALB_kimza_government
	}
}

country_event = { #toptani government falls
	id = albania.3
	title = albania.3.t
	desc = albania.3.d
	is_triggered_only = yes
	picture = GFX_report_event_essad_pasha_toptani
	option = {
		name = albania.3.a
		set_party_name = {
			ideology = neutrality
			name = ALB_neutrality_party
			long_name = ALB_neutrality_party
		}
		set_party_name = {
			ideology = democratic
			name = ALB_democratic_party
			long_name = ALB_democratic_party
		}
		set_party_name = {
			ideology = fascism
			name = ALB_fascism_party
			long_name = ALB_fascism_party
		}
		set_party_name = {
			ideology = communism
			name = ALB_communism_party
			long_name = ALB_communism_party
		}
		ALB_essad_pasha_toptani = {
			remove_country_leader_role = { ideology = personalistic_dictatorship }
			promote_character = { ideology = warlordism }
		}
		hidden_effect = {
			set_portraits = {
				character = ALB_essad_pasha_toptani
				civilian = {
					large = "gfx/leaders/ALB/ALB_esat_toptani_army.png"
					small = "gfx/interface/ideas/ALB/ALB_esat_toptani_army.png"
				}
			}
			ALB_essad_pasha_toptani = {
				swap_country_leader_traits = {
					remove = ALB_wicked_ambitions
					add = ALB_pasha_of_central_albania
					ideology = stratocracy
				}
			}
		}
		clr_country_flag = ALB_toptani_government
	}
}

country_event = { #vlora government falls
	id = albania.4
	title = albania.4.t
	desc = albania.4.d
	is_triggered_only = yes
	picture = GFX_report_event_ismail_qemali
	option = {
		name = albania.4.a
		set_party_name = {
			ideology = neutrality
			name = ALB_neutrality_party
			long_name = ALB_neutrality_party
		}
		set_party_name = {
			ideology = democratic
			name = ALB_democratic_party
			long_name = ALB_democratic_party
		}
		set_party_name = {
			ideology = fascism
			name = ALB_fascism_party
			long_name = ALB_fascism_party
		}
		set_party_name = {
			ideology = communism
			name = ALB_communism_party
			long_name = ALB_communism_party
		}
		promote_character = { character = ALB_cerciz_topulli ideology = warlordism }
		hidden_effect = { promote_character = { character = ALB_cerciz_topulli ideology = stratocracy } }
		clr_country_flag = ALB_vlora_government
	}
}

country_event = { #albanian railway blockage
	id = albania.5
	title = albania.5.t
	desc = albania.5.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_railway_blockage
	option = {
		name = albania.5.a
		add_equipment_to_stockpile = {
			type = train_equipment
			amount = -5
		}
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = -500
		}
		add_manpower = -500
	}
}

country_event = { #albanian struggle not over yet notif
	id = albania.6
	title = albania.6.t
	desc = albania.6.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion_retreat
	option = {
		name = albania.6.a
		effect_tooltip = {
			become_exiled_in = {
				target = PREV
				legitimacy = 35
			}
		}
	}
}

country_event = { #albanian resistance spreads notif
	id = albania.7
	title = albania.7.t
	desc = albania.7.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.7.a
		effect_tooltip = { activate_mission = other_organize_rebellion }
	}
}

country_event = { #concessions from the ottomans
	id = albania.8
	title = albania.8.t
	desc = albania.8.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.8.a
		effect_tooltip = {
			if = {
				limit = { FROM = { capital_scope = { ALB_is_kosovar_state = yes } } }
				FROM = {
					every_controlled_state = {
						limit = { ALB_is_kosovar_state = yes }
						set_state_controller_to = ROOT
						delete_unit = { disband = yes }
					}
				}
				custom_effect_tooltip = TUR_decrease_kosova_centralization_10
				add_to_variable = { global.TUR_kosova_centralization = -10 }
			}
			if = {
				limit = { FROM = { capital_scope = { ALB_is_northern_state = yes } } }
				FROM = {
					every_controlled_state = {
						limit = { ALB_is_northern_state = yes }
						set_state_controller_to = ROOT
						delete_unit = { disband = yes }
					}
				}
				custom_effect_tooltip = TUR_decrease_iskodra_centralization_10
				add_to_variable = { global.TUR_iskodra_centralization = -10 }
			}
			if = {
				limit = { FROM = { capital_scope = { ALB_is_central_state = yes } } }
				FROM = {
					every_controlled_state = {
						limit = { ALB_is_central_state = yes }
						set_state_controller_to = ROOT
						delete_unit = { disband = yes }
					}
				}
				custom_effect_tooltip = TUR_decrease_manastir_centralization_10
				add_to_variable = { global.TUR_manastir_centralization = -10 }
			}
			if = {
				limit = { FROM = { capital_scope = { ALB_is_southern_state = yes } } }
				FROM = {
					every_controlled_state = {
						limit = { ALB_is_southern_state = yes }
						set_state_controller_to = ROOT
						delete_unit = { disband = yes }
					}
				}
				custom_effect_tooltip = TUR_decrease_yanya_centralization_10
				add_to_variable = { global.TUR_yanya_centralization = -10 }
			}
		}
		hidden_effect = { FROM = { country_event = { id = albania.9 hours = 8 } } }
		ai_chance = {
			base = 15
			modifier = {
				add = 200
				has_idea = TUR_policy_of_reapproachment
			}
			modifier = {
				add = 30
				TUR_is_itilafist_regime = yes
			}
			modifier = {
				add = 15
				FROM = { any_core_state = { is_controlled_by = ALB } }
			}
			modifier = {
				add = 5
				war_length_with = {
					tag = FROM
					months > 1
				}
			}
			modifier = {
				add = 5
				war_length_with = {
					tag = FROM
					months > 2
				}
			}
			modifier = {
				add = 5
				war_length_with = {
					tag = FROM
					months > 3
				}
			}
			modifier = {
				add = 5
				war_length_with = {
					tag = FROM
					months > 4
				}
			}
			modifier = {
				add = 5
				war_length_with = {
					tag = FROM
					months > 5
				}
			}
			modifier = {
				add = 10
				core_resistance = {
					occupied_country_tag = ALB
					value > 35
				}
			}
		}
	}
	option = {
		name = albania.8.b
		hidden_effect = { FROM = { country_event = { id = albania.10 hours = 8 } } }
		ai_chance = {
			base = 5
			modifier = {
				add = 5
				has_idea = TUR_brutal_surpression
			}
			modifier = {
				add = -5
				has_idea = TUR_policy_of_reapproachment
			}
			modifier = {
				add = -5
				FROM = { any_core_state = { is_controlled_by = ALB } }
			}
			modifier = {
				add = 15
				core_resistance = {
					occupied_country_tag = ALB
					value < 20
				}
			}
		}
	}
}

country_event = { #concessions from the ottomans agreed
	id = albania.9
	title = albania.9.t
	desc = albania.9.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.9.a
		effect_tooltip = {
			if = {
				limit = { capital_scope = { ALB_is_kosovar_state = yes } }
				every_controlled_state = {
					limit = { ALB_is_kosovar_state = yes }
					set_state_controller_to = FROM
					delete_unit = { disband = yes }
				}
				FROM = {
					custom_effect_tooltip = TUR_decrease_kosova_centralization_10
					add_to_variable = { global.TUR_kosova_centralization = -10 }
				}
			}
			if = {
				limit = { capital_scope = { ALB_is_northern_state = yes } }
				every_controlled_state = {
					limit = { ALB_is_northern_state = yes }
					set_state_controller_to = FROM
					delete_unit = { disband = yes }
				}
				FROM = {
					custom_effect_tooltip = TUR_decrease_iskodra_centralization_10
					add_to_variable = { global.TUR_iskodra_centralization = -10 }
				}
			}
			if = {
				limit = { capital_scope = { ALB_is_central_state = yes } }
				every_controlled_state = {
					limit = { ALB_is_central_state = yes }
					set_state_controller_to = FROM
					delete_unit = { disband = yes }
				}
				FROM = {
					custom_effect_tooltip = TUR_decrease_manastir_centralization_10
					add_to_variable = { global.TUR_manastir_centralization = -10 }
				}
			}
			if = {
				limit = { capital_scope = { ALB_is_southern_state = yes } }
				every_controlled_state = {
					limit = { ALB_is_southern_state = yes }
					set_state_controller_to = FROM
					delete_unit = { disband = yes }
				}
				FROM = {
					custom_effect_tooltip = TUR_decrease_yanya_centralization_10
					add_to_variable = { global.TUR_yanya_centralization = -10 }
				}
			}
		}
		ai_chance = { base = 100 }
	}
}

country_event = { #concessions from the ottomans agreed
	id = albania.10
	title = albania.10.t
	desc = albania.10.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.10.a
		add_war_support = 0.05
		ai_chance = { base = 100 }
	}
}

country_event = { #abdulhamid freed notification
	id = albania.11
	title = albania.11.t
	desc = albania.11.d
	is_triggered_only = yes
	picture = GFX_report_event_abdulhamid_home
	option = {
		name = albania.11.a
		every_other_country = {
			limit = { has_character = TUR_abdulhamid_II }
			TUR_abdulhamid_II = { set_nationality = ROOT }
		}
		set_country_flag = ALB_freed_abdulhamid
		mark_focus_tree_layout_dirty = yes
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.11.b
		if = {
			limit = { has_country_leader = { character = ALB_isa_boletini ruling_only = yes } }
			promote_character = { character = ALB_idriz_seferi ideology = warlordism }
			hidden_effect = { promote_character = { character = ALB_idriz_seferi ideology = stratocracy } }
		}
		custom_effect_tooltip = {
			localization_key = remove_character_as_tt
			CHARACTER = ALB_isa_boletini
			ROLE = cc_leader
		}
		custom_effect_tooltip = {
			localization_key = remove_character_as_tt
			CHARACTER = ALB_riza_gjakova
			ROLE = cc_leader
		}
		set_country_flag = ALB_refused_the_return_of_abdulhamid
		ai_chance = { base = 0 }
	}
}

country_event = { #resistance cell set up 10
	id = albania.12
	title = albania.12.t
	desc = albania.12.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.12.a
		custom_effect_tooltip = ALB_establish_committees_resistance_10
		ai_chance = { base = 100 }
	}
}
country_event = { #resistance cell set up 15
	id = albania.13
	title = albania.12.t
	desc = albania.12.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.13.a
		custom_effect_tooltip = ALB_establish_committees_resistance_15
		ai_chance = { base = 100 }
	}
}
country_event = { #resistance cell set up 20
	id = albania.14
	title = albania.12.t
	desc = albania.12.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.14.a
		custom_effect_tooltip = ALB_establish_committees_resistance_20
		ai_chance = { base = 100 }
	}
}
country_event = { #resistance cell set up 25
	id = albania.15
	title = albania.12.t
	desc = albania.12.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.15.a
		custom_effect_tooltip = ALB_establish_committees_resistance_25
		ai_chance = { base = 100 }
	}
}

country_event = { #resistance cell clear 5
	id = albania.16
	title = albania.16.t
	desc = albania.16.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.16.a
		if = {
			limit = { tag = ALB }
			custom_effect_tooltip = other_establish_committees_resistance_5
		}
		else_if = {
			limit = {
				intel_level_over = { 
					target = ALB
					civilian_intel > 0.8
				}
			}
			custom_effect_tooltip = other_establish_committees_resistance_5
		}
		else = { custom_effect_tooltip = other_establish_committees_unknown }
		ai_chance = { base = 100 }
	}
}

country_event = { #resistance cell clear 10
	id = albania.17
	title = albania.16.t
	desc = albania.16.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.17.a
		if = {
			limit = { tag = ALB }
			custom_effect_tooltip = other_establish_committees_resistance_10
		}
		else_if = {
			limit = {
				intel_level_over = { 
					target = ALB
					civilian_intel > 0.8
				}
			}
			custom_effect_tooltip = other_establish_committees_resistance_10
		}
		else = { custom_effect_tooltip = other_establish_committees_unknown }
		ai_chance = { base = 100 }
	}
}

country_event = { #resistance cell clear 15
	id = albania.18
	title = albania.16.t
	desc = albania.16.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.18.a
		if = {
			limit = { tag = ALB }
			custom_effect_tooltip = other_establish_committees_resistance_15
		}
		else_if = {
			limit = {
				intel_level_over = { 
					target = ALB
					civilian_intel > 0.8
				}
			}
			custom_effect_tooltip = other_establish_committees_resistance_15
		}
		else = { custom_effect_tooltip = other_establish_committees_unknown }
		ai_chance = { base = 100 }
	}
}

country_event = { #resistance cell not clear
	id = albania.19
	title = albania.19.t
	desc = albania.19.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.19.a
		custom_effect_tooltip = other_establish_committees_resistance_not_found
		ai_chance = { base = 100 }
	}
}

country_event = { #abdulhamid government falls
	id = albania.20
	title = albania.20.t
	desc = albania.20.d
	is_triggered_only = yes
	picture = GFX_report_event_isa_boletini
	option = {
		name = albania.20.a
		set_party_name = {
			ideology = neutrality
			name = ALB_neutrality_party
			long_name = ALB_neutrality_party
		}
		set_party_name = {
			ideology = democratic
			name = ALB_democratic_party
			long_name = ALB_democratic_party
		}
		set_party_name = {
			ideology = fascism
			name = ALB_fascism_party
			long_name = ALB_fascism_party
		}
		set_party_name = {
			ideology = communism
			name = ALB_communism_party
			long_name = ALB_communism_party
		}
		promote_character = { character = ALB_idriz_seferi ideology = warlordism }
		hidden_effect = { promote_character = { character = ALB_idriz_seferi ideology = stratocracy } }
		custom_effect_tooltip = {
			localization_key = remove_character_as_tt
			CHARACTER = ALB_isa_boletini
			ROLE = cc_leader
		}
		custom_effect_tooltip = {
			localization_key = remove_character_as_tt
			CHARACTER = ALB_riza_gjakova
			ROLE = cc_leader
		}
		remove_ideas = ALB_abdulhamid_II
		clr_country_flag = ALB_abdulhamid_government
		set_country_flag = ALB_refused_the_return_of_abdulhamid
	}
}

country_event = { #aiding the albanian rebellion
	id = albania.21
	title = albania.21.t
	desc = albania.21.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.21.a
		give_military_access = FROM
		effect_tooltip = {
			FROM = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 500
					producer = ROOT
				}
			}
		}
		unlock_decision_tooltip = aid_the_albanian_cause
		set_country_flag = aid_the_albanian_cause
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = ALB_supported_the_albanian_cause
				}
			}
			TUR = {
				add_opinion_modifier = {
					target = ROOT
					modifier = TUR_supported_the_albanian_cause
				}
			}
		}
		hidden_effect = { FROM = { country_event = { id = albania.22 hours = 8 } } }
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				any_controlled_state = { is_core_of = FROM }
			}
		}
	}
	option = {
		name = albania.21.b
		hidden_effect = { FROM = { country_event = { id = albania.23 hours = 8 } } }
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				any_controlled_state = { is_core_of = FROM }
			}
		}
	}
}

country_event = { #aiding the albanian rebellion
	id = albania.22
	title = albania.22.t
	desc = albania.22.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.22.a
		FROM = { effect_tooltip = { give_military_access = ROOT } }
		add_equipment_to_stockpile = {
			type = infantry_equipment
			amount = 350
			producer = FROM
		}
		FROM = { unlock_decision_tooltip = aid_the_albanian_cause }
		add_opinion_modifier = {
			target = FROM
			modifier = ALB_supported_the_albanian_cause
		}
		TUR = {
			add_opinion_modifier = {
				target = FROM
				modifier = TUR_supported_the_albanian_cause
			}
		}
		ai_chance = { base = 100 }
	}
}

country_event = { #aiding the albanian rebellion
	id = albania.23
	title = albania.23.t
	desc = albania.23.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.23.a
		
		ai_chance = { base = 100 }
	}
}

country_event = { #albania macedonia proposal
	id = albania.24
	title = albania.24.t
	desc = albania.24.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.24.a
		custom_effect_tooltip = albania.24.tt
		set_global_flag = BUL_join_albania_in_the_next_uprising
		hidden_effect = { FROM = { country_event = { id = albania.25 hours = 8 } } }
		ai_chance = {
			base = 0
			modifier = {
				add = 5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 0.2
				}
			}
			modifier = {
				add = 5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 0.5
				}
			}
			modifier = {
				add = 5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 0.7
				}
			}
			modifier = {
				add = 10
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 1
				}
			}
			modifier = {
				factor = 0
				any_owned_state = {
					is_core_of = ALB
					is_core_of = MAC
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	option = {
		name = albania.24.a
		hidden_effect = { FROM = { country_event = { id = albania.26 hours = 8 } } }
		ai_chance = {
			base = 25
			modifier = {
				add = -5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 0.2
				}
			}
			modifier = {
				add = -5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 0.5
				}
			}
			modifier = {
				add = -5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 0.7
				}
			}
			modifier = {
				add = -5
				fighting_army_strength_ratio = {
					tag = TUR
					ratio > 1
				}
			}
			modifier = {
				add = 100
				any_owned_state = {
					is_core_of = ALB
					is_core_of = MAC
				}
			}
			modifier = {
				add = 1000
				is_historical_focus_on = yes
			}
		}
	}
}

country_event = { #albania macedonia proposal
	id = albania.25
	title = albania.25.t
	desc = albania.25.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.25.a
		custom_effect_tooltip = albania.25.tt
		ai_chance = { base = 100 }
	}
}

country_event = { #albania macedonia proposal
	id = albania.26
	title = albania.26.t
	desc = albania.26.d
	is_triggered_only = yes
	picture = GFX_report_event_albanian_rebellion
	option = {
		name = albania.26.a
		ai_chance = { base = 100 }
	}
}

country_event = { #great power intervention
	id = albania.27
	title = albania.27.t
	desc = albania.27.d
	picture = GFX_report_event_albanian_rebellion
	trigger = {
		BUL = { NOT = { has_country_flag = ALB_london_armistice } }
		OR = {
			AND = {
				original_tag = TUR
				has_war_with = ALB
				has_war_with = BUL
			}
			AND = {
				original_tag = BUL
				has_war_with = TUR
				has_war_together_with = ALB
			}
		}
		has_global_flag = BUL_join_albania_ongoing
		any_country = {
			is_major = yes
			NOT = { has_war_with = TUR }
			NOT = { has_war_with = BUL }
		}
		OR = {
			AND = {
				ALB = { has_capitulated = yes }
				BUL = { surrender_progress > 0 }
			}
			BUL = { surrender_progress > 0.5 }
		}
	}
	immediate = {
		hidden_effect = {
			clr_global_flag = BUL_join_albania_ongoing
			every_country = {
				limit = {
					OR = {
						tag = TUR
						is_subject_of = TUR
						is_in_faction_with = TUR
						has_war_with = BUL
					}
				}
				white_peace = BUL
				every_country = {
					limit = {
						is_in_faction_with = BUL
						is_subject_of = BUL
					}
					white_peace = PREV
				}
				set_country_flag = ALB_white_peace_with_BUL
			}
			212 = { set_demilitarized_zone = yes }
			BUL = {
				add_timed_idea = {
					idea = TUR_paying_war_reparations
					days = 180
				}
			}
		}
	}
	option = {
		name = albania.27.a
		trigger = { original_tag = BUL }
		effect_tooltip = {
			every_country = {
				limit = { has_country_flag = ALB_white_peace_with_BUL }
				white_peace = BUL
				every_country = {
					limit = {
						is_in_faction_with = BUL
						is_subject_of = BUL
					}
					white_peace = PREV
				}
			}
			212 = { set_demilitarized_zone = yes }
			add_timed_idea = {
				idea = TUR_paying_war_reparations
				days = 180
			}
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.27.b
		trigger = { original_tag = TUR }
		effect_tooltip = {
			every_country = {
				limit = { has_country_flag = ALB_white_peace_with_BUL }
				white_peace = BUL
				every_country = {
					limit = {
						is_in_faction_with = BUL
						is_subject_of = BUL
					}
					white_peace = PREV
				}
			}
			212 = { set_demilitarized_zone = yes }
			BUL = {
				add_timed_idea = {
					idea = TUR_paying_war_reparations
					days = 180
				}
			}
		}
		ai_chance = { base = 100 }
	}
}

country_event = { #bul join the uprising
	id = albania.28
	title = albania.28.t
	desc = albania.28.d
	picture = GFX_report_event_albanian_rebellion
	is_triggered_only = yes
	option = {
		name = albania.28.a
		set_global_flag = BUL_join_albania_ongoing
		add_to_war = {
			targeted_alliance = ALB
			enemy = TUR
			hostility_reason = asked_to_join
		}
		hidden_effect = {
			every_country = {
				limit = { has_war_with = ALB }
				country_event = albania.29
			}
		}
		ai_chance = { base = 100 }
	}
}

country_event = { #bul join the uprising
	id = albania.29
	title = albania.29.t
	desc = albania.29.d
	picture = GFX_report_event_albanian_rebellion
	is_triggered_only = yes
	option = {
		name = albania.29.a
		effect_tooltip = {
			FROM = {
				add_to_war = {
					targeted_alliance = ALB
					enemy = TUR
					hostility_reason = asked_to_join
				}
			}
		}
		ai_chance = { base = 100 }
	}
}

country_event = { #london conference decide the territory of albania
	id = albania.30
	title = albania.30.t
	desc = albania.30.d
	picture = GFX_report_event_london_conference
	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		hidden_effect = {
			set_country_flag = is_part_of_international_control_commission
			set_variable = { global.vote_for_big_albania = 0 }
			set_variable = { global.vote_for_medium_albania = 0 }
			set_variable = { global.vote_for_small_albania = 0 }
		}
	}
	option = { #big albania
		name = albania.30.a
		custom_effect_tooltip = ALB_london_conference_resolution
		effect_tooltip = {
			every_country = {
				limit = {
					OR = {
						tag = TUR
						is_subject_of = TUR
						is_in_faction_with = TUR
					}
					has_war_with = ALB
				}
				white_peace = ALB
				if = {
					limit = { has_global_flag = BUL_join_albania_ongoing }
					white_peace = BUL
					every_country = {
						limit = {
							is_in_faction_with = BUL
							is_subject_of = BUL
						}
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = {
					ALB_big_albania_states = yes
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = ALB
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_big_albania = 1 }
			if = {
				limit = { has_global_flag = BUL_join_albania_ongoing }
				set_global_flag = ALB_lc_negotiating_macedonia
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_macedonia }
					}
					set_country_flag = ALB_lc_already_fired_macedonia
					country_event = { id = albania.31 days = 7 }
				}
			}
			else_if = {
				limit = {
					check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
					check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
				}
				set_global_flag = ALB_lc_negotiating_novi_pazar
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_novi_pazar }
					}
					set_country_flag = ALB_lc_already_fired_novi_pazar
					country_event = { id = albania.32 days = 7 }
				}
			}
			else = {
				every_country = {
					limit = {
						OR = {
							has_country_flag = is_part_of_international_control_commission
							tag = ALB
							tag = TUR
							AND = {
								has_global_flag = BUL_join_albania_ongoing
								tag = BUL
							}
						}
						has_country_flag = ALB_lc_already_fired_peace_resolution
					}
					set_country_flag = ALB_lc_already_fired_peace_resolution
					country_event = { id = albania.33 days = 7 }
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				add = -35
			}
			modifier = {
				any_country = {
					is_balkan_nation = yes
					OR = {
						NOT = { original_tag = BUL }
						NOT = { has_global_flag = BUL_join_albania_ongoing }
					}
					NOT = { original_tag = ALB }
					has_war_with = TUR
					any_state = {
						is_owned_by = TUR
						ALB_big_albania_states = yes
						is_claimed_by = PREV
					}
				}
				add = -5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = 5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = 5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = 5
			}
			modifier = {
				original_tag = RUS
				factor = 0
			}
		}
	}
	option = { #medium albania
		name = albania.30.b
		custom_effect_tooltip = ALB_london_conference_resolution
		effect_tooltip = {
			every_country = {
				limit = {
					OR = {
						tag = TUR
						is_subject_of = TUR
						is_in_faction_with = TUR
					}
					has_war_with = ALB
				}
				white_peace = ALB
				if = {
					limit = { has_global_flag = BUL_join_albania_ongoing }
					white_peace = BUL
					every_country = {
						limit = {
							is_in_faction_with = BUL
							is_subject_of = BUL
						}
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = {
					ALB_medium_albania_states = yes
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = ALB
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_medium_albania = 1 }
			if = {
				limit = { has_global_flag = BUL_join_albania_ongoing }
				set_global_flag = ALB_lc_negotiating_macedonia
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_macedonia }
					}
					set_country_flag = ALB_lc_already_fired_macedonia
					country_event = { id = albania.31 days = 7 }
				}
			}
			else_if = {
				limit = {
					check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
					check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
				}
				set_global_flag = ALB_lc_negotiating_novi_pazar
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_novi_pazar }
					}
					set_country_flag = ALB_lc_already_fired_novi_pazar
					country_event = { id = albania.32 days = 7 }
				}
			}
			else = {
				every_country = {
					limit = {
						OR = {
							has_country_flag = is_part_of_international_control_commission
							tag = ALB
							tag = TUR
							AND = {
								has_global_flag = BUL_join_albania_ongoing
								tag = BUL
							}
						}
						has_country_flag = ALB_lc_already_fired_peace_resolution
					}
					set_country_flag = ALB_lc_already_fired_peace_resolution
					country_event = { id = albania.33 days = 7 }
				}
			}
		}
		ai_chance = {
			base = 20
			modifier = {
				is_historical_focus_on = yes
				add = 35
			}
			modifier = {
				any_country = {
					is_balkan_nation = yes
					OR = {
						NOT = { original_tag = BUL }
						NOT = { has_global_flag = BUL_join_albania_ongoing }
					}
					NOT = { original_tag = ALB }
					NOT = { has_war_with = TUR }
					any_state = {
						is_owned_by = TUR
						ALB_big_albania_states = yes
						is_claimed_by = PREV
					}
				}
				add = -5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = -5
			}
			modifier = {
				original_tag = RUS
				factor = 0
			}
		}
	}
	option = { #small albania
		name = albania.30.c
		custom_effect_tooltip = ALB_london_conference_resolution
		effect_tooltip = {
			every_country = {
				limit = {
					OR = {
						tag = TUR
						is_subject_of = TUR
						is_in_faction_with = TUR
					}
					has_war_with = ALB
				}
				white_peace = ALB
				if = {
					limit = { has_global_flag = BUL_join_albania_ongoing }
					white_peace = BUL
					every_country = {
						limit = {
							is_in_faction_with = BUL
							is_subject_of = BUL
						}
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = {
					ALB_small_albania_states = yes
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = ALB
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_small_albania = 1 }
			if = {
				limit = { has_global_flag = BUL_join_albania_ongoing }
				set_global_flag = ALB_lc_negotiating_macedonia
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_macedonia }
					}
					set_country_flag = ALB_lc_already_fired_macedonia
					country_event = { id = albania.31 days = 7 }
				}
			}
			else_if = {
				limit = {
					check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
					check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
				}
				set_global_flag = ALB_lc_negotiating_novi_pazar
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_novi_pazar }
					}
					set_country_flag = ALB_lc_already_fired_novi_pazar
					country_event = { id = albania.32 days = 7 }
				}
			}
			else = {
				every_country = {
					limit = {
						OR = {
							has_country_flag = is_part_of_international_control_commission
							tag = ALB
							tag = TUR
							AND = {
								has_global_flag = BUL_join_albania_ongoing
								tag = BUL
							}
						}
						has_country_flag = ALB_lc_already_fired_peace_resolution
					}
					set_country_flag = ALB_lc_already_fired_peace_resolution
					country_event = { id = albania.33 days = 7 }
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				is_historical_focus_on = yes
				add = -35
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = -5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = -5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = -5
			}
			modifier = {
				original_tag = RUS
				add = 1000
			}
		}
	}
}

country_event = { #london conference macedonia
	id = albania.31
	title = albania.31.t
	desc = albania.31.d
	picture = GFX_report_event_london_conference
	is_triggered_only = yes
	timeout_days = 7
	immediate = {
		hidden_effect = {
			clr_global_flag = ALB_lc_negotiating_macedonia
			set_variable = { global.vote_for_yes_macedonia = 0 }
			set_variable = { global.vote_for_no_macedonia = 0 }
		}
	}
	option = { #yes macedonia
		name = albania.31.a
		custom_effect_tooltip = ALB_london_conference_resolution
		effect_tooltip = {
			every_state = {
				limit = {
					is_core_of = MAC
					OR = {
						is_core_of = ALB
						check_variable = { TUR_south_slavic_state_level > TUR_greek_state_level }
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = MAC
			}
			ALB = {
				set_autonomy = {
					target = MAC
					autonomous_state = autonomy_dominion
					end_wars = yes
					end_civil_wars = yes
				}
			}
			BUL = { give_guarantee = MAC }
			MAC = {
				give_military_access = BUL
				add_ideas = ALB_albanian_autonomous_zone
				add_ideas = ALB_bulgarian_autonomous_zone
				add_opinion_modifier = {
					target = BUL
					modifier = ALB_join_puppet
				}
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_yes_macedonia = 1 }
			if = {
				limit = {
					OR = {
						check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
						AND = {
							check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
							check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
						}
					}
				}
				set_global_flag = ALB_lc_negotiating_novi_pazar
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_novi_pazar }
					}
					set_country_flag = ALB_lc_already_fired_novi_pazar
					country_event = { id = albania.32 days = 7 }
				}
			}
			else = {
				every_country = {
					limit = {
						OR = {
							has_country_flag = is_part_of_international_control_commission
							tag = ALB
							tag = TUR
							AND = {
								has_global_flag = BUL_join_albania_ongoing
								tag = BUL
							}
						}
						has_country_flag = ALB_lc_already_fired_peace_resolution
					}
					set_country_flag = ALB_lc_already_fired_peace_resolution
					country_event = { id = albania.33 days = 7 }
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				BUL = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = 5
			}
			modifier = {
				BUL = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = 5
			}
			modifier = {
				BUL = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = 5
			}
			modifier = {
				TUR = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = -5
			}
			modifier = {
				TUR = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = -5
			}
			modifier = {
				TUR = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = -5
			}
			modifier = {
				original_tag = GER
				add = -20
			}
			modifier = {
				original_tag = AUS
				add = 20
			}
			modifier = {
				original_tag = RUS
				add = 1000
			}
		}
	}
	option = { #no macedonia
		name = albania.31.b
		custom_effect_tooltip = ALB_london_conference_resolution
		custom_effect_tooltip = ALB_no_macedonian_state_will_be_created
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_no_macedonia = 1 }
			if = {
				limit = {
					OR = {
						check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
						AND = {
							check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
							check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
						}
					}
				}
				set_global_flag = ALB_lc_negotiating_novi_pazar
				every_country = {
					limit = {
						has_country_flag = is_part_of_international_control_commission
						NOT = { has_country_flag = ALB_lc_already_fired_novi_pazar }
					}
					set_country_flag = ALB_lc_already_fired_novi_pazar
					country_event = { id = albania.32 days = 7 }
				}
			}
			else = {
				every_country = {
					limit = {
						OR = {
							has_country_flag = is_part_of_international_control_commission
							tag = ALB
							tag = TUR
							AND = {
								has_global_flag = BUL_join_albania_ongoing
								tag = BUL
							}
						}
						has_country_flag = ALB_lc_already_fired_peace_resolution
					}
					set_country_flag = ALB_lc_already_fired_peace_resolution
					country_event = { id = albania.33 days = 7 }
				}
			}
		}
		ai_chance = {
			base = 15
			modifier = {
				BUL = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = -5
			}
			modifier = {
				BUL = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = -5
			}
			modifier = {
				BUL = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = -5
			}
			modifier = {
				TUR = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = 5
			}
			modifier = {
				TUR = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = 5
			}
			modifier = {
				TUR = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = 5
			}
			modifier = {
				original_tag = GER
				add = 20
			}
			modifier = {
				original_tag = AUS
				add = -10
			}
			modifier = {
				original_tag = RUS
				factor = 0
			}
		}
	}
}

country_event = { #london conference novi pazar
	id = albania.32
	title = albania.32.t
	desc = albania.32.d
	picture = GFX_report_event_london_conference
	is_triggered_only = yes
	timeout_days = 7
	trigger = {
		OR = {
			check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
			AND = {
				check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
				check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
			}
		}
	}
	immediate = {
		hidden_effect = {
			clr_global_flag = ALB_lc_negotiating_novi_pazar
			set_variable = { global.vote_for_albanian_novi_pazar = 0 }
			set_variable = { global.vote_for_serbian_novi_pazar = 0 }
			set_variable = { global.vote_for_austrian_novi_pazar = 0 }
		}
	}
	option = { #to albania
		name = albania.32.a
		custom_effect_tooltip = ALB_london_conference_resolution
		effect_tooltip = {
			every_state = {
				limit = {
					OR = {
						state = 760
						state = 761
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = ALB
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_albanian_novi_pazar = 1 }
			every_country = {
				limit = {
					OR = {
						has_country_flag = is_part_of_international_control_commission
						tag = ALB
						tag = TUR
						AND = {
							has_global_flag = BUL_join_albania_ongoing
							tag = BUL
						}
					}
					has_country_flag = ALB_lc_already_fired_peace_resolution
				}
				set_country_flag = ALB_lc_already_fired_peace_resolution
				country_event = { id = albania.33 days = 7 }
			}
		}
		ai_chance = {
			base = 5
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = 5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = 5
			}
			modifier = {
				ALB = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = 5
			}
			modifier = {
				original_tag = AUS
				factor = 0
			}
			modifier = {
				original_tag = RUS
				factor = 0
			}
		}
	}
	option = { #to serbia and montenegro
		name = albania.32.b
		trigger = {
			760 = {
				any_neighbor_state = {
					OR = {
						is_owned_by = SER
						is_owned_by = MNT
					}
				}
			}
			761 = {
				any_neighbor_state = {
					OR = {
						is_owned_by = SER
						is_owned_by = MNT
					}
				}
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution
		effect_tooltip = {
			every_state = {
				limit = {
					OR = {
						state = 760
						AND = {
							check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
							OR = {
								check_variable = { global.vote_for_big_albania < global.vote_for_small_albania }
								check_variable = { global.vote_for_big_albania < global.vote_for_medium_albania }
							}
							state = 847
						}
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				if = {
					limit = {
						any_neighbor_state = {
							NOT = { is_owned_by = SER }
							is_owned_by = MNT
						}
					}
					transfer_state_to = MNT
				}
				else = { transfer_state_to = SER }
			}
			every_state = {
				limit = {
					OR = {
						state = 761
						AND = {
							check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
							check_variable = { global.vote_for_big_albania < global.vote_for_medium_albania }
							check_variable = { global.vote_for_small_albania < global.vote_for_medium_albania }
							state = 848
						}
						AND = {
							check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
							check_variable = { global.vote_for_big_albania < global.vote_for_small_albania }
							check_variable = { global.vote_for_small_albania > global.vote_for_medium_albania }
							state = 870
						}
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				if = {
					limit = {
						any_neighbor_state = {
							NOT = { is_owned_by = MNT }
							is_owned_by = SER
						}
					}
					transfer_state_to = SER
				}
				else = { transfer_state_to = MNT }
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_serbian_novi_pazar = 1 }
			every_country = {
				limit = {
					OR = {
						has_country_flag = is_part_of_international_control_commission
						tag = ALB
						tag = TUR
						AND = {
							has_global_flag = BUL_join_albania_ongoing
							tag = BUL
						}
					}
					has_country_flag = ALB_lc_already_fired_peace_resolution
				}
				set_country_flag = ALB_lc_already_fired_peace_resolution
				country_event = { id = albania.33 days = 7 }
			}
		}
		ai_chance = {
			base = 20
			modifier = {
				OR = {
					SER = {
						has_opinion = {
							target = ROOT
							value > 30
						}
					}
					MNT = {
						has_opinion = {
							target = ROOT
							value > 30
						}
					}
				}
				add = 5
			}
			modifier = {
				OR = {
					SER = {
						has_opinion = {
							target = ROOT
							value > 30
						}
					}
					MNT = {
						has_opinion = {
							target = ROOT
							value > 30
						}
					}
				}
				add = 5
			}
			modifier = {
				OR = {
					SER = {
						has_opinion = {
							target = ROOT
							value > 30
						}
					}
					MNT = {
						has_opinion = {
							target = ROOT
							value > 30
						}
					}
				}
				add = 5
			}
			modifier = {
				original_tag = AUS
				factor = 0
			}
			modifier = {
				is_in_faction_with = AUS
				factor = 0
			}
			modifier = {
				original_tag = RUS
				add = 1000
			}
		}
	}
	option = { #to austria
		name = albania.32.c
		trigger = {
			104 = {
				owner = {
					OR = {
						tag = AUS
						is_subject_of = AUS
					}
				}
			}
			OR = {
				check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
				check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution
		hidden_effect = {
			every_country = {
				limit = { owns_state = 104 }
				set_variable = { global.ALB_lc_104_owner = THIS }
			}
		}
		effect_tooltip = {
			every_state = {
				limit = {
					OR = {
						state = 760
						state = 761
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = global.ALB_lc_104_owner
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_austrian_novi_pazar = 1 }
			every_country = {
				limit = {
					OR = {
						has_country_flag = is_part_of_international_control_commission
						tag = ALB
						tag = TUR
						AND = {
							has_global_flag = BUL_join_albania_ongoing
							tag = BUL
						}
					}
					has_country_flag = ALB_lc_already_fired_peace_resolution
				}
				set_country_flag = ALB_lc_already_fired_peace_resolution
				country_event = { id = albania.33 days = 7 }
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				AUS = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = 5
			}
			modifier = {
				AUS = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = 5
			}
			modifier = {
				AUS = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = 5
			}
			modifier = {
				original_tag = AUS
				add = 1000
			}
			modifier = {
				original_tag = RUS
				factor = 0
			}
		}
	}
	option = { #to austria AND serbia
		name = albania.32.e
		trigger = {
			104 = {
				owner = {
					OR = {
						tag = AUS
						is_subject_of = AUS
					}
				}
			}
			check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
			OR = {
				check_variable = { global.vote_for_big_albania < global.vote_for_small_albania }
				check_variable = { global.vote_for_big_albania < global.vote_for_medium_albania }
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution
		hidden_effect = {
			every_country = {
				limit = { owns_state = 104 }
				set_variable = { global.ALB_lc_104_owner = THIS }
			}
		}
		effect_tooltip = {
			every_state = {
				limit = {
					OR = {
						state = 760
						state = 761
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				transfer_state_to = global.ALB_lc_104_owner
			}
			every_state = {
				limit = {
					state = 847
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				if = {
					limit = {
						any_neighbor_state = {
							NOT = { is_owned_by = SER }
							is_owned_by = MNT
						}
					}
					transfer_state_to = MNT
				}
				else = { transfer_state_to = SER }
			}
			every_state = {
				limit = {
					OR = {
						state = 848
						state = 870
					}
					owner = {
						OR = {
							original_tag = ALB
							original_tag = TUR
							AND = {
								is_subject_of = TUR
								OR = {
									has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
									has_autonomy_state = autonomy_tgwr_ottoman_committee_government
								}
							}
						}
					}
				}
				if = {
					limit = {
						any_neighbor_state = {
							NOT = { is_owned_by = MNT }
							is_owned_by = SER
						}
					}
					transfer_state_to = SER
				}
				else = { transfer_state_to = MNT }
			}
		}
		custom_effect_tooltip = ALB_london_conference_resolution_pass
		hidden_effect = {
			add_to_variable = { global.vote_for_austrian_novi_pazar = 1 }
			every_country = {
				limit = {
					OR = {
						has_country_flag = is_part_of_international_control_commission
						tag = ALB
						tag = TUR
						AND = {
							has_global_flag = BUL_join_albania_ongoing
							tag = BUL
						}
					}
					has_country_flag = ALB_lc_already_fired_peace_resolution
				}
				set_country_flag = ALB_lc_already_fired_peace_resolution
				country_event = { id = albania.33 days = 7 }
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				AUS = {
					has_opinion = {
						target = ROOT
						value > 30
					}
				}
				add = 5
			}
			modifier = {
				AUS = {
					has_opinion = {
						target = ROOT
						value > 50
					}
				}
				add = 5
			}
			modifier = {
				AUS = {
					has_opinion = {
						target = ROOT
						value > 80
					}
				}
				add = 5
			}
			modifier = {
				original_tag = AUS
				add = 1000
			}
			modifier = {
				original_tag = RUS
				factor = 0
			}
		}
	}
}

country_event = { #london conference success
	id = albania.33
	title = albania.33.t
	desc = albania.33.d
	picture = GFX_report_event_london_conference
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		NOT = {
			has_global_flag = ALB_lc_negotiating_macedonia
			has_global_flag = ALB_lc_negotiating_novi_pazar
		}
	}
	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = TUR
						is_subject_of = TUR
						is_in_faction_with = TUR
					}
					has_war_with = ALB
				}
				white_peace = ALB
				set_country_flag = ALB_lc_peace_with_ALB
				if = {
					limit = { has_global_flag = BUL_join_albania_ongoing }
					set_global_flag = ALB_lc_peace_with_ALB
					white_peace = BUL
					every_country = {
						limit = {
							is_in_faction_with = BUL
							is_subject_of = BUL
						}
						white_peace = PREV
						set_country_flag = ALB_lc_peace_with_TUR
					}
				}
			}
			if = {
				limit = {
					check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
					check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
				}
				every_state = {
					limit = {
						ALB_big_albania_states = yes
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					set_state_flag = ALB_lc_state_to_alb
					transfer_state_to = ALB
				}
			}
			else_if = {
				limit = {
					check_variable = { global.vote_for_small_albania > global.vote_for_big_albania }
					check_variable = { global.vote_for_small_albania > global.vote_for_medium_albania }
				}
				every_state = {
					limit = {
						ALB_small_albania_states = yes
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					set_state_flag = ALB_lc_state_to_alb
					transfer_state_to = ALB
				}
			}
			else = {
				every_state = {
					limit = {
						ALB_medium_albania_states = yes
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					set_state_flag = ALB_lc_state_to_alb
					transfer_state_to = ALB
				}
			}
			if = {
				limit = { check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia } }
				set_global_flag = ALB_lc_macedonian_autonomy_confirmed
				every_state = {
					limit = {
						is_core_of = MAC
						OR = {
							is_core_of = ALB
							check_variable = { TUR_south_slavic_state_level > TUR_greek_state_level }
						}
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					clr_state_flag = ALB_lc_state_to_alb
					set_state_flag = ALB_lc_state_to_mac
					transfer_state_to = MAC
				}
				ALB = {
					set_autonomy = {
						target = MAC
						autonomous_state = autonomy_dominion
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BUL = { give_guarantee = MAC }
				MAC = {
					give_military_access = BUL
					add_ideas = ALB_albanian_autonomous_zone
					add_ideas = ALB_bulgarian_autonomous_zone
					add_opinion_modifier = {
						target = BUL
						modifier = ALB_join_puppet
					}
				}
			}
			if = {
				limit = {
					check_variable = { global.vote_for_albanian_novi_pazar > global.vote_for_serbian_novi_pazar }
					check_variable = { global.vote_for_albanian_novi_pazar > global.vote_for_austrian_novi_pazar }
				}
				every_state = {
					limit = {
						OR = {
							state = 760
							state = 761
						}
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					set_state_flag = ALB_lc_state_to_alb
					transfer_state_to = ALB
				}
			}
			else_if = {
				limit = {
					check_variable = { global.vote_for_austrian_novi_pazar > global.vote_for_albanian_novi_pazar }
					check_variable = { global.vote_for_austrian_novi_pazar > global.vote_for_serbian_novi_pazar }
				}
				hidden_effect = {
					every_country = {
						limit = { owns_state = 104 }
						set_variable = { global.ALB_lc_104_owner = THIS }
					}
				}
				if = {
					limit = {
						OR = {
							check_variable = { global.vote_for_big_albania > global.vote_for_small_albania }
							check_variable = { global.vote_for_big_albania > global.vote_for_medium_albania }
						}
					}
					every_state = {
						limit = {
							OR = {
								state = 760
								state = 761
							}
							owner = {
								OR = {
									original_tag = ALB
									original_tag = TUR
									AND = {
										is_subject_of = TUR
										OR = {
											has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
											has_autonomy_state = autonomy_tgwr_ottoman_committee_government
										}
									}
								}
							}
						}
						set_state_flag = ALB_lc_state_to_aus
						transfer_state_to = global.ALB_lc_104_owner
					}
				}
				else = {
					every_state = {
						limit = {
							OR = {
								state = 760
								state = 761
							}
							owner = {
								OR = {
									original_tag = ALB
									original_tag = TUR
									AND = {
										is_subject_of = TUR
										OR = {
											has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
											has_autonomy_state = autonomy_tgwr_ottoman_committee_government
										}
									}
								}
							}
						}
						set_state_flag = ALB_lc_state_to_aus
						transfer_state_to = global.ALB_lc_104_owner
					}
					every_state = {
						limit = {
							state = 847
							owner = {
								OR = {
									original_tag = ALB
									original_tag = TUR
									AND = {
										is_subject_of = TUR
										OR = {
											has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
											has_autonomy_state = autonomy_tgwr_ottoman_committee_government
										}
									}
								}
							}
						}
						if = {
							limit = {
								any_neighbor_state = {
									NOT = { is_owned_by = SER }
									is_owned_by = MNT
								}
							}
							set_state_flag = ALB_lc_state_to_mnt
							transfer_state_to = MNT
						}
						else = {
							set_state_flag = ALB_lc_state_to_ser
							transfer_state_to = SER
						}
					}
					every_state = {
						limit = {
							OR = {
								state = 848
								state = 870
							}
							owner = {
								OR = {
									original_tag = ALB
									original_tag = TUR
									AND = {
										is_subject_of = TUR
										OR = {
											has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
											has_autonomy_state = autonomy_tgwr_ottoman_committee_government
										}
									}
								}
							}
						}
						if = {
							limit = {
								any_neighbor_state = {
									NOT = { is_owned_by = MNT }
									is_owned_by = SER
								}
							}
							set_state_flag = ALB_lc_state_to_ser
							transfer_state_to = SER
						}
						else = {
							set_state_flag = ALB_lc_state_to_mnt
							transfer_state_to = MNT
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						check_variable = { global.vote_for_serbian_novi_pazar > global.vote_for_albanian_novi_pazar }
						check_variable = { global.vote_for_serbian_novi_pazar > global.vote_for_austrian_novi_pazar }
					}
					NOT = {
						check_variable = { global.vote_for_albanian_novi_pazar > global.vote_for_serbian_novi_pazar }
						check_variable = { global.vote_for_albanian_novi_pazar > global.vote_for_austrian_novi_pazar }
						check_variable = { global.vote_for_austrian_novi_pazar > global.vote_for_albanian_novi_pazar }
						check_variable = { global.vote_for_austrian_novi_pazar > global.vote_for_serbian_novi_pazar }
					}
				}
				every_state = {
					limit = {
						OR = {
							state = 760
							AND = {
								check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
								OR = {
									check_variable = { global.vote_for_big_albania < global.vote_for_small_albania }
									check_variable = { global.vote_for_big_albania < global.vote_for_medium_albania }
								}
								state = 847
							}
						}
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					if = {
						limit = {
							any_neighbor_state = {
								NOT = { is_owned_by = SER }
								is_owned_by = MNT
							}
						}
						set_state_flag = ALB_lc_state_to_mnt
						transfer_state_to = MNT
					}
					else = {
						set_state_flag = ALB_lc_state_to_ser
						transfer_state_to = SER
					}
				}
				every_state = {
					limit = {
						OR = {
							state = 761
							AND = {
								check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
								check_variable = { global.vote_for_big_albania < global.vote_for_medium_albania }
								check_variable = { global.vote_for_small_albania < global.vote_for_medium_albania }
								state = 848
							}
							AND = {
								check_variable = { global.vote_for_yes_macedonia > global.vote_for_no_macedonia }
								check_variable = { global.vote_for_big_albania < global.vote_for_small_albania }
								check_variable = { global.vote_for_small_albania > global.vote_for_medium_albania }
								state = 870
							}
						}
						owner = {
							OR = {
								original_tag = ALB
								original_tag = TUR
								AND = {
									is_subject_of = TUR
									OR = {
										has_autonomy_state = autonomy_tgwr_ottoman_autonomous_vilayet
										has_autonomy_state = autonomy_tgwr_ottoman_committee_government
									}
								}
							}
						}
					}
					if = {
						limit = {
							any_neighbor_state = {
								NOT = { is_owned_by = MNT }
								is_owned_by = SER
							}
						}
						set_state_flag = ALB_lc_state_to_ser
						transfer_state_to = SER
					}
					else = {
						set_state_flag = ALB_lc_state_to_mnt
						transfer_state_to = MNT
					}
				}
			}
			every_state = {
				limit = {
					is_owned_by = ALB
					NOT = { has_state_flag = ALB_lc_state_to_alb }
				}
				set_state_flag = ALB_lc_state_to_tur
				transfer_state_to = TUR
			}
			clr_global_flag = BUL_join_albania_ongoing
		}
	}
	option = {
		name = albania.33.a
		trigger = { tag = ALB }
		effect_tooltip = {
			every_country = {
				limit = { has_country_flag = ALB_lc_peace_with_ALB }
				white_peace = ALB
				if = {
					limit = { has_global_flag = ALB_lc_peace_with_ALB }
					white_peace = BUL
					every_country = {
						limit = { has_country_flag = ALB_lc_peace_with_TUR }
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_alb }
				transfer_state_to = ALB
			}
			if = {
				limit = { has_global_flag = ALB_lc_macedonian_autonomy_confirmed }
				every_state = {
					limit = { has_state_flag = ALB_lc_state_to_mac }
					transfer_state_to = MAC
				}
				ALB = {
					set_autonomy = {
						target = MAC
						autonomous_state = autonomy_dominion
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BUL = { give_guarantee = MAC }
				MAC = {
					give_military_access = BUL
					add_ideas = ALB_albanian_autonomous_zone
					add_ideas = ALB_bulgarian_autonomous_zone
					add_opinion_modifier = {
						target = BUL
						modifier = ALB_join_puppet
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_ser }
				transfer_state_to = SER
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_mnt }
				transfer_state_to = MNT
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_aus }
				transfer_state_to = global.ALB_lc_104_owner
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_tur }
				transfer_state_to = TUR
			}
			hidden_effect = { news_event = { id = albania.35 hours = 6 } }
			complete_national_focus = ALB_call_for_great_power_intervention
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.33.b
		trigger = {
			NOT = {
				tag = ALB
				tag = TUR
			}
			OR = {
				AND = {
					NOT = { tag = BUL }
					has_global_flag =  BUL_join_albania_ongoing
				}
				NOT = { has_global_flag =  BUL_join_albania_ongoing }
			}
		}
		effect_tooltip = {
			every_country = {
				limit = { has_country_flag = ALB_lc_peace_with_ALB }
				white_peace = ALB
				if = {
					limit = { has_global_flag = ALB_lc_peace_with_ALB }
					white_peace = BUL
					every_country = {
						limit = { has_country_flag = ALB_lc_peace_with_TUR }
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_alb }
				transfer_state_to = ALB
			}
			if = {
				limit = { has_global_flag = ALB_lc_macedonian_autonomy_confirmed }
				every_state = {
					limit = { has_state_flag = ALB_lc_state_to_mac }
					transfer_state_to = MAC
				}
				ALB = {
					set_autonomy = {
						target = MAC
						autonomous_state = autonomy_dominion
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BUL = { give_guarantee = MAC }
				MAC = {
					give_military_access = BUL
					add_ideas = ALB_albanian_autonomous_zone
					add_ideas = ALB_bulgarian_autonomous_zone
					add_opinion_modifier = {
						target = BUL
						modifier = ALB_join_puppet
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_ser }
				transfer_state_to = SER
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_mnt }
				transfer_state_to = MNT
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_aus }
				transfer_state_to = global.ALB_lc_104_owner
			}
			hidden_effect = { news_event = { id = albania.35 hours = 6 } }
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.33.c
		trigger = { tag = TUR }
		effect_tooltip = {
			every_country = {
				limit = { has_country_flag = ALB_lc_peace_with_ALB }
				white_peace = ALB
				if = {
					limit = { has_global_flag = ALB_lc_peace_with_ALB }
					white_peace = BUL
					every_country = {
						limit = { has_country_flag = ALB_lc_peace_with_TUR }
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_alb }
				transfer_state_to = ALB
			}
			if = {
				limit = { has_global_flag = ALB_lc_macedonian_autonomy_confirmed }
				every_state = {
					limit = { has_state_flag = ALB_lc_state_to_mac }
					transfer_state_to = MAC
				}
				ALB = {
					set_autonomy = {
						target = MAC
						autonomous_state = autonomy_dominion
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BUL = { give_guarantee = MAC }
				MAC = {
					give_military_access = BUL
					add_ideas = ALB_albanian_autonomous_zone
					add_ideas = ALB_bulgarian_autonomous_zone
					add_opinion_modifier = {
						target = BUL
						modifier = ALB_join_puppet
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_ser }
				transfer_state_to = SER
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_mnt }
				transfer_state_to = MNT
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_aus }
				transfer_state_to = global.ALB_lc_104_owner
			}
			hidden_effect = { news_event = { id = albania.35 hours = 6 } }
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.33.e
		trigger = {
			tag = BUL
			has_global_flag = BUL_join_albania_ongoing
		}
		effect_tooltip = {
			every_country = {
				limit = { has_country_flag = ALB_lc_peace_with_ALB }
				white_peace = ALB
				if = {
					limit = { has_global_flag = ALB_lc_peace_with_ALB }
					white_peace = BUL
					every_country = {
						limit = { has_country_flag = ALB_lc_peace_with_TUR }
						white_peace = PREV
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_alb }
				transfer_state_to = ALB
			}
			if = {
				limit = { has_global_flag = ALB_lc_macedonian_autonomy_confirmed }
				every_state = {
					limit = { has_state_flag = ALB_lc_state_to_mac }
					transfer_state_to = MAC
				}
				ALB = {
					set_autonomy = {
						target = MAC
						autonomous_state = autonomy_dominion
						end_wars = yes
						end_civil_wars = yes
					}
				}
				BUL = { give_guarantee = MAC }
				MAC = {
					give_military_access = BUL
					add_ideas = ALB_albanian_autonomous_zone
					add_ideas = ALB_bulgarian_autonomous_zone
					add_opinion_modifier = {
						target = BUL
						modifier = ALB_join_puppet
					}
				}
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_ser }
				transfer_state_to = SER
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_mnt }
				transfer_state_to = MNT
			}
			every_state = {
				limit = { has_state_flag = ALB_lc_state_to_aus }
				transfer_state_to = global.ALB_lc_104_owner
			}
			hidden_effect = { news_event = { id = albania.35 hours = 6 } }
		}
		ai_chance = { base = 100 }
	}
}

country_event = { #london conference ceasefire
	id = albania.34
	title = albania.34.t
	desc = albania.34.d
	picture = GFX_report_event_london_conference
	is_triggered_only = yes
	timeout_days = 1
	option = {
		name = albania.34.a
		trigger = { original_tag = ALB }
		add_ideas = ALB_london_armistice
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.34.b
		trigger = {
			OR = {
				original_tag = TUR
				is_in_faction_with = TUR
				is_subject_of = TUR
			}
		}
		if = {
			limit = { has_global_flag = BUL_join_albania_ongoing }
			add_ideas = TUR_london_armistice_w_BUL
		}
		else = { add_ideas = TUR_london_armistice }
		ai_chance = { base = 100 }
	}
	option = {
		name = albania.34.c
		trigger = {
			OR = {
				original_tag = BUL
				is_in_faction_with = BUL
				is_subject_of = BUL
			}
		}
		add_ideas = ALB_london_armistice
		ai_chance = { base = 100 }
	}
}

news_event = { #london conference event
	id = albania.35
	title = albania.35.t
	desc = albania.35.d
	picture = EVENT_hoi4tgw_first_balkan_war_end
	major = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		trigger = { tag = ALB }
		name = albania.35.a
		ai_chance = { factor = 100 }
	}
	option = {
		trigger = { tag = TUR }
		name = albania.35.b
		ai_chance = { factor = 100 }
	}
	option = {
		trigger = { has_country_flag = is_part_of_international_control_commission }
		name = albania.35.c
		ai_chance = { factor = 100 }
	}
	option = {
		trigger = {
			tag = BUL
			has_global_flag = BUL_join_albania_ongoing
		}
		name = albania.35.e
		ai_chance = { factor = 100 }
	}
	option = {
		trigger = {
			NOT = {
				has_country_flag = is_part_of_international_control_commission
				tag = ALB
				tag = TUR
			}
			OR = {
				AND = {
					NOT = { tag = BUL }
					has_global_flag =  BUL_join_albania_ongoing
				}
				NOT = { has_global_flag =  BUL_join_albania_ongoing }
			}
		}
		name = albania.35.f
		ai_chance = { factor = 100 }
	}
}

news_event = { #independent albania
	id = albania.36
	title = albania.36.t
	desc = albania.36.d
	picture = GFX_news_event_independent_albania
	major = yes
	fire_only_once = yes
	option = {
		trigger = { original_tag = ALB }
		name = albania.36.a
		ai_chance = { factor = 100 }
	}
	option = {
		trigger = { has_war_with = ALB }
		name = albania.36.b
		ai_chance = { factor = 100 }
	}
	option = {
		trigger = {
			NOT = {
				original_tag = ALB
				has_war_with = ALB
			}
		}
		name = albania.36.c
		ai_chance = { factor = 100 }
	}
}

#albanian king choices
country_event = {
	title = ww1_albania.1.t
	desc = ww1_albania.1.d
	id = ww1_albania.1
	picture = GFX_report_event_royal_parade
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			remove_ideas = standing_alone
		}
	}
	is_triggered_only = yes
	option = {
		name = ww1_albania.1.a
		set_cosmetic_tag = ALB_principality
		set_country_flag = ALB_principality
		set_capital = {
			state = 44
		}
		ai_chance = {
			base = 50
			modifier = {
				OR = {
					has_game_rule = {
						rule = fate_of_albania
						option = FATE_OF_ALBANIA_FUAD_OPTION
					}
					has_game_rule = {
						rule = fate_of_albania
						option = FATE_OF_ALBANIA_VITTORIO_OPTION
					}
				}
				factor = 0
			}
			modifier = {
				is_historical_focus_on = yes
				factor = 50
			}
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = ALB_neutrality_prince_party
			name = ALB_neutrality_prince_party
		}
		add_country_leader_role = {
			Character = ALB_vilhelm_i
			Promote_leader = yes
			Country_leader = {
				ideology = semi_constitutional_monarchy
				traits = {
					foreign_leader
					german_agent
				}
			}
		}
		GER = {
			add_opinion_modifier = {
				target = ALB
				modifier = small_increase
			}
		}
		AUS = {
			add_opinion_modifier = {
				target = ALB
				modifier = small_increase
			}
		}
		hidden_effect = {
			promote_character = ALB_vilhelm_i
		}
		custom_effect_tooltip = generic_historical_pm_tt
		custom_effect_tooltip = ALB_discontent_muslims
	}
	option = {
		name = ww1_albania.1.b
		set_cosmetic_tag = ALB_principality
		set_country_flag = ALB_principality
		set_capital = {
			state = 44
		}
		ai_chance = {
			base = 50
			modifier = {
				has_game_rule = {
					rule = fate_of_albania
					option = FATE_OF_ALBANIA_FUAD_OPTION
				}
				factor = 500
			}
			modifier = {
				is_historical_focus_on = yes
				NOT = {
					has_game_rule = {
						rule = fate_of_albania
						option = FATE_OF_ALBANIA_FUAD_OPTION
					}
				}
				factor = 0
			}
		}
		add_stability = 0.05
		EGY = {
			EGY_fuad_i_muhammad_ali = {
				set_nationality = ALB
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = semi_constitutional_monarchy
						traits = {
							foreign_leader
						}
					}
				}
			}
		}
		EGY = {
			add_opinion_modifier = {
				target = ALB
				modifier = small_increase
			}
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = ALB_neutrality_muhammad_ali_party_long
			name = ALB_neutrality_muhammad_ali_party
		}
		
	}
	option = {
		name = ww1_albania.1.c
		set_cosmetic_tag = ALB_principality
		set_country_flag = ALB_principality
		set_capital = {
			state = 44
		}
		ai_chance = {
			base = 25
			modifier = {
				has_game_rule = {
					rule = fate_of_albania
					option = FATE_OF_ALBANIA_VITTORIO_OPTION
				}
				factor = 500
			}
			modifier = {
				is_historical_focus_on = yes
				NOT = {
					has_game_rule = {
						rule = fate_of_albania
						option = FATE_OF_ALBANIA_VITTORIO_OPTION
					}
				}
				factor = 0
			}
		}
		ITA = {
			ITA_vittorio_emanuele_di_savoy_aosta = {
				set_nationality = ALB
				set_character_name = ALB_vittorio_emanuele
				if = {
					limit = {
						has_ideology = semi_constitutional_monarchy
					}
					promote_character = semi_constitutional_monarchy							
				}
				else = {
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = semi_constitutional_monarchy
							traits = {
								foreign_leader
							}
						}
					}
				}
			}
		}
		ITA = {
			add_opinion_modifier = {
				target = ALB
				modifier = small_increase
			}
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = ALB_neutrality_savoy_party
			name = ALB_neutrality_savoy_party
		}
	}
}

### Updated as ottoman event
# #Albanian Revolt of 1910
# country_event = {
# 	title = ww1_albania.2.t
# 	desc = ww1_albania.2.d
# 	id = ww1_albania.2
# 	picture = GFX_report_event_spr_civil_war_faction_defeated
# 	fire_only_once = yes
# 	mean_time_to_happen = {
# 		days = 10
# 	}
# 	trigger = {
# 		tag = TUR
# 		controls_state = 848
# 		controls_state = 870
# 		NOT = {
# 			country_exists = ALB
# 			has_global_flag = ALB_revolt_of_1910
# 		}
# 		date > 1910.6.5
# 		848 = {
# 			has_dynamic_modifier = { modifier = TUR_albanian_minority }
# 		}
# 		870 = {
# 			has_dynamic_modifier = { modifier = TUR_albanian_minority }
# 		}
# 	}
# 	immediate = {
# 		set_global_flag = ALB_revolt_of_1910
# 	}
# 	option = {
# 		name = ww1_albania.2.a
# 		add_war_support = 0.05
# 		if = {
# 			limit = {
# 				848 = {
# 					has_dynamic_modifier = { modifier = TUR_albanian_minority }
# 				}
# 			}
# 			848 = {
# 				add_resistance = 15
# 			}
# 		}
# 		if = {
# 			limit = {
# 				870 = {
# 					has_dynamic_modifier = { modifier = TUR_albanian_minority }
# 				}
# 			}
# 			870 = {
# 				add_resistance = 15
# 			}
# 		}
# 		ai_chance = {
# 			factor = 100
# 		}
# 	}
# }
#Albanian Revolt of 1911
country_event = {
	title = ww1_albania.2.t
	desc = ww1_albania.2.d
	id = ww1_albania.4
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		set_global_flag = ALB_revolt_of_1911
	}
	option = {
		name = ww1_albania.2.a
		custom_effect_tooltip = TUR_ottoman_intel_to_enemies_3_resistance_target_3_recruitable_population_malus_3_tt
		hidden_effect = {
			every_owned_state = {
				limit = { has_dynamic_modifier = { modifier = TUR_albanian_minority } }
				add_to_variable = { TUR_ottoman_recruitable_population_factor = -0.07 }
				add_to_variable = { TUR_ottoman_local_intel_to_enemies = 0.15 }
				add_to_variable = { TUR_ottoman_resistance_target = 0.15 }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				has_game_rule = {
					rule = fate_of_albania
					option = FATE_OF_ALBANIA_OTTOMAN_EMIRATE_OPTION
				}
				factor = 0
			}
		}
	}
	option = {
		name = ww1_albania.2.b
		release_puppet = ALB
		set_autonomy = {
			target = ALB
			autonomous_state = autonomy_tgwr_ottoman_emirate
		}
		if = {
			limit = { NOT = { has_government = communism } }
			TUR_ahmet_izzet = {
				set_nationality = ALB
				set_character_name = ALB_ahmet_izzet
				add_country_leader_role = {
					promote_leader = yes
						country_leader = {
							ideology = semi_constitutional_monarchy
							traits = { ottoman_prince }
					}
				}
			}
			hidden_effect = {
				ALB = {
					set_cosmetic_tag = ALB_sultanate
					set_politics={
						ruling_party = neutrality
						elections_allowed = no 
						long_name = ALB_neutrality_sultan_party
						name = ALB_neutrality_sultan_party
					}	
					set_popularities = {
						democratic = 40
						neutrality = 60
					}
				}	
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					has_dynamic_modifier = { modifier = TUR_albanian_minority }
					is_core_of = ALB
				}
			}
			transfer_state_to = ALB
		}
		ai_chance = {
			factor = 25
			modifier = {
				NOT = {
					has_game_rule = {
						rule = fate_of_albania
						option = FATE_OF_ALBANIA_OTTOMAN_EMIRATE_OPTION
					}
				}
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
	option = {
		name = ww1_albania.2.c
		release_puppet = ALB
		set_autonomy = {
			target = ALB
			autonomous_state = autonomy_tgwr_ottoman_emirate
		}
		if = {
			limit = { NOT = { has_government = communism } }
			TUR_ahmet_izzet = {
				set_nationality = ALB
				set_character_name = ALB_ahmet_izzet
				hidden_effect = {
					remove_country_leader_role = {
						ideology = authoritarian_democracy
					}
				}
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = semi_constitutional_monarchy
						traits = { ottoman_prince }
					}
				}
			}
			hidden_effect = {
				ALB = {
					set_cosmetic_tag = ALB_sultanate
					set_politics={
						ruling_party = neutrality
						elections_allowed = no 
						long_name = ALB_neutrality_sultan_party
						name = ALB_neutrality_sultan_party
					}	
					set_popularities = {
						democratic = 40
						neutrality = 60
					}
				}	
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					has_dynamic_modifier = {
						modifier = TUR_albanian_minority
					}
					is_core_of = ALB
					state = 761
					state = 760
					state = 106
					state = 758
					state = 203
					state = 759
					state = 1140
					state = 1141
					state = 1213
				}
			}
			transfer_state_to = ALB
		}
		transfer_units_fraction = {
			target = ALB
			size = 0.1
			target_organization = 1
			source_organization = 1
			army_ratio = 0.1
			navy_ratio = 0
			stockpile_ratio = 0.1
		}
		ai_chance = {
			factor = 100
			modifier = {
				NOT = {
					has_game_rule = {
						rule = fate_of_albania
						option = FATE_OF_ALBANIA_OTTOMAN_EMIRATE_OPTION
					}
				}
				is_historical_focus_on = yes
				factor = 0
			}
		}
	}
}

#Greece proclaimed the annexation of Northern Epirus
country_event = {
	title = ww1_albania.5.t
	desc = ww1_albania.5.d
	id = ww1_albania.5
	fire_only_once = yes
	picture = GFX_report_event_gre_parade
	# since greek tree is not finished yet, it should be triggered manually
	# moved to decision, you can remove that after implementing the focus tree
	is_triggered_only = yes
	option = {
		name = ww1_albania.5.a
		hidden_effect = {
			if = {
				limit = {
					country_exists = EPR
				}
				FROM = {
					annex_country = {
						target = EPR
						transfer_troops = yes
					}
				}
				every_state = {
					limit = {
						is_core_of = EPR
					}
					remove_core_of = EPR
				}
			}
		}
		803 = {
			transfer_state_to = FROM
			set_demilitarized_zone = no
			remove_dynamic_modifier = {
				modifier = ALB_greek_minority
			}
		}
		add_opinion_modifier = {
			target = FROM
			modifier = HOI4TGW_Opinion_diplomats_malus
		}
		hidden_effect = {
			if = {
				limit = {
					owns_state = 871
					ITA = {
						exists = yes
						has_guaranteed = ROOT
						has_capitulated = no
						is_subject = no
						NOT = {
							has_war_with = PREV
						}
					}
				}
				ITA = {
					country_event = {
						id = ww1_albania.19
						days = 3
					}
				}
			}
		}
	}
}

#Albanian Revolt of 1912
country_event = {
	title = ww1_albania.2.t
	desc = ww1_albania.6.d
	id = ww1_albania.6
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	mean_time_to_happen = {
		days = 10
	}
	trigger = {
		tag = TUR
		controls_state = 847
		ALB = {
			exists = no
		}
		date > 1912.1.10
		has_start_date < 1914.1.1	
		NOT = {
			has_global_flag = ALB_revolt_of_1912
		}
		847 = {
			has_dynamic_modifier = {
				modifier = TUR_albanian_minority
			}
		}
		always = no
	}
	immediate = {
		set_global_flag = ALB_revolt_of_1912
	}
	immediate = {
		set_global_flag = albanian_revolt_1912
	}
	option = {
		name = ww1_albania.2.a
		847 = {
			add_resistance = 25
		}
		ai_chance = {
			factor = 100
		}
	}
}

#Albanian War for Independence
country_event = {
	title = ww1_albania.7.t
	desc = ww1_albania.7.d
	id = ww1_albania.7
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	mean_time_to_happen = {
		days = 10
	}
	trigger = {
		tag = TUR
		has_war = no
		NOT = {
			is_subject_of = TUR
		}
		any_owned_state = {
			is_core_of = ALB
			is_controlled_by = TUR
		}
		NOT = {
			country_exists = ALB
		}
		date > 1913.4.10
		has_start_date < 1914.1.1
		any_state = {
			is_core_of = ALB
			has_dynamic_modifier = {
				modifier = TUR_albanian_minority
			}
		}
	}
	option = {
		name = ww1_albania.2.a
		every_owned_state = {
			limit = {
				OR = {
					state = 44
					state = 870
					state = 871
					state = 803
					state = 848
					state = 847
					state = 1214
					state = 1215
				}
				has_dynamic_modifier = {
					modifier = TUR_albanian_minority
				}
			}
			transfer_state_to = ALB
		}
		ALB = {
			set_cosmetic_tag = ALB_independent
			hidden_effect = {
				division_template = {
					name = "Milicitë Shqiptare"
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 1
							y = 0
						}
						infantry = {
							x = 1
							y = 1
						}
					}
				}
				if = {
					limit = {
						44 = {
							has_dynamic_modifier = {
								modifier = TUR_albanian_minority
							}
						}
					}
					44 = {
						create_unit = {
							division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
							owner = ALB
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
							owner = ALB
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				if = {
					limit = {
						803 = {
							has_dynamic_modifier = {
								modifier = TUR_albanian_minority
							}
						}
					}
					803 = {
						create_unit = {
							division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
							owner = ALB
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				if = {
					limit = {
						871 = {
							has_dynamic_modifier = {
								modifier = TUR_albanian_minority
							}
						}
					}
					871 = {
						create_unit = {
							division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
							owner = ALB
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				if = {
					limit = {
						44 = {
							NOT = {
								has_dynamic_modifier = {
									modifier = TUR_albanian_minority
								}
							}
						}
						803 = {
							NOT = {
								has_dynamic_modifier = {
									modifier = TUR_albanian_minority
								}
							}
						}
						871 = {
							NOT = {
								has_dynamic_modifier = {
									modifier = TUR_albanian_minority
								}
							}
						}
					}
					random_owned_state = {
						create_unit = {
							division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
							owner = ALB
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_owned_state = {
						create_unit = {
							division = "division_template = \"Milicitë Shqiptare\" start_experience_factor = 0.1"
							owner = ALB
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				# load_oob = ALB_1912
				every_owned_state = {
					add_claim_by = TUR
				}
			}
		}
		declare_war_on = {
			target = ALB
			type = annex_everything
		}
		ai_chance = {
			factor = 1
		}
	}
	#	option = {
	#		name = ww1_albania.2.b
	#		every_owned_state = {
	#			limit = {
	#				is_core_of = ALB
	#				NOT = {
	#					is_core_of = SER
	#				}
	#			}
	#			ALB = {
	#				transfer_state = PREV
	#			}
	#		}
	#		add_war_support = -0.15
	#		ai_chance = {
	#			base = 100
	#			modifier = {
	#				factor = 0
	#				has_global_flag = kis_firstbalkanwar_lose
	#			}
	#		}
	#	}
}

# Serbian troops retreat into Albania
country_event = {
	title = ww1_albania.8.t
	desc = ww1_albania.8.d
	id = ww1_albania.8
	picture = GFX_report_event_generic_army
	is_triggered_only = yes
	# fire_only_once = yes
	# trigger = {
	# 	tag = SER
	# 	has_war_with = AUS
	# 	ALB = {
	# 		is_neighbor_of = ROOT
	# 		has_war = no
	# 		is_subject = no
	# 		has_global_flag = albanian_peasant_revolt
	# 	}
	# 	OR = {
	# 		surrender_progress > 0.5
	# 		AND = {
	# 			has_war_with = BUL
	# 			surrender_progress > 0.2
	# 		}
	# 	}
	# }
	option = {
		name = ww1_albania.8.a
		ALB = {
			set_country_flag = military_access_to_serbia
			give_military_access = SER
			if = {
				limit = {
					MNT = {
						is_neighbor_of = PREV
						has_war_with = AUS
					}
				}
				give_military_access = MNT
			}
			hidden_effect = {
				country_event = ww1_albania.9
			}
		}
	}
}

# Military access to Serbia
country_event = {
	title = ww1_albania.9.t
	desc = ww1_albania.9.d
	id = ww1_albania.9
	picture = GFX_report_event_generic_army
	is_triggered_only = yes
	option = {
		name = ww1_albania.9.a
		trigger = {
			tag = ALB
		}
		if = {
			limit = {
				SER = {
					has_war_with = AUS
				}
			}
			add_to_war = {
				targeted_alliance = SER
				enemy = AUS
			}
			give_military_access = SER
			add_ideas = standing_alone
		}
		hidden_effect = {
			AUS = {
				country_event = ww1_albania.9
			}
		}
	}
	option = {
		name = ww1_albania.9.b
		trigger = {
			tag = AUS
		}
	}
}

# Peasant Revolt in Albania
country_event = {
	title = ww1_albania.10.t
	desc = ww1_albania.10.d
	id = ww1_albania.10
	picture = GFX_report_event_albanian_peasent_revolt
	fire_only_once = yes
	trigger = {
		tag = ALB
		has_country_flag = ALB_dutch_gendarmerie_dissolved
		OR = {
			has_country_leader = {
				character = ALB_vilhelm_i
				ruling_only = yes
			}
			has_country_leader = {
				character = ITA_vittorio_emanuele_di_savoy_aosta
				ruling_only = yes
			}
		}
		is_subject = no
		# date > 1914.7.1
		NOT = {
			has_global_flag = great_war_ends
		}
	}
	mean_time_to_happen = {
		days = 100
		modifier = {
			factor = 0
			date > 1914.7.1
		}
	}
	option = {
		name = ww1_albania.10.a
		set_global_flag = albanian_peasant_revolt
		add_ideas = ALB_idea_unstable_regime
		add_stability = -0.1
		ALB = {
			ALB_essad_pasha_toptani = {
				set_nationality = ALB
				promote_character = warlordism
				promote_character = stratocracy
			}
		}
		drop_cosmetic_tag = yes
		set_party_name = {
			ideology = neutrality
			long_name = ALB_neutrality_party_long
			name = ALB_neutrality_party
		}
		every_subject_country = {
			ROOT = {
				end_puppet = PREV
			}
		}
		if = {
			limit = {
				owns_state = 803
			}
			803 = { 
				add_core_of = EPR
				transfer_state_to = EPR
			}
		}
	}
}

#No More Ottoman Puppet
country_event = {
	id = ww1_albania.11
	hidden = yes
	trigger = {
		tag = ALB
		has_country_leader = {
			character = TUR_ahmet_izzet
			ruling_only = no
		}	
		NOT = {
			is_subject_of = TUR
		}
	}
	mean_time_to_happen = {
		days = 0
	}
	immediate = {
		if = {
			limit = {
				NOT = {
					has_cosmetic_tag = ALB_principality
				}
			}
			ALB_essad_pasha_toptani = {
				promote_character = warlordism
				promote_character = stratocracy
			}
			set_party_name = {
				ideology = neutrality
				long_name = ALB_neutrality_party_long
				name = ALB_neutrality_party
			}
			drop_cosmetic_tag = yes
		}
		TUR_ahmet_izzet = {
			set_character_name = TUR_ahmet_izzet
			remove_country_leader_role = {
				ideology = semi_constitutional_monarchy
			}	
			add_country_leader_role = {
				country_leader = {
					ideology = authoritarian_democracy
					traits = { TUR_marshal_vezier grand_vizier }
				}
			}	
			set_nationality = TUR
		}
	}
}

# Congress of Lushnjë
country_event = {
	id = ww1_albania.12
	title = ww1_albania.12.t
	desc = ww1_albania.12.d
	picture = GFX_report_event_generic_conference
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_turhan_permeti
		}
		has_cosmetic_tag = ALB_principality
		has_global_flag = interbellum
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.12.a
		add_country_leader_role = {
			character = ALB_high_council_of_regency
			promote_leader = yes
			country_leader = {
				ideology = authoritarian_democracy
			}
		}
		set_party_name = {
			ideology = neutrality
			long_name = ALB_neutrality_regency_party
			name = ALB_neutrality_regency_party
		}
		hidden_effect = {
			add_country_leader_role = {
				character = ALB_fan_noli
				promote_leader = yes
				country_leader = {
					ideology = social_liberalism
					traits = {
						priestly_prime_minister
					}
				}
			}
			add_victory_points = {
				province = 9914
				value = 2
			}
			add_victory_points = {
				province = 12700
				value = -1
			}
			set_capital = {
				state = 44
			}
			set_party_name = {
				ideology = democratic
				long_name = ALB_peoples_party
				name = ALB_peoples_party
			}
			retire_character = ALB_ismail_qemali
			retire_character = ALB_essad_pasha_toptani
			retire_character = ALB_prenk_bib_doda
			set_party_name = {
				ideology = fascism
				long_name = fascism
				name = fascism
			}
		}
	}
}

# June Revolution ( historical )
country_event = {
	id = ww1_albania.13
	title = ww1_albania.13.t
	desc = ww1_albania.13.d
	picture = GFX_report_event_generic_rally
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_high_council_of_regency
		}
		has_country_leader = {
			character = ALB_fan_noli
			ruling_only = no
		}
		has_cosmetic_tag = ALB_principality
		date > 1924.6.1
		is_subject = no
	}
	immediate = {
		hidden_effect = {
			retire_character = ALB_avni_rrustemi
		}
	}
	mean_time_to_happen = {
		days = 16
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.13.a
		add_stability = -0.2
		add_country_leader_role = {
			character = ALB_fan_noli
			promote_leader = yes
			country_leader = {
				ideology = authoritarian_democracy
				traits = {
					priestly_prime_minister
				}
			}
		}
		set_party_name = {
			ideology = neutrality
			long_name = ALB_revolutionary_party
			name = ALB_revolutionary_party
		}
		ai_chance = {
			base = 100
		}
	}
	option = {
		name = ww1_albania.13.b
		add_stability = -0.2
		add_political_power = -100
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

# Zogu's Revenge
country_event = {
	id = ww1_albania.14
	title = ww1_albania.14.t
	desc = ww1_albania.14.d
	picture = GFX_report_event_generic_parliament
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_fan_noli
		}
		has_government = neutrality
		has_war = no
		is_subject = no
		date > 1928.9.1
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.14.a
		set_cosmetic_tag = ALB_republic
		set_party_name = {
			ideology = neutrality
			long_name = ALB_neutrality_zogu_party
			name = ALB_neutrality_zogu_party
		}
		set_party_name = {
			ideology = fascism
			long_name = ALB_neutrality_zogu_party
			name = ALB_neutrality_zogu_party
		}
		ALB_ahmet_zogu = {
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = civilian_dictatorship
					traits = {
						dictator
					}
				}
			}
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = stratocracy
					traits = {
						dictator
					}
				}
			}
		}
		hidden_effect = {
			retire_character = ALB_high_council_of_regency
			set_party_name = {
				ideology = democratic
				long_name = ALB_KONARE_party_long
				name = ALB_KONARE_party
			}
			set_party_name = {
				ideology = communism
				long_name = ALB_KONARE_party_long
				name = ALB_KONARE_party
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 2
				SER = {
					has_country_flag = great_war_winner
				}
			}
		}
	}
	option = {
		name = ww1_albania.14.b
		add_political_power = -150
		set_politics = {
			ruling_party = democratic
			elections_allowed = yes
		}
		set_cosmetic_tag = ALB_republic
		ALB_fan_noli = {
			remove_country_leader_role = {
				ideology = authoritarian_democracy
			}
			remove_country_leader_trait = priestly_prime_minister
			add_country_leader_trait = social_reformer
		}
		hidden_effect = {
			retire_character = ALB_high_council_of_regency
			ALB_ahmet_zogu = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = civilian_dictatorship
						traits = {
							dictator
						}
					}
				}
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = stratocracy
						traits = {
							dictator
						}
					}
				}
			}
			set_party_name = {
				ideology = neutrality
				long_name = ALB_neutrality_zogu_party
				name = ALB_neutrality_zogu_party
			}
			set_party_name = {
				ideology = fascism
				long_name = ALB_neutrality_zogu_party
				name = ALB_neutrality_zogu_party
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

# Albanian Kingdom?
country_event = {
	id = ww1_albania.15
	title = ww1_albania.15.t
	desc = ww1_albania.15.d
	picture = GFX_report_event_albanian_king_zog
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_ahmet_zogu
		}
		has_war = no
		is_subject = no
		date > 1928.9.1
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.15.a
		set_cosmetic_tag = ALB_kingdom
		set_party_name = {
			ideology = neutrality
			long_name = ALB_house_of_zogu_party
			name = ALB_house_of_zogu_party
		}
		hidden_effect = {
			ALB_ahmet_zogu = {
				set_character_name = ALB_zog_i
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = absolute_monarchy
						traits = {
							dictator
						}
					}
				}
				remove_country_leader_role = {
					ideology = civilian_dictatorship
				}
				remove_advisor_role = {
					slot = political_advisor
				}
			}
			set_party_name = {
				ideology = fascism
				long_name = ALB_house_of_zogu_party
				name = ALB_house_of_zogu_party
			}
		}
		ai_chance = {
			base = 100
		}
	}
	option = {
		name = ww1_albania.15.b
		set_cosmetic_tag = ALB_kingdom
		set_party_name = {
			ideology = neutrality
			long_name = ALB_house_of_zogu_party
			name = ALB_house_of_zogu_party
		}
		hidden_effect = {
			ALB_ahmet_zogu = {
				set_character_name = ALB_skanderbeg_iii
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = absolute_monarchy
						traits = {
							dictator
						}
					}
				}
				remove_country_leader_role = {
					ideology = civilian_dictatorship
				}
				remove_advisor_role = {
					slot = political_advisor
				}
			}
			set_party_name = {
				ideology = fascism
				long_name = ALB_house_of_zogu_party
				name = ALB_house_of_zogu_party
			}
		}
		ai_chance = {
			base = 15
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	option = {
		name = ww1_albania.15.c
		hidden_effect = {
			ALB_ahmet_zogu = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = authoritarian_democracy
					}
				}
				remove_country_leader_role = {
					ideology = civilian_dictatorship
				}
			}
		}
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

# June Revolution ( Vilhelm I )
country_event = {
	id = ww1_albania.16
	title = ww1_albania.13.t
	desc = ww1_albania.16.d
	picture = GFX_report_event_albanian_partisans
	trigger = {
		tag = ALB
		has_country_leader = {
			character = ALB_vilhelm_i
		}
		has_country_flag = interbellum
		date > 1924.6.1
		has_war = no
	}
	mean_time_to_happen = {
		days = 15
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.16.a
		if = {
			limit = {
				is_subject = yes
			}
			OVERLORD = {
				country_event = {
					id = ww1_albania.17
					days = 3
				}
				end_puppet = ROOT
				ROOT = {
					leave_faction = yes
				}
			}
		}
		set_cosmetic_tag = ALB_republic
		set_politics = {
			ruling_party = democratic
			elections_allowed = yes
			long_name = ALB_unity_party
			name = ALB_unity_party
		}
		add_country_leader_role = {
			promote_leader = yes
			character = ALB_avni_rrustemi
			country_leader = {
				ideology = social_democracy
				traits = {
					ALB_national_hero
				}
			}
		}
		hidden_effect = {
			set_popularities = {
				democratic = 58
				neutrality = 40
				communism = 2
			}
			ALB_ahmet_zogu = {
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = civilian_dictatorship
						traits = {
							dictator
						}
					}
				}
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = stratocracy
						traits = {
							dictator
						}
					}
				}
			}
			set_party_name = {
				ideology = neutrality
				long_name = ALB_neutrality_zogu_party
				name = ALB_neutrality_zogu_party
			}
			set_party_name = {
				ideology = fascism
				long_name = ALB_neutrality_zogu_party
				name = ALB_neutrality_zogu_party
			}
		}
		ai_chance = {
			base = 100
		}
	}
	option = {
		name = ww1_albania.16.b
		add_stability = -0.15
		add_manpower = -5000
		ai_chance = {
			base = 0
			modifier = {
				add = 50
				is_subject_of = GER
			}
		}
	}
}

# Overlord reaction to June Revolution
country_event = {
	id = ww1_albania.17
	title = ww1_albania.17.t
	desc = ww1_albania.17.d
	picture = GFX_report_event_albanian_partisans
	is_triggered_only = yes
	option = {
		name = ww1_albania.17.a
		declare_war_on = {
			target = FROM
			type = puppet_wargoal_focus
		}
		ai_chance = {
			base = 70
			modifier = {
				factor = 0
				NOT = {
					is_neighbor_of = FROM
				}
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					has_war_with = ROOT
				}
			}
			modifier = {
				factor = 0
				has_war_support < 0.5
			}
		}
	}
	option = {
		name = ww1_albania.17.b
		add_political_power = -50
		add_opinion_modifier = {
			target = ALB
			modifier = HOI4TGW_Opinion_hostile_diplomatic_relations
		}
		ai_chance = {
			base = 100
		}
	}
}

# #Greçë Memorandum
# country_event = {
# 	id = ww1_albania.18
# 	title = ww1_albania.18.t
# 	desc = ww1_albania.18.d
# 	picture = GFX_report_event_gerece_memorendum
# 	fire_only_once = yes
# 	mean_time_to_happen = {
# 		days = 10
# 	}
# 	trigger = {
# 		tag = TUR
# 		controls_state = 848
# 		controls_state = 870
# 		NOT = {
# 			country_exists = ALB
# 		}
# 		has_global_flag = ALB_revolt_of_1911
# 		date > 1911.10.23
# 		any_state = {
# 			is_core_of = ALB
# 			has_dynamic_modifier = { modifier = TUR_albanian_minority }
# 		}
# 	}
# 	option = {
# 		name = ww1_albania.18.a
# 		set_country_flag = TUR_ratify_grece_memorendum
# 		add_political_power = -50
# #		puppet = ALB
# #		release_puppet = ALB
# #		if = {
# #			limit = {
# #				NOT = {
# #					has_government = communism
# #				}
# #			}
# #			TUR_ahmet_izzet = { set_nationality = ALB }
# #			hidden_effect = {
# #				ALB = {
# #					TUR_ahmet_izzet = {
# #						set_character_name = TUR_ahmet_izzet
# #						add_country_leader_role = {
# #							Promote_leader = yes
# #							Country_leader = {
# #								ideology = absolute_monarchy
# #								traits = { ottoman_prince }
# #							}
# #						}
# #					}
# #					set_cosmetic_tag = ALB_sultanate
# #					set_politics={
# #						ruling_party = neutrality
# #						elections_allowed = no 
# #						long_name = ALB_neutrality_sultan_party
# #						name = ALB_neutrality_sultan_party
# #					}	
# #					set_popularities = {
# #						democratic = 40
# #						neutrality = 60
# #					}				
# #				}	
# #			}
# #		}
# #		44 = {
# #			add_extra_state_shared_building_slots = 1
# #			add_building_construction = {
# #				type = arms_factory
# #				level = 1
# #				instant_build = yes
# #			}
# #		}
# #		871 = {
# #			add_extra_state_shared_building_slots = 1
# #			add_building_construction = {
# #				type = industrial_complex
# #				level = 1
# #				instant_build = yes
# #			}
# #		}
# 		every_state = {
# 			limit = {
# 				is_core_of = ALB
# 			}
# 			clr_state_flag = TUR_albanian_state
# 			if = {
# 				limit = {
# 					is_controlled_by = TUR
# 				}
# 				remove_dynamic_modifier = { modifier = TUR_albanian_minority }
# 				add_dynamic_modifier = { modifier = TUR_autonomous_vilayet }
# 				set_state_flag = TUR_autonomous_vilayet
# 			}
# 			if = {
# 				limit = {
# 					NOT = {
# 						is_controlled_by = TUR
# 					}
# 				}
# 				clr_state_flag = TUR_albanian_state_no_control
# 				set_state_flag = TUR_autonomous_vilayet_no_control
# 				set_state_flag = TUR_autonomous_vilayet
# 			}
# 		}
# 		custom_effect_tooltip = ww1_albania.18.tt
# 		hidden_effect = {
# 			set_country_flag = TUR_appeased_albanians
# 			ottoman_minority_variable_check = yes
# 		}
# 		ai_chance = {
# 			base = 0
# 			modifier = {
# 				add = 1000
# 				has_game_rule = {
# 					rule = TUR_ai_behavior 
# 					option = TUR_HURRIYET_VE_ITILAF
# 				}
# 			}
# 		}
# 	}
# 	option = {
# 		name = ww1_albania.18.b
# 		add_stability = -0.05
# 		870 = {
# 			add_resistance = 10
# 		}
# 		871 = {
# 			add_resistance = 5
# 		}
# 		803 = {
# 			add_resistance = 5
# 		}
# 		ai_chance = {
# 			base = 0
# 			modifier = {
# 				add = 1000
# 				is_historical_focus_on = yes
# 			}
# 		}
# 	}
# }
# Italy takes Vlore 
country_event = {
	title = ww1_albania.19.t
	desc = ww1_albania.19.d
	id = ww1_albania.19
	fire_only_once = yes
	picture = GFX_report_event_gre_italian_troops
	is_triggered_only = yes
	option = {
		name = ww1_albania.19.a
		trigger = {
			original_tag = ALB
		}
		add_opinion_modifier = {
			target = FROM
			modifier = HOI4TGW_Opinion_diplomats_malus
		}
		ITA = {
			transfer_state = 871
		}
		hidden_effect = {
			ITA = {
				country_event = {
					id = ww1_albania.19
				}
			}
		}
	}
	option = {
		name = ww1_albania.19.b
		trigger = {
			original_tag = ITA
		}
		add_named_threat = {
			threat = 3
			name = ww1_albania.19.t
		}
	}
}

# Italy withdraw from Vlore 
country_event = {
	title = ww1_albania.20.t
	desc = ww1_albania.20.d
	id = ww1_albania.20
	picture = GFX_report_event_gre_italian_troops
	is_triggered_only = yes
	option = {
		name = ww1_albania.20.a
		add_political_power = -25
		every_owned_state = {
			limit = {
				is_core_of = ALB
			}
			transfer_state_to = ALB
		}
		if = {
			limit = {
				870 = { has_contested_owner = ALB }
			}
			ALB = { transfer_state = 870 }
		}
	}
}

# Albania offers to install Italian monarch
country_event = {
	id = ww1_albania.21
	title = ww1_albania.21.t
	desc = ww1_albania.21.d
	fire_only_once = yes
	picture = GFX_report_event_gre_italian_troops
	trigger = {
		original_tag = ITA
		OR = {
			owns_state = 871
			owns_state = 44
			owns_state = 1214
			owns_state = 1215
		}
		OR = {
			has_active_mission = versallies_conference
			has_active_mission = frankfurt_conference
		}
		ALB = {
			is_subject = no
			NOT = {
				has_country_flag = great_war_loser
			}
		}
		NOT = {
			has_country_flag = great_war_loser
			has_war_with = ALB
		}
	}
	mean_time_to_happen = {
		days = 30
	}
	option = {
		name = ww1_albania.21.a
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				has_game_rule = {
					rule = fate_of_albania
					option = FATE_OF_ALBANIA_VITTORIO_OPTION
				}
			}
		}
		set_global_flag = valona_war
		ALB = {
			add_opinion_modifier = {
				target = ROOT
				modifier = hostile_status
			}
		}
		every_owned_state = {
			limit = {
				is_core_of = ALB
			}
			add_resistance = 30
			if = {
				limit = {
					NOT = {
						state = 871
					}
				}
				set_demilitarized_zone = yes
			}
		}
	}
	option = {
		name = ww1_albania.21.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				add = 1000
				has_game_rule = {
					rule = fate_of_albania
					option = FATE_OF_ALBANIA_VITTORIO_OPTION
				}
			}
		}
		add_named_threat = {
			threat = 2
			name = conquest_of_albania
		}
		add_political_power = -100
		every_owned_state = {
			limit = {
				is_core_of = ALB
			}
			transfer_state_to = ALB
		}
		effect_tooltip = {
			set_autonomy = {
				target = ALB
				autonomy_state = autonomy_dominion
			}
		}
		hidden_effect = {
			ALB = {
				get_current_government_type = yes
				ROOT = {
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_dominion
					}
				}
				if = {
					limit = {
						ROOT = {
							OR = {
								has_idea = victor_emmanuel
								has_idea = victor_emmanuel_ww1
								has_idea = umberto_ii
								has_country_leader_ideology = semi_constitutional_monarchy
							}
						}
					}
					set_cosmetic_tag = ALB_kingdom
					set_politics = {
						ruling_party = neutrality
						elections_allowed = yes
						long_name = ALB_neutrality_savoy_party
						name = ALB_neutrality_savoy_party
					}
					ROOT = {
						ITA_vittorio_emanuele_di_savoy_aosta = {
							set_nationality = ALB
							set_character_name = ALB_vittorio_emanuele
							if = {
								limit = {
									has_ideology = semi_constitutional_monarchy
								}
								promote_character = semi_constitutional_monarchy							
							}
							else = {
								add_country_leader_role = {
									promote_leader = yes
									country_leader = {
										ideology = semi_constitutional_monarchy
										traits = {
											foreign_leader
										}
									}
								}
							}
						}
					}
				}
				else = {
					restore_previous_government_type = yes
				}
				if = {
					limit = {
						ROOT = {
							has_government = communism
						}
					}
					set_politics = {
						ruling_party = communism
						elections_allowed = no
					}
					add_popularity = {
						ideology = communism
						popularity = 0.5
					}
				}
			}
		}
	}
}

# event removed
# id = ww1_albania.22
# Autonomous Republic of Northern Epirus
# country_event = {
# 	id = ww1_albania.23
# 	title = ww1_albania.23.t
# 	desc = ww1_albania.23.d
# 	picture = GFX_report_event_generic_peaceful_annexation
# 	trigger = {
# 		tag = ALB
# 		is_subject = no
# 		has_war = no
# 		803 = {
# 			is_owned_and_controlled_by = ROOT
# 			has_dynamic_modifier = {
# 				modifier = ALB_greek_minority
# 			}
# 		}
# 		NOT = {
# 			has_global_flag = great_war
# 			has_government = communism
# 			has_government = fascism
# 		}
# 	}
# 	mean_time_to_happen = { days = 70 }
# 	fire_only_once = yes
# 	option = {
# 		name = ww1_albania.23.a
# 		803 = {
# 			set_demilitarized_zone = no
# 			add_core_of = EPR
# 			transfer_state_to = EPR
# 		}
# 		puppet = EPR
# 		hidden_effect = {
# 			GRE = { give_guarantee = EPR }
# 			EPR = {
# 				set_politics = {
# 					ruling_party = democratic
# 					elections_allowed = no
# 				}
# 				set_popularities = {
# 					fascism = 10
# 					communism = 3
# 					democratic = 60
# 					neutrality = 27
# 				}
# 			}
# 		}
# 	}
# }
# # Greece Lost Northern Epirus to Albanian Nation
# country_event = {
# 	id = ww1_albania.24
# 	title = ww1_albania.24.t
# 	desc = ww1_albania.24.d
# 	picture = GFX_report_event_generic_conference
# 	trigger = {
# 		original_tag = GRE
# 		has_global_flag = interbellum
# 		has_global_flag = interwar_greco_turkish_war
# 		owns_state = 803
# 		has_war = no
# 		all_owned_state = {
# 			NOT = { region = 129 }
# 		}
# 		NOT = {
# 			owns_state = 871
# 		}
# 	}
# 	mean_time_to_happen = {
# 		days = 70
# 	}
# 	fire_only_once = yes
# 	option = {
# 		name = ww1_albania.24.a
# 		random_other_country = {
# 			limit = {
# 				owns_state = 871
# 			}
# 			transfer_state = 803
# 		}
# 	}
# }
# The ICC form in vlore
country_event = {
	id = ww1_albania.25
	title = ww1_albania.25.t
	desc = ww1_albania.25.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_albania.25.a
		add_stability = 0.15
		871 = {
			add_dynamic_modifier = {
				modifier = ALB_ICC_support
			}
		}
	}
}

# Essad Toptani set up a rival governement 
country_event = {
	id = ww1_albania.26
	title = ww1_albania.26.t
	desc = ww1_albania.26.d
	picture = GFX_report_event_generic_peaceful_annexation
	trigger = {
		tag = ALB
		is_subject = no
		has_war = no
		owns_state = 44
		owns_state = 871 #two states needed for civil war
		date > 1913.10.12
		has_start_date < 1914.1.1
		has_country_leader = {
			character = ALB_ismail_qemali
		}
		NOT = {
			has_country_flag = toptani_coup_1913
		}
	}
	immediate = {
		set_country_flag = toptani_coup_1913
		hidden_effect = {
			ALB_essad_pasha_toptani = {
				promote_character = warlordism
				promote_character = stratocracy
			}
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.26.a
		44 = {
			add_dynamic_modifier = {
				modifier = ALB_rural_chaos
			}
		}
		start_civil_war = {
			ideology = neutrality
			size = 0
			transfer_state = 44
			set_cosmetic_tag = ALB_central
			load_focus_tree = empty_focus
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			keep_political_party_members = yes
			ALB = {
				ALB_essad_pasha_toptani = {
					set_nationality = PREV.PREV
					promote_character = warlordism
					promote_character = stratocracy
				}
			}
			add_ideas = standing_alone
			set_popularities = {
				democratic = 43
				communism = 2
				fascism = 25
				neutrality = 30
			}
			if = {
				limit = {
					EPR = {
						has_war_with = ALB
					}
				}
				declare_war_on = {
					target = EPR
					type = annex_everything
				}
			}
			transfer_units_fraction = {
				target = ALB
				size = 1
				target_organization = 1
				source_organization = 1
				stockpile_ratio = 1
				army_ratio = 1
				navy_ratio = 1
				air_ratio = 1
				keep_unit_leaders_trigger = {
					always = yes
				}
			}
			division_template = {
				name = "Milicitë Shqiptare mini"
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
				}
			}
			44 = {
				create_unit = {
					division = "division_template = \"Milicitë Shqiptare mini\" start_experience_factor = 0.1"
					owner = PREV
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11762
				}
			}
		}
	}
	option = {
		name = ww1_albania.26.b
		trigger = {
			is_ai = no
		}	
		44 = {
			add_dynamic_modifier = {
				modifier = ALB_rural_chaos
			}
		}
		start_civil_war = {
			ideology = neutrality
			size = 0
			transfer_state = 44
			set_cosmetic_tag = ALB_central
			load_focus_tree = empty_focus
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			keep_political_party_members  = yes
			add_ideas = standing_alone
			set_popularities = {
				democratic = 43
				communism = 2
				fascism = 25
				neutrality = 30
			}
			if = {
				limit = {
					EPR = {
						has_war_with = ALB
					}
				}
				declare_war_on = {
					target = EPR
					type = annex_everything
				}
			}
			transfer_units_fraction = {
				target = ALB
				size = 1
				target_organization = 1
				source_organization = 1
				stockpile_ratio = 1
				army_ratio = 1
				navy_ratio = 1
				air_ratio = 1
				keep_unit_leaders_trigger = {
					always = yes
				}
			}
			division_template = {
				name = "Milicitë Shqiptare mini"
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
				}
			}
			44 = {
				create_unit = {
					division = "division_template = \"Milicitë Shqiptare mini\" start_experience_factor = 0.1"
					owner = PREV
					allow_spawning_on_enemy_provs = yes
					prioritize_location = 11762
				}
			}
			change_tag_from = ALB
		}
	}
}

# internation dutch gendarmerie is disolved because of great war
country_event = {
	id = ww1_albania.27
	title = ww1_albania.27.t
	desc = ww1_albania.27.d
	picture = GFX_report_event_generic_peaceful_annexation
	trigger = {
		tag = ALB
		has_template = "Dutch Gendarmerie"
		any_other_country = {
			is_major = yes
			OR = {
				has_war_with = ENG
				has_war_with = FRA
				has_war_with = GER
				has_war_with = RUS
				has_war_with = AUS
				has_war_with = ITA
			}
		}
		NOT = {
			has_country_flag = ALB_dutch_gendarmerie_dissolved
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_albania.27.a
		set_country_flag = ALB_dutch_gendarmerie_dissolved
		delete_unit_template_and_units = {
			division_template = "Dutch Gendarmerie"
		}
	}
}

#Albanian War for Independence
country_event = {
	title = ww1_albania.7.t
	desc = ww1_albania.7.d
	id = ww1_albania.28
	picture = GFX_report_event_spr_civil_war_faction_defeated
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_albania.28.a
		set_global_flag = ALB_BW1_rebellion
		set_autonomy = {
			target = ALB
			autonomous_state = autonomy_free
		}
	}
}

#Albanian is asking support for civil war
country_event = {
	title = ww1_albania.29.t
	desc = ww1_albania.29.d
	id = ww1_albania.29
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		#yes
		name = ww1_albania.29.a
		FROM = {
			country_event = {
				id = ww1_albania.30
				days = 2
			}
		}
		unlock_decision_category_tooltip = TUR_albanian_plot
		set_country_flag = TUR_albanian_plot_accepted
		ai_chance = {
			factor = 100
		}
	}
	option = {
		#no
		name = ww1_albania.29.b
		FROM = {
			country_event = {
				id = ww1_albania.31
				days = 2
			}
		}
		add_political_power = -50
		ai_chance = {
			factor = 1
		}
	}
}

#ottoman support coup
country_event = {
	title = ww1_albania.30.t
	desc = ww1_albania.30.d
	id = ww1_albania.30
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_albania.30.a
		add_political_power = 75
		unlock_decision_category_tooltip = TUR_albanian_plot
		set_country_flag = TUR_albanian_plot_accepted
		add_to_variable = {
			ALB_coup_detat = 0
		}
	}
}

#ottoman refused support
country_event = {
	title = ww1_albania.31.t
	desc = ww1_albania.31.d
	id = ww1_albania.31
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_albania.31.a
	}
}

#izzet coup succeed (ahistorical)
country_event = {
	title = ww1_albania.32.t
	desc = ww1_albania.32.d
	id = ww1_albania.32
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_albania.32.a
		if = {
			limit = {
				tag = ALB
			}
			set_politics = {
				ruling_party = neutrality
				long_name = ALB_neutrality_sultan_party
				name = ALB_neutrality_sultan_party
				elections_allowed = no
			}
			get_current_government_type = yes
			TUR = {
				set_autonomy = {
					target = ALB
					autonomous_state = autonomy_tgwr_ottoman_emirate
				}
			}
			restore_previous_government_type = yes
			TUR_ahmet_izzet = {
				add_country_leader_role = {
					promote_leader = yes
						country_leader = {
							ideology = semi_constitutional_monarchy
							traits = { ottoman_prince }
					}
				}
			}
			else = {
				effect_tooltip = {
					ALB = {
						set_politics = {
							ruling_party = neutrality
							long_name = ALB_neutrality_sultan_party
							name = ALB_neutrality_sultan_party
							elections_allowed = no
						}
						get_current_government_type = yes
						TUR = {
							set_autonomy = {
								target = ALB
								autonomous_state = autonomy_tgwr_ottoman_emirate
							}
						}
						restore_previous_government_type = yes
					}
				}
			}
		}
	}
}

#izzet coup failed
country_event = {
	title = ww1_albania.33.t
	desc = ww1_albania.33.d
	id = ww1_albania.33
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_albania.33.a
	}
}

#serbia uncover the plot
country_event = {
	title = ww1_albania.34.t
	desc = ww1_albania.34.d
	id = ww1_albania.34
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	trigger = {
		ALB = {
			has_country_flag = TUR_albanian_plot_accepted
		}
		SER = {
			NOT = {
				is_in_faction_with = TUR
				is_subject_of = TUR
			}
			has_intelligence_agency = yes
		}
		NOT = {
			has_country_flag = TUR_albanian_plot_uncovered
		}
	}
	mean_time_to_happen = {
		days = 38
	}
	option = {
		name = ww1_albania.34.a
		add_political_power = 25
		set_country_flag = TUR_albanian_plot_uncovered
		ALB = {
			country_event = {
				id = ww1_albania.35
				days = 2
			}
		}
		hidden_effect = {
			TUR = {
				country_event = {
					id = ww1_albania.35
					days = 2
				}
			}
		}
	}
}

#serbia discovered our plot ! 
country_event = {
	title = ww1_albania.35.t
	desc = ww1_albania.35.d
	id = ww1_albania.35
	picture = GFX_report_event_military_planning
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_albania.35.a
		if = {
			limit = {
				tag = ALB
			}
			subtract_from_variable = {
				ALB_coup_detat = 25
			}
		}
		custom_effect_tooltip = TUR_albanian_plot_malus_25_percents
	}
}

#invest in albania ?
country_event = {
	title = ww1_albania.36.t
	desc = ww1_albania.36.d
	id = ww1_albania.36
	picture = GFX_report_event_military_planning
	fire_only_once = no
	is_triggered_only = yes
	option = {
		name = ww1_albania.36.a
		add_political_power = 25
		effect_tooltip = {
			ALB = {
				capital_scope = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
		ALB = {
			country_event = {
				id = ww1_albania.37
				days = 2
			}
		}
		ai_chance = {
			factor = 500
		}
	}
	option = {
		name = ww1_albania.36.b
		ALB = {
			add_opinion_modifier = {
				target = ROOT
				modifier = small_decrease
			}
			ALB = {
				country_event = {
					id = ww1_albania.38
					days = 2
				}
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

#FROM accepted
country_event = {
	title = ww1_albania.36.t
	desc = ww1_albania.37.d
	id = ww1_albania.37
	picture = GFX_report_event_military_planning
	fire_only_once = no
	is_triggered_only = yes
	option = {
		name = ww1_albania.37.a
		ALB = {
			capital_scope = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
				}
			}
		}
	}
}

#FROM refused
country_event = {
	title = ww1_albania.36.t
	desc = ww1_albania.38.d
	id = ww1_albania.38
	picture = GFX_report_event_military_planning
	fire_only_once = no
	is_triggered_only = yes
	option = {
		name = ww1_albania.38.a
	}
}

#protocol of corfu
country_event = {
	title = ww1_albania.39.t
	desc = ww1_albania.39.d
	id = ww1_albania.39
	picture = GFX_report_event_military_planning
	fire_only_once = no
	is_triggered_only = yes
	option = {
		name = ww1_albania.39.a
		effect_tooltip = {
			ALB = {
				puppet = {
					target = EPR
					end_wars = yes
					end_civil_wars = yes
				}
			}
			GRE = { give_guarantee = EPR }
		}
		hidden_effect = {
			if = {
				limit = {
					tag = ALB
				}
				EPR = {
					get_current_government_type = yes
					ALB = {
						puppet = {
							target = EPR
							end_wars = yes
							end_civil_wars = yes
						}
					}	
					restore_previous_government_type = yes
				}
			}
			else_if = {
				limit = {
					tag = GRE
				}
				give_guarantee = EPR
			}
		}
	}
}
