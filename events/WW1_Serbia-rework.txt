add_namespace = ww1_serbia
add_namespace = serbia_rework

#for austria hungary: trouble in lemberg
country_event = {
	id = ww1_serbia.114
	title = ww1_serbia.114.t
	desc = ww1_serbia.114.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	timeout_days = 5
	option = {
		#send the police ! 
		name = ww1_serbia.114.a
		add_stability = -0.05
	}
	option = {
		#better have to send the army ! 
		name = ww1_serbia.114.b
		add_political_power = -100
		every_owned_state = {
			limit = {
				is_core_of = GAL
			}
			add_resistance = -10
		}
	}
}

#terrorist bombing in vienna
country_event = {
	id = ww1_serbia.115
	title = ww1_serbia.115.t
	desc = ww1_serbia.115.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	timeout_days = 5
	option = {
		#bomb
		name = ww1_serbia.115.a
		add_political_power = -50
		AUS = {
			country_event = {
				id = ww1_serbia.116
				hours = 5
			}
		}
	}
}

#Franz Joseph has been killed by the bomb !
country_event = {
	id = ww1_serbia.116
	title = ww1_serbia.116.t
	desc = ww1_serbia.116.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	timeout_days = 5
	immediate = {
		hidden_effect = {
			AUH_retire_franz_joseph_i = yes
			set_global_flag = AUH_franz_joseph_killed
			retire_character = AUH_franz_joseph_i
		}		
	}	
	option = {
		#bomb
		name = ww1_serbia.116.a
		news_event = ww1_serbia.117
		effect_tooltip = {
			retire_character = AUH_franz_joseph_i
			if = {
				limit = {
					has_country_leader = {
						character = AUH_franz_ferdinand
					}
				}
				promote_character = AUH_franz_ferdinand
				else_if = {
					limit = { 
						has_country_leader = {
							character = AUH_karl_i
						}	
					}
					promote_character = AUH_karl_i
				}	
			}
		}
		hidden_effect = {
			country_event = {
				id = ww1_serbia.118
				days = 7
			}
		}
		
	}
}

##franz joseph is killed
news_event = {
	id = ww1_serbia.117
	title = ww1_serbia.117.t
	desc = ww1_serbia.117.d
	picture = ww1_franzferdinand_1
	major = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			SER = {
				add_named_threat = {
					threat = 5
					name = ww1_serbia.117.t
				}
			}
		}
	}
	option = {
		name = ww1_serbia.117.a
		trigger = {
			NOT = {
				tag = AUS
				tag = SER
			}
		}
	}
	option = {
		name = ww1_serbia.117.b
		trigger = {
			tag = AUS
		}
	}
	option = {
		name = ww1_serbia.117.c
		trigger = {
			tag = SER
		}
	}
}

#Galician rebellion
country_event = {
	id = ww1_serbia.118
	title = ww1_serbia.118.t
	desc = ww1_serbia.118.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	timeout_days = 5
	option = {
		name = ww1_serbia.118.a
		91 = {
			transfer_state_to = GAL
		}
		562 = {
			transfer_state_to = GAL
		}
		89 = {
			transfer_state_to = GAL
		}
		add_ai_strategy = {
			type = prepare_for_war
			id = GAL
			value = 50
		}
		GAL = {
			division_template = {
				name = "Narodna bryhada"
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 0
						y = 2
					}
				}
			}
			hidden_effect = {
				91 = {
					create_unit = {
						division = "name = \"1. Narodna bryhada\" division_template = \"Narodna bryhada\" start_experience_factor = 0.2 start_equipment_factor = 0.5"
						owner = GAL
					}
					create_unit = {
						division = "name = \"2. Narodna bryhada\" division_template = \"Narodna bryhada\" start_experience_factor = 0.2 start_equipment_factor = 0.5"
						owner = GAL
					}
					create_unit = {
						division = "name = \"3. Narodna bryhada\" division_template = \"Narodna bryhada\" start_experience_factor = 0.1 start_equipment_factor = 0.5"
						owner = GAL
					}
					create_unit = {
						division = "name = \"2. Narodna bryhada\" division_template = \"Narodna bryhada\" start_experience_factor = 0.2 start_equipment_factor = 0.5"
						owner = GAL
					}
					create_unit = {
						division = "name = \"3. Narodna bryhada\" division_template = \"Narodna bryhada\" start_experience_factor = 0.1 start_equipment_factor = 0.5"
						owner = GAL
					}
				}
				GAL = {
					add_offsite_building = {
						type = arms_factory
						level = 2
					}
				}
			}
			hidden_effect = {
				RUS = {
					country_event = {
						id = ww1_serbia.119
						days = 3
					}
				}
				SER = {
					country_event = {
						id = ww1_serbia.119
						days = 5
					}
				}
				ROM = {
					country_event = {
						id = ww1_serbia.119
						days = 6
					}
				}
				AUS = {
					country_event = {
						id = ww1_serbia.120
						days = 8
					}
				}
			}
		}
	}
}

#Galician in now free : Romanian, russian and serbian events
country_event = {
	id = ww1_serbia.119
	title = ww1_serbia.119.t
	desc = ww1_serbia.119.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	timeout_days = 5
	option = {
		name = ww1_serbia.119.a
		give_guarantee = GAL
		if = {
			limit = {
				tag = RUS
			}
			news_event = ww1_franzferdinand.101
		}
	}
	option = {
		name = ww1_serbia.119.b
	}
}

#AUS : what should we do about galicia ?!
country_event = {
	id = ww1_serbia.120
	title = ww1_serbia.120.t
	desc = ww1_serbia.120.d
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes
	timeout_days = 5
	option = {
		name = ww1_serbia.120.a
		# destroy ! 
		leave_faction = yes
		declare_war_on = {
			target = GAL
			type = annex_everything
		}
		news_event = ww1_serbia.124
		add_timed_idea = {
			idea = AUH_supply_optimization
			days = 30
		}
		add_ideas = Austrian_staff
		ai_chance = {
			base = 80
		}
	}
	option = {
		name = ww1_serbia.120.b
		add_political_power = -200
		add_days_mission_timeout = {
			mission = european_crisis_mission2
			days = 30
		}
		GER = {
			country_event = {
				id = ww1_serbia.121
				days = 7
			}
		}
		ai_chance = {
			base = 40
		}
	}
}

#GER : AUS is asking for support
country_event = {
	id = ww1_serbia.121
	title = ww1_serbia.121.t
	desc = ww1_serbia.121.d
	picture = GFX_report_event_german_volunteers
	is_triggered_only = yes
	timeout_days = 5
	option = {
		name = ww1_serbia.121.a
		AUS = {
			country_event = {
				id = ww1_serbia.122
				days = 4
			}
		}
		ai_chance = {
			base = 80
		}
		#of course lets go !
	}
	option = {
		name = ww1_serbia.121.b
		## this is shit, hell no
		AUS = {
			country_event = {
				id = ww1_serbia.123
				days = 4
			}
		}
		effect_tooltip = {
			AUS = {
				leave_faction = yes
			}
		}
		ai_chance = {
			base = 20
		}
	}
}

#AUS : GER accepted
country_event = {
	id = ww1_serbia.122
	title = ww1_serbia.122.t
	desc = ww1_serbia.122.d
	picture = GFX_report_event_german_volunteers
	is_triggered_only = yes
	timeout_days = 5
	option = {
		name = ww1_serbia.122.a
		#of course lets go !
		declare_war_on = {
			target = GAL
			type = annex_everything
		}
	}
}

#AUS : GER dont want to get involved !
country_event = {
	id = ww1_serbia.123
	title = ww1_serbia.123.t
	desc = ww1_serbia.123.d
	picture = GFX_report_event_german_volunteers
	is_triggered_only = yes
	timeout_days = 5
	option = {
		name = ww1_serbia.122.a
		#of course lets go !
		AUS = {
			leave_faction = yes
		}
	}
}

### AUS fast planned attack ! 
news_event = {
	id = ww1_serbia.124
	title = ww1_serbia.124.t
	desc = ww1_serbia.124.d
	picture = GFX_news_event_047
	major = yes
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_franzferdinand.1.a
		ai_chance = {
			base = 100
		}
	}
}

### Selecting the king of serbia : Aleksandar I, Aleksandar I Karađorđević 
unit_leader_event = {
	id = ww1_serbia.125
	title = ww1_serbia.125.t
	desc = ww1_serbia.125.d
	picture = GFX_report_event_SER_alexander_i
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_serbia.125.a
		ai_chance = {
			base = 100
		}
		retire_character = SER_petar_i
		promote_character = SER_aleksandar_karadjordjevic
		remove_ideas = SER_idea_petar_i
		hidden_effect = {
			remove_ideas = SER_idea_petar_i
			remove_ideas = SER_idea_petar_i2
		}
		add_ideas = SER_idea_alexander_i
		complete_national_focus = SER_the_regency_question
		set_country_flag = SER_alexander_regency
		clr_country_flag = SER_george_regency
		clr_country_flag = SER_helen_regency
		hidden_effect = {
			#collapse focus tree
			mark_focus_tree_layout_dirty = yes
		}
	}
	option = {
		name = ww1_serbia.125.b
		hidden_effect = {
			SER_dorde_karadjordjevic = {
				unit_leader_event = {
					id = ww1_serbia.126
					days = 14
				}
			}
		}
	}
}

### Selecting the king of serbia : Đorđe Karađorđević, George, Crown Prince of Serbia
unit_leader_event = {
	id = ww1_serbia.126
	title = ww1_serbia.126.t
	desc = ww1_serbia.126.d
	picture = GFX_report_event_SER_djordje_karadjordjevic
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = ww1_serbia.126.a
		ai_chance = {
			base = 100
		}
		retire_character = SER_petar_i
		promote_character = SER_dorde_karadjordjevic
		remove_ideas = SER_idea_petar_i
		hidden_effect = {
			remove_ideas = SER_idea_petar_i
			remove_ideas = SER_idea_petar_i2
		}
		add_ideas = SER_idea_Dorde_karadjordjevic
		set_country_flag = SER_george_regency
		clr_country_flag = SER_alexander_regency
		clr_country_flag = SER_helen_regency
		complete_national_focus = SER_the_regency_question
		hidden_effect = {
			#collapse focus tree
			mark_focus_tree_layout_dirty = yes
		}
	}
	option = {
		name = ww1_serbia.126.b
		hidden_effect = {
			if = {
				limit = {
					SER = {
						has_character = SER_jelena_karadjordjevic
					}
				}
				SER_jelena_karadjordjevic = {
					unit_leader_event = {
						id = ww1_serbia.127
						days = 14
					}
				}
				else = {
					SER_aleksandar_karadjordjevic = {
						unit_leader_event = {
							id = ww1_serbia.125
							days = 14
						}
					}
				}
			}
		}
	}
}

### Selecting the king of serbia : Princess Helen of Serbia, Princess Jelena Karađorđević
unit_leader_event = {
	id = ww1_serbia.127
	title = ww1_serbia.127.t
	desc = ww1_serbia.127.d
	picture = GFX_report_event_SER_Jelena_karadjordjevi
	is_triggered_only = yes
	trigger = {
		has_character = SER_jelena_karadjordjevic
	}
	fire_only_once = yes
	option = {
		name = ww1_serbia.127.a
		ai_chance = {
			base = 100
		}
		retire_character = SER_petar_i
		promote_character = SER_jelena_karadjordjevic
		remove_ideas = SER_idea_petar_i
		hidden_effect = {
			remove_ideas = SER_idea_petar_i
			remove_ideas = SER_idea_petar_i2
		}
		add_ideas = SER_idea_Jelena_karadjordjevic
		set_country_flag = SER_helen_regency
		clr_country_flag = SER_george_regency
		clr_country_flag = SER_alexander_regency
		complete_national_focus = SER_the_regency_question
		hidden_effect = {
			#collapse focus tree
			mark_focus_tree_layout_dirty = yes
		}
	}
	option = {
		name = ww1_serbia.127.b
		hidden_effect = {
			SER_aleksandar_karadjordjevic = {
				unit_leader_event = {
					id = ww1_serbia.125
					days = 14
				}
			}
		}
	}
}

### 
country_event = {
	id = ww1_serbia.128
	title = ww1_serbia.128.t
	desc = ww1_serbia.128.d
	picture = GFX_report_event_SER_royal_wedding
	trigger = {
		tag = SER
		has_character = SER_jelena_karadjordjevic
		date > 1911.8.8
		has_start_date < 1914.1.1	
		NOT = {
			has_country_flag = SER_jelena_wedding
		}
	}
	mean_time_to_happen = {
		days = 0
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SER_jelena_wedding
		}
	}
	option = {
		name = ww1_serbia.128.a
		ai_chance = {
			base = 100
		}
		retire_character = SER_jelena_karadjordjevic
		add_opinion_modifier = {
			target = RUS
			modifier = HOI4TGW_Opinion_diplomats_bonus
		}
	}
	option = {
		name = ww1_serbia.128.b
	}
}

### terrorists from white hand are fighting pro black hand serbia
### 
country_event = {
	id = ww1_serbia.129
	title = ww1_serbia.129.t
	desc = ww1_serbia.129.d
	picture = GFX_report_event_generic_destroyed_vehicles
	is_triggered_only = yes
	immediate = {
	}
	option = {
		name = ww1_serbia.129.a
		ai_chance = {
			base = 100
		}
		set_country_flag = SER_first_white_hand_attack
		add_stability = -0.05
	}
}

### white hand kill random general
# country_event = {
# 	id = ww1_serbia.130
# 	title = ww1_serbia.130.t
# 	desc = ww1_serbia.130.d
# 	picture = GFX_report_event_generic_destroyed_vehicles
# 	trigger = {
# 		has_country_flag = SER_first_white_hand_attack
# 		NOT = {
# 			has_country_flag = SER_white_hand_stopped
# 		}
# 	}
# 	mean_time_to_happen = {
# 		days = 5
# 	}
# 	option = {
# 		name = ww1_serbia.130.a
# 		ai_chance = {
# 			factor = 100
# 		}
# 		set_country_flag = SER_second_white_hand_attack
# 		random_army_leader = {
# 			limit = {
# 				NOT = {
# 					is_character = SER_petar_i
# 				}
# 				NOT = {
# 					is_character = SER_petar_zivkovic
# 				}
# 				NOT = {
# 					is_character = SER_pavle_jurisic_sturm
# 				}
# 				NOT = {
# 					is_character = SER_aleksandar_karadjordjevic
# 				}
# 				is_country_leader = no
# 				is_unit_leader = yes
# 				is_field_marshal = no
# 				is_corps_commander = yes
# 			}
# 			retire = yes
# 		}
# 	}
# }
### serbia is asking bosnia and croatia ! 
country_event = {
	id = ww1_serbia.131
	title = ww1_serbia.131.t
	desc = ww1_serbia.131.d
	picture = GFX_report_event_generic_destroyed_vehicles
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_serbia.131.a		#lol no
		SER = {
			country_event = {
				id = ww1_serbia.134
				days = 2
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				SER = {
					## theses idiots are already at war
					has_war = yes
				}
				add = 100
			}
			modifier = {
				is_puppet = yes				## never got scared by a puppet
				add = 100
			}
		}
	}
	option = {
		name = ww1_serbia.131.b		#make compromise and surrender banat
		SER = {
			country_event = {
				id = ww1_serbia.132
				days = 2
			}
		}
		effect_tooltip = {
			SER = {
				transfer_state = 764
				transfer_state = 45
				transfer_state = 575
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				surrender_progress > 0.3
				add = 100
			}
			modifier = {
				surrender_progress > 0.6
				add = 100
			}
			modifier = {
				surrender_progress > 0.9
				add = 100
			}
			modifier = {
				has_war_with = GER				## its not italy or ottoman, its real shit for us
				add = 100
			}
		}
	}
	option = {
		name = ww1_serbia.131.c		#very complex situation we have no choices
		country_event = {
			id = ww1_serbia.133
			days = 2
		}
		effect_tooltip = {
			SER = {
				transfer_state = 764
				transfer_state = 45
				transfer_state = 575
			}
			every_state = {
				limit = {
					is_core_of = BOS
				}
				transfer_state_to = SER
			}
			every_state = {
				limit = {
					is_core_of = CRO
				}
				transfer_state_to = SER
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				surrender_progress > 0.3
				add = 50
			}
			modifier = {
				surrender_progress > 0.6
				add = 50
			}
			modifier = {
				surrender_progress > 0.9
				add = 50
			}
			modifier = {
				has_war_with = GER				## its not italy or ottoman, its real shit for us
				add = 50
			}
		}
	}
}

### AUS give us banat and thats all
country_event = {
	id = ww1_serbia.132
	title = ww1_serbia.132.t
	desc = ww1_serbia.132.d
	picture = GFX_report_event_generic_destroyed_vehicles
	is_triggered_only = yes
	option = {
		name = ww1_serbia.132.a		#cool anyway
		ai_chance = {
			base = 100
		}
		effect_tooltip = {
			transfer_state = 764
			transfer_state = 45
			transfer_state = 575
		}
	}
	option = {
		name = ww1_serbia.132.b		#we refuse ! its war then !
		ai_chance = {
			base = 50
			modifier = {
				AUS = {
					surrender_progress > 0.3
				}
				add = 100
			}
			modifier = {
				AUS = {
					surrender_progress > 0.6
				}
				add = 100
			}
			modifier = {
				AUS = {
					surrender_progress > 0.9
				}
				add = 100
			}
		}
		add_war_support = -0.1
		create_wargoal = {
			target = AUS
			type = take_core_state
		}
		country_event = {
			id = ww1_serbia.135
			days = 2
		}
	}
}

### AUS give all !
country_event = {
	id = ww1_serbia.133
	title = ww1_serbia.133.t
	desc = ww1_serbia.133.d
	picture = GFX_report_event_generic_destroyed_vehicles
	is_triggered_only = yes
	option = {
		name = ww1_serbia.133.a		#cool!!!
		ai_chance = {
			base = 100
		}
		SER = {
			transfer_state = 764
			transfer_state = 45
			transfer_state = 575
		}
		every_state = {
			limit = {
				is_core_of = BOS
			}
			transfer_state_to = SER
		}
		every_state = {
			limit = {
				is_core_of = CRO
			}
			transfer_state_to = SER
		}
	}
}

### AUS give nothing !
country_event = {
	id = ww1_serbia.134
	title = ww1_serbia.134.t
	desc = ww1_serbia.134.d
	picture = GFX_report_event_generic_destroyed_vehicles
	is_triggered_only = yes
	option = {
		name = ww1_serbia.134.a		#lets fight ! 
		ai_chance = {
			base = 100
		}
		create_wargoal = {
			target = AUS
			type = take_core_state
		}
		add_ai_strategy = {
			type = prepare_for_war
			id = SER
			value = 100
		}
	}
}

### SER mobilize ! 
country_event = {
	id = ww1_serbia.135
	title = ww1_serbia.135.t
	desc = ww1_serbia.135.d
	picture = GFX_report_event_generic_destroyed_vehicles
	is_triggered_only = yes
	option = {
		name = ww1_serbia.134.a		#lets fight ! 
		ai_chance = {
			base = 100
		}
		add_ai_strategy = {
			type = prepare_for_war
			id = SER
			value = 100
		}
	}
}

### SER mobilize for july crisis ! 
country_event = {
	id = ww1_serbia.137
	title = ww1_serbia.137.t
	desc = ww1_serbia.137.d
	picture = GFX_report_event_generic_destroyed_vehicles
	trigger = {
		has_active_mission = AUH_ultimatum_to_SER
		tag = SER
		NOT = {
			has_country_flag = SER_mobilize_july_crisis
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 4
	}
	option = {
		name = ww1_serbia.135.a		#lets fight ! 
		ai_chance = {
			base = 100
		}
		set_country_flag = SER_mobilize_july_crisis
		if = {
			limit = {
				NOT = {
					has_template = "1914 Manji Odredi"
				}
			}
			division_template = {
				name = "1914 Manji Odredi"
				division_names_group = SER_INF_02
				priority = 0
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 0
						y = 2
					}
					infantry = {
						x = 0
						y = 3
					}
					infantry = {
						x = 1
						y = 0
					}
					infantry = {
						x = 1
						y = 1
					}
					infantry = {
						x = 1
						y = 2
					}
				}
			}
		}
		random_owned_controlled_state = {
			create_unit = {
				division = "name = \"1. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"2. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"3. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"4. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"5. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"6. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"7. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"8. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"9. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
			create_unit = {
				division = "name = \"10. Manji Odredi\" division_template = \"1914 Manji Odredi\" start_experience_factor = 0.2 start_equipment_factor = 1"
				owner = SER
			}
		}
	}
}
# The Long Expected War
country_event = {
	id = ww1_serbia.138
	trigger = {
		tag = SER
		OR = {
			has_war_with = AUS
			has_wargoal_against = AUS
			AUS = {
				has_wargoal_against = ROOT
			}
			has_global_flag = AUH_franz_ferdinand_killed_in_sarajevo
		}
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 0
	}
	hidden = yes
	immediate = {
		hidden_effect = {
			set_country_flag = unlocked_war_tree
			mark_focus_tree_layout_dirty = yes
		}
		unlock_national_focus = SER_the_long_expected_war
	}
}

# State of Slovenes, Croats and Serbs Integration
country_event = {
	id = ww1_serbia.139
	title = ww1_serbia.139.t
	desc = ww1_serbia.139.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	option = {
		name = ww1_serbia.139.a
		custom_effect_tooltip = GAME_OVER_TT
		FROM = {
			annex_country = {
				target = CRO
				transfer_troops = yes
			}
			if = {
				limit = {
					NOT = {
						has_cosmetic_tag = SER_empire
						has_cosmetic_tag = YUG
						has_cosmetic_tag = SER_YUG
					}
				}
				if = {
					limit = {
						has_country_flag = greater_serbia_chosen
					}
					set_cosmetic_tag = SER_empire
				}
				else_if = {
					limit = {
						any_owned_state = {
							is_core_of = SLV
						}
					}
					set_cosmetic_tag = SER_YUG
				}
				else = {
					set_cosmetic_tag = YUG
				}
				set_country_flag = SER_yugoslavia_formed
			}
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							is_core_of = CRO
							is_core_of = SLV
							is_core_of = BOS
						}
					}
					add_core_of = PREV
				}
				every_state = {
					limit = {
						OR = {
							is_claimed_by = CRO
							is_claimed_by = SLV
							is_claimed_by = BOS
						}
					}
					add_claim_by = PREV
				}
			}
		}
	}
	option = {
		name = ww1_serbia.139.b
		trigger = {
			NOT = {
				has_country_flag = great_war_loser
				is_subject_of = FROM
			}
		}
		FROM = {
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

# Montenegro Integration
country_event = {
	id = ww1_serbia.140
	title = ww1_serbia.140.t
	desc = ww1_serbia.140.d
	picture = GFX_report_event_generic_peaceful_annexation
	is_triggered_only = yes
	option = {
		name = ww1_serbia.140.a
		FROM = {
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
		hidden_effect = {
			every_unit_leader = {
				set_nationality = FROM
			}
			every_state = {
				limit = {
					is_core_of = ROOT
				}
				add_core_of = FROM
			}
			every_state = {
				limit = {
					is_claimed_by = ROOT
				}
				add_claim_by = FROM
			}
			FROM = {
				change_tag_from = ROOT
			}
		}
	}
	# player chance to resist - the whites revolt
	option = {
		name = ww1_serbia.140.b
		trigger = {
			is_subject = no
		}
		start_civil_war = {
			ideology = democratic
			size = 0.5
			states_filter = {
				NOT = {
					state = 105
					state = 870
				}
			}
			keep_political_leader = yes
			keep_political_party_members = yes
			keep_unit_leaders_trigger = {
				OR = {
					has_trait = politically_connected
					has_trait = trait_royal
					has_trait = trait_royalist
				}
			}
			hidden_effect = {
				PREV = {
					MNT_podgorica_assembly = {
						set_nationality = PREV.PREV
					}
				}
				FROM = {
					set_autonomy = {
						target = PREV
						autonomy_state = autonomy_integrated_puppet
						end_wars = no
						end_civil_wars = no
					}
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				add_popularity = {
					ideology = democratic
					popularity = 0.2
				}
				set_party_name = {
					ideology = democratic
					long_name = MNT_national_assembly_long
					name = MNT_national_assembly
				}
				MNT_podgorica_assembly = {
					if = {
						limit = {
							has_ideology = conservatism
						}
						promote_character = conservatism
					}
					else = {
						add_country_leader_role = {
							promote_leader = yes
							country_leader = {
								ideology = conservatism
							}
						}
					}
				}
			}
		}
		hidden_effect = {
			every_state = {
				limit = {
					is_core_of = ROOT
				}
				add_core_of = FROM
			}
			every_state = {
				limit = {
					is_claimed_by = ROOT
				}
				add_claim_by = FROM
			}
		}
		ai_chance = {
			base = 0
		}
	}
}

#Putnik in Budapest
country_event = {
	id = ww1_serbia.141
	title = ww1_serbia.141.t
	desc = ww1_serbia.141.d
	picture = GFX_report_event_generic_army
	is_triggered_only = yes
	trigger = {
		tag = AUS
	}
	option = {
		name = ww1_serbia.141.a
		ai_chance = {
			base = 50
		}
	}
	option = {
		name = ww1_serbia.141.b
		SER = {
			retire_character = SER_radomir_putnik
			country_event = ww1_serbia.142
		}
		ai_chance = {
			base = 30
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

#Putnik in Budapest
country_event = {
	id = ww1_serbia.142
	title = ww1_serbia.142.t
	desc = ww1_serbia.142.d
	picture = GFX_report_event_generic_army
	is_triggered_only = yes
	trigger = {
		tag = SER
	}
	option = {
		name = ww1_serbia.142.a
		effect_tooltip = {
			retire_character = SER_radomir_putnik
			add_war_support = -0.05
		}
		SER_stepa_stepanovic = {
			promote_leader = yes
		}
		ai_chance = {
			base = 50
		}
	}
}

#serbian reaction when austria attack, but serbia is still in faction with bulgaria and greece
country_event = {
	id = ww1_serbia.143
	title = ww1_serbia.143.t
	desc = ww1_serbia.143.d
	picture = GFX_report_event_generic_army
	mean_time_to_happen = {
		days = 4
	}
	trigger = {
		OR = {
			tag = SER
			tag = BUL
			tag = GRE
		}
		SER = {
			is_in_faction_with = BUL
			is_in_faction_with = GRE
			has_war_with = AUS
		}
		NOT = {
			has_country_flag = SER_great_war_with_balkan_faction
		}
	}
	option = {
		name = ww1_serbia.143.a
		add_war_support = 0.05
		set_country_flag = SER_great_war_with_balkan_faction
		set_global_flag = SER_great_war_with_balkan_faction
		ai_chance = {
			base = 50
		}
	}
}

#if austria beat the balkan alliance, special peace conference
country_event = {
	id = ww1_serbia.144
	title = ww1_serbia.144.t
	desc = ww1_serbia.144.d
	picture = GFX_report_event_generic_army
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_serbia.144.a
		ai_chance = {
			base = 50
		}
		every_country = {
			limit = {
				OR = {
					original_tag = AUS
					is_subject_of = AUS
					is_in_faction_with = AUS
				}
				has_war_with = BLL
			}
			every_other_country = {
				limit = {
					OR = {
						tag = BLL
						is_in_faction_with = BLL
					}
				}
				set_country_flag = austria_vs_balkan_league_loser
				white_peace = PREV
			}
			BLL = {
				dismantle_faction = yes
			}
			every_state = {
				limit = {
					OWNER = {
						has_country_flag = austria_vs_balkan_league_loser
					}
					OR = {
						is_claimed_by = PREV
						is_core_of = PREV
					}
				}
				transfer_state_to = PREV
			}
		}
		if = {
			limit = {
				MNT = {
					has_country_flag = austria_vs_balkan_league_loser
				}
			}
			annex_country = {
				target = MNT
				transfer_troops = no
			}
		}
		if = {
			limit = {
				NOT = {
					has_war_with = ALB
				}
			}
			if = {
				limit = {
					ALB = {
						exists = no
					}
				}
				puppet = ALB
			}
			every_state = {
				limit = {
					OWNER = {
						has_country_flag = austria_vs_balkan_league_loser
					}
					is_core_of = ALB
				}
				transfer_state_to = ALB
			}
		}
		if = {
			limit = {
				BUL = {
					exists = yes
					is_subject = no
					has_country_flag = austria_vs_balkan_league_loser
				}
			}
			puppet = BUL
		}
		if = {
			limit = {
				SER = {
					exists = yes
					is_subject = no
					has_country_flag = austria_vs_balkan_league_loser
				}
			}
			puppet = SER
		}
		if = {
			limit = {
				is_in_faction_with = TUR
				TUR = {
					is_subject = no
				}
				GRE = {
					exists = yes
					is_subject = no
					has_country_flag = austria_vs_balkan_league_loser
				}
			}
			TUR = {
				puppet = GRE
			}
		}
	}
	option = {
		name = ww1_serbia.144.b
		ai_chance = {
			base = 0
		}
	}
}

#if balkan alliance beat the austria, special peace conference
country_event = {
	id = ww1_serbia.145
	title = ww1_serbia.145.t
	desc = ww1_serbia.145.d
	picture = GFX_report_event_generic_army
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_serbia.145.a
		ai_chance = {
			base = 50
		}
		every_country = {
			limit = {
				OR = {
					tag = BLL
					is_subject_of = BLL
					is_in_faction_with = BLL
				}
				has_war_with = AUS
			}
			every_other_country = {
				limit = {
					OR = {
						original_tag = AUS
						is_subject_of = AUS
						is_in_faction_with = AUS
					}
				}
				set_country_flag = austria_vs_balkan_league_loser
				white_peace = PREV
			}
			every_state = {
				limit = {
					OWNER = {
						has_country_flag = austria_vs_balkan_league_loser
					}
					OR = {
						is_claimed_by = PREV
						is_core_of = PREV
					}
				}
				transfer_state_to = PREV
			}
		}
		AUS = {
			release = CRO
			release = BOS
		}
	}
	option = {
		name = ww1_serbia.145.b
		ai_chance = {
			base = 0
		}
	}
}

# Austrian puppet serbia border
country_event = {
	id = ww1_serbia.146
	title = ww1_serbia.146.t
	desc = ww1_serbia.146.d
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	trigger = {
		tag = AUS
		any_owned_state = {
			is_core_of = MNT
		}
		SER = {
			is_subject_of = ROOT
			NOT = {
				has_autonomy_state = autonomy_dominion
			}
		}
		NOT = { has_subject = MNT }
	}
	option = {
		name = ww1_serbia.146.a
		every_state = {
			limit = {
				OR = {
					state = 107
					state = 760
					state = 761
					state = 809
					state = 847
					state = 848
					state = 876
				}
				OWNER = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
						has_country_flag = great_war_loser
					}
				}
			}
			remove_claim_by = ROOT
			add_core_of = SER
			transfer_state_to = SER
		}
		ai_chance = {
			base = 0
		}
	}
	option = {
		name = ww1_serbia.146.c
		every_state = {
			limit = {
				OR = {
					state = 105
					state = 107
					state = 760
					state = 761
					state = 809
					state = 847
					state = 848
					state = 876
				}
				OWNER = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
						has_country_flag = great_war_loser
					}
				}
			}
			add_core_of = SER
			if = {
				limit = { has_resistance = yes }
				add_resistance = 30
				add_compliance = -100
			}
		}
		ai_chance = {
			base = 0
		}
	}
	option = {
		name = ww1_serbia.146.b
		add_political_power = -25
		every_state = {
			limit = {
				OR = {
					state = 107
					state = 760
					state = 761
					state = 809
					state = 847
					state = 848
					state = 876
				}
				OWNER = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
						has_country_flag = great_war_loser
					}
				}
			}
			add_core_of = SER
			if = {
				limit = { has_resistance = yes }
				add_resistance = 30
				add_compliance = -100
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 10
				has_government = fascism
			}
			modifier = {
				add = 10
				has_subject = CRO
			}
		}
	}
}


#Serbia invade Banat
country_event = {
	id = ww1_serbia.150
	title = ww1_serbia.150.t
	desc = ww1_serbia.150.d
	picture = GFX_report_event_generic_military_parade
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_serbia.150.a
		add_political_power = 25
	}
}
