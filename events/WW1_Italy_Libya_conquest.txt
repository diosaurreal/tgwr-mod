add_namespace = ww1_italy_libya

# Libyan Tribes 
country_event = {
	id = ww1_italy_libya.1
	title = ww1_italy_libya.1.t
	desc = ww1_italy_libya.1.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.1.a
		unlock_decision_category_tooltip = ITA_libyan_tribes
		set_country_flag = libya_resistance
		NAF = {
			transfer_state = 661
			transfer_state = 273
			add_country_leader_role = {
				character = NAF_ramadan_asswehly
				promote_leader = yes
				country_leader = {
					ideology = neutrality
					expire = "1965.1.1.1"
					traits = {
					}
				}
			}
			division_template = {
    			name = "Nafusi Tribesmen"
    			is_locked = yes
    			division_cap = 6
				priority = 0
    			template_counter = 0
    			regiments = {
        			irregular_infantry = { x = 0 y = 0 }
        			irregular_infantry = { x = 0 y = 1 }
    			}
			}
			random_owned_controlled_state = {
				create_unit = {
    				division = "name = \"Nafusi Tribesmen\" division_template = \"Nafusi Tribesmen\" start_manpower_factor = 1 start_equipment_factor = 1"
   					owner = NAF
    				count = 6
    				allow_spawning_on_enemy_provs = no
				}
			}
		}
	}
}

# Victory in Border War - Italy
country_event = {
	id = ww1_italy_libya.2
	title = ww1_italy_libya.2.t
	desc = ww1_italy_libya.2.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.2.a
		TRP = {
			transfer_state = 1060
			annex_country = {
    			target = NAF
    			transfer_troops = no
			}
		}
		every_state = {
			limit = {
				OR = {
					is_owned_and_controlled_by = TRP
					is_owned_and_controlled_by = CYR
				}
				OR = {
					NOT = {
						state = 448
						state = 450
					}
				}
			}
			add_dynamic_modifier = {
				modifier = ITA_libyan_resistance
			}
		}
	}
}

# Loss in Border war - Italy
# Loss Against Tribesmen with Sticks
country_event = {
	id = ww1_italy_libya.3
	title = ww1_italy_libya.3.t
	desc = ww1_italy_libya.3.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.3.a
		add_political_power = -20
	}
}

# Victory in Border War - Nafusi
# We have ridiculised them
country_event = {
	id = ww1_italy_libya.4
	title = ww1_italy_libya.4.t
	desc = ww1_italy_libya.4.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.4.a
		
	}
}

# Loss in Border War - Nafusi
# womp womp
country_event = {
	id = ww1_italy_libya.5
	title = ww1_italy_libya.5.t
	desc = ww1_italy_libya.5.t
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.5.a
		
	}
}

# Stalemate in Border War - Italy/Nafusi
# Consider loss for both!
country_event = {
	id = ww1_italy_libya.6
	title = ww1_italy_libya.6.t
	desc = ww1_italy_libya.6.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_italy_libya.6.a
		trigger = {
			tag = ITA
		}
	}
	option = {
		name = ww1_italy_libya.6.b
		trigger = {
			tag = NAF
		}
	}
}
# Start Border War
country_event = {
	id = ww1_italy_libya.7
	title = ww1_italy_libya.7.t
	desc = ww1_italy_libya.7.d
	picture = GFX_french_parliament
	fire_only_once = yes
	is_triggered_only = yes
	immediate = {
		start_border_war = {
    		change_state_after_war = no
    		attacker = {
    		    state = 1060
    		    num_provinces = 5
    		    on_win = ww1_italy_libya.2
    		    on_lose = ww1_italy_libya.3
    		    on_cancel = ww1_italy_libya.6
				modifier = 0.1
        		dig_in_factor = 0
        		terrain_factor = 0.2
    		}	
    		defender = {
    		    state = 661
    		    num_provinces = 5
     		  	on_win = ww1_italy_libya.4
    		    on_lose = ww1_italy_libya.5
    		    on_cancel = ww1_italy_libya.6
				modifier = -0.15
        		dig_in_factor = -0.25
        		terrain_factor = 0
    		}
		}
	}
	option = {
		name = ww1_italy_libya.7.a
		effect_tooltip = {
			start_border_war = {
    		change_state_after_war = no
    		attacker = {
    		    state = 1060
    		    num_provinces = 5
    		    on_win = ww1_italy_libya.2
    		    on_lose = ww1_italy_libya.3
    		    on_cancel = ww1_italy_libya.6
				modifier = 0.1
        		dig_in_factor = 0
        		terrain_factor = 0.2
    		}	
    		defender = {
    		    state = 661
    		    num_provinces = 5
     		  	on_win = ww1_italy_libya.4
    		    on_lose = ww1_italy_libya.5
    		    on_cancel = ww1_italy_libya.6
				modifier = -0.15
        		dig_in_factor = -0.25
        		terrain_factor = 0
    		}
		}
		}
	}
}
