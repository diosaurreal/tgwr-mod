add_namespace = ww1_estonia

# Lennuk and Wambola
country_event = {
	id = ww1_estonia.1
	title = ww1_estonia.1.t
	desc = ww1_estonia.1.d
	picture = GFX_report_event_destroyers
	trigger = {
		date > 1915.1.1
		tag = EST
		is_subject = no
		NOT = {
			ENG = {
				is_subject = yes
				has_government = communism
			}
			has_war_with = ENG
		}
		any_owned_state = {
			is_coastal = yes
			naval_base > 0
		}
		has_global_flag = russian_civil_war
	}
	fire_only_once = yes
	mean_time_to_happen = {
		days = 120
	}
	option = {
		name = ww1_estonia.1.a
		create_ship = {
			type = ship_hull_light_2
			creator = RUS
			equipment_variant = "Leytenant Illyin Class"
			name = "Wambola"
		}
		create_ship = {
			type = ship_hull_light_2
			creator = RUS
			equipment_variant = "Izyaslav Class"
			name = "Lennuk"
		}
	}
}

# NORTHWESTERN ARMY
######################
country_event = {
	id = ww1_estonia.2
	title = ww1_estonia.2.t
	desc = ww1_estonia.2.d
	picture = GFX_report_event_generic_conference
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_estonia.2.a
		diplomatic_relation = {
			country = RUS
			relation = military_access
			active = yes
		}
		RUS = {
			transfer_state = 209
		}
		209 = {
			create_unit = {
				division = "division_template = \"Belogvardeyskiy Korpus\"	start_experience_factor = 0.6	start_equipment_factor = 1"
				owner = RUS
				allow_spawning_on_enemy_provs = no
				count = 2
				country_score = {
					base = 100
				}
			}
			create_unit = {
				division = "division_template = \"Belogvardeyskaya Kavaleriya\"	start_experience_factor = 0.6	start_equipment_factor = 1"
				owner = RUS
				allow_spawning_on_enemy_provs = no
				count = 1
				country_score = {
					base = 100
				}
			}
		}
		SOV = {
			add_opinion_modifier = {
				target = EST
				modifier = large_decrease
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_estonia.2.a
		RUS = {
			add_opinion_modifier = {
				target = EST
				modifier = large_decrease
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = ww1_estonia.3
	title = ww1_estonia.3.t
	desc = ww1_estonia.3.d
	picture = GFX_report_event_generic_conference
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = ww1_estonia.3.a
		ai_chance = {
			factor = 100
		}
		start_civil_war = {
			keep_political_leader = yes
			keep_political_party_members = yes
			keep_unit_leaders_trigger = {
				always = yes
			}
			ideology = communism
			size = 0.25
			states = {
				953
			}
			hidden_effect = {
				PREV = {
					EST_jaan_anvelt = {
						set_nationality = PREV.PREV
					}
					set_province_controller = 11443
					set_province_controller = 11057
					set_province_controller = 11127
				}
				EST_jaan_anvelt = {
					promote_character = revolutionary_socialism
				}
				division_template = {
					name = "Punane Jalaväerügement"
					regiments = {
							infantry = { x = 0 y = 0 }
						}
						support = { 
							artillery = { x = 0 y = 0}
						}
				}
				division_template = {
					name = "Punaarmee Jalaväerügement"
					regiments = {
						infantry = { x = 0 y = 0 }
					}
					is_locked = yes
				}
				ROOT = {
					division_template = {
						name = "Jalaväerügement"
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
						}
						support = { 
							artillery = { x = 0 y = 0}
						}
					}
				}
				953 = {
					create_unit = {
						division = "name = \"47. Strelkovyy Polk\" division_template = \"Punaarmee Jalaväerügement\" start_experience_factor = 0.1 start_equipment_factor = 0.5 start_manpower_factor = 0.8"
						owner = PREV
						prioritize_location = 4640
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"46. Strelkovyy Polk\" division_template = \"Punaarmee Jalaväerügement\" start_experience_factor = 0.1 start_equipment_factor = 0.5 start_manpower_factor = 0.8"
						owner = PREV
						prioritize_location = 4640
						allow_spawning_on_enemy_provs = yes
					}
					
					create_unit = {
						division = "name = \"2. Viljandi Rügement\" division_template = \"Punane Jalaväerügement\" start_experience_factor = 0.2 start_equipment_factor = 0.5 start_manpower_factor = 0.5"
						owner = PREV
						prioritize_location = 4640
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"15. Tarto Rügement\" division_template = \"Punane Jalaväerügement\" start_experience_factor = 0.2 start_equipment_factor = 0.8 start_manpower_factor = 1"
						owner = PREV
						prioritize_location = 4640
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"1. Tallinn Rügement\" division_template = \"Punane Jalaväerügement\" start_experience_factor = 0.2 start_equipment_factor = 0.85 start_manpower_factor = 0.55"
						owner = PREV
						prioritize_location = 4640
						allow_spawning_on_enemy_provs = yes
					}
					
					create_unit = {
						division = "name = \"4. Rügement\" division_template = \"Jalaväerügement\" start_experience_factor = 0.1 start_equipment_factor = 0.6 start_manpower_factor = 0.085"
						owner = ROOT
						prioritize_location = 11443
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "name = \"5. Rügement\" division_template = \"Jalaväerügement\" start_experience_factor = 0.1 start_equipment_factor = 0.6 start_manpower_factor = 0.14"
						owner = ROOT
						prioritize_location = 11127
						allow_spawning_on_enemy_provs = yes
					}
				}
				add_ideas = standing_alone
			}
		}
	}
	option = {
		name = ww1_estonia.3.b
		start_civil_war = {
			keep_political_leader = yes
			keep_political_party_members = yes
			keep_unit_leaders_trigger = {
				always = yes
			}
			ideology = communism
			size = 0.25
			states = {
				953
			}
			hidden_effect = {
				PREV = {
					EST_jaan_anvelt = {
						set_nationality = PREV.PREV
					}
					set_province_controller = 11443
					set_province_controller = 11057
					set_province_controller = 11127
				}
				EST_jaan_anvelt = {
					promote_character = revolutionary_socialism
				}
				
				add_ideas = standing_alone
			}
		}
		every_other_country = {
			limit = {
				original_tag = EST
				has_government = communism
			}
			change_tag_from = EST	
		}
		ai_chance = {
			factor = 0
		}
	}
}
